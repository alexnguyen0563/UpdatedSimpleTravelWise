/*! permutive-javascript-sdk v19.101.0 (web) (built 2023-11-24T11:49:12.388Z) */(()=>{"use strict";var __webpack_modules__={2688:(t,e,n)=>{function r(t){return t instanceof Error?t:new Error("string"==typeof t?t:JSON.stringify(t))}n.d(e,{w:()=>r})},787:(t,e,n)=>{n.d(e,{A:()=>o});var r=n(3735),i=n(6567);function o(t){return(0,r.zG)((0,i.Y3)((()=>JSON.parse(t))),(0,i.fS)(r.gn))}},7183:(t,e,n)=>{n.d(e,{h:()=>r});const r=t=>new i(t);class i{constructor(t){const e=this;this._worker=t,this._callbacks={},this._id=0,t.addEventListener("message",(function(t){i.onMessage(e,t)}))}set id(t){this._id=t}get id(){return this._id}newId(){const t=this.id;return this.id=this.id+1,t}static onMessage(t,e){if(n=e.data,!(Array.isArray(n)&&n.length>=2))return;var n;const[r,i,o]=e.data,s=t._callbacks[r];s&&(delete t._callbacks[r],s(i,o))}static isServiceWorker(t){return void 0!==t.controller}postMessage(t){const e=this,n=this.newId(),r=[n,t];return new Promise((function(t,o){var s;if(e._callbacks[n]=function(e,n){if(e)return o(new Error(e.message));t(n)},i.isServiceWorker(e._worker)){const t=new MessageChannel;t.port1.onmessage=function(t){i.onMessage(e,t)},null===(s=e._worker.controller)||void 0===s||s.postMessage(r,[t.port2])}else e._worker.postMessage(r)}))}}},5912:(t,e,n)=>{n.r(e),n.d(e,{CleanRoomAddon:()=>O,load:()=>D,segmentationService:()=>T});var r=n(7582),i=n(3735),o=n(9853),s=n(2688),a=n(1500),c=n(365),u=n(6567),d=n(6934),l=n(2851),m=n(2652),f=n(4730),p=n(7826);class h{putOrResetUnprocessed(t){return(0,r.mG)(this,void 0,void 0,(function*(){return(0,i.zG)(t,u.g_((()=>d.Y3((()=>this.unprocessedPrebidAuctions.reset()),s.w)),(t=>d.Y3((()=>this.unprocessedPrebidAuctions.put(t)),s.w))),d.vx((t=>(this.reportError(`Unprocessed auctions failed to put. Got ${t}`),d.F2((0,i.Q1)())))),(t=>t()))}))}get allAuctions(){return Object.assign(Object.assign({},this.stagedAuctions),this.trackableAuctions)}constructor(t){this.prefix="[clean_room]",this.debouncedPutOrResetUnprocessed=this.setupUnprocessedPrebidAuctions(),this.stagedAuctions={},this.trackableAuctions={},this.trackAuctionsInterval=null,this.permutive=t.permutive,this.api=t.api,this.logger=t.logger,this.unprocessedPrebidAuctions=t.unprocessedEvents.PrebidAuctions,this.sessionManager=t.sessionManager,this.clientContext=t.clientContext,this.viewId=t.viewId,(0,i.zG)(t.pbjs,l.UI(u.EQ((()=>{this.logInfo("Waiting for PrebidJS to start PrebidAuctions tracking...")}),(t=>this.startPrebidAuctions(t)))))}startPrebidAuctions(t){return(0,r.mG)(this,void 0,void 0,(function*(){yield this.trackUnprocessedPrebidAuctions(),this.logDebug("Starting PrebidAuctions tracking",{prebid:t});const e=(0,p.zi)(t),n=t=>0===t.bidsReceived.length&&0===t.noBids.length?null:(0,i.zG)(this.mapToStagedAuctions(t),c.tS((()=>c.Y3((()=>t.bidsReceived.forEach((t=>{var n;("rendered"===(n=t).status||"targetingSet"===n.status)&&this.setBidToWon(e,t)}))),(t=>{const e=`Failed to process auction. Got ${(0,s.w)(t)}`;return this.reportError(e),(0,s.w)(e)})))));t.onEvent("auctionEnd",(t=>{n(t),this.storeAuctionsAsUnprocessed(this.allAuctions)}));const o=n=>{const r=(0,m.qh)(n);this.logDebug("Processing setTargeting event",{adUnitCodes:r});const o=c.DT((t=>{let[e,n]=t;return!!e&&!!n.hb_adid}),(()=>new Error("Missing targeting data"))),s=(0,i.ls)(o,c.tS((e=>{let[n,{hb_adid:r}]=e;return(0,i.zG)(t.getAllPrebidWinningBids(),(0,a.Ew)((t=>t.adId===r&&t.adUnitCode===n)),c.Yo((()=>new Error("Prebid winning bid does not exist"))))})),c.UI((t=>{this.setBidToWon(e,t)})));return r.forEach(s)};t.onEvent("setTargeting",(t=>{o(t),this.storeAuctionsAsUnprocessed(this.allAuctions)})),t.onEvent("bidWon",(t=>{this.setBidToWon(e,t),this.storeAuctionsAsUnprocessed(this.allAuctions)}));const u=(t,n)=>{this.logDebug("Processing render event",{isRendered:t,props:n}),n.bid&&(t&&this.setBidToRendered(e,n.bid),this.promoteAuctionToTrackable(n.bid),this.storeAuctionsAsUnprocessed(this.allAuctions),this.trackEligibleAuctions())};t.onEvent("adRenderSucceeded",(t=>{u(!0,t)})),t.onEvent("adRenderFailed",(t=>{u(!1,t)})),t.getEvents().forEach((t=>"auctionEnd"===t.eventType?n(t.args):"setTargeting"===t.eventType?o(t.args):"bidWon"===t.eventType?this.setBidToWon(e,t.args):"adRenderSucceeded"===t.eventType?u(!0,t.args):"adRenderFailed"===t.eventType?u(!1,t.args):void 0)),this.storeAuctionsAsUnprocessed(this.allAuctions,{debounced:!1}),(0,m.aT)((()=>(0,r.mG)(this,void 0,void 0,(function*(){this.trackAuctionsInterval=null;const t=this.allAuctions;this.stagedAuctions={},this.trackableAuctions={},yield this.trackPrebidAuctions(t,{useBeacon:!0}),yield this.storeAuctionsAsUnprocessed(null,{debounced:!1})}))))}))}trackUnprocessedPrebidAuctions(){return(0,i.zG)(d.Y3((()=>(0,r.mG)(this,void 0,void 0,(function*(){return(0,i.zG)(yield this.unprocessedPrebidAuctions.getIfPresent(),u.g_((()=>this.logDebug("No unprocessed PrebidAuctions found")),(t=>{var{props:e}=t,n=(0,r._T)(t,["props"]);return this.logDebug("Found unprocessed PrebidAuctions",{props:e,unprocessedData:n}),Promise.all([this.permutive.track("PrebidAuctions",e,{unprocessedData:n}),this.unprocessedPrebidAuctions.reset()])})))}))),(t=>{const e=`Failed to track unprocessed PrebidAuctions. Got ${(0,s.w)(t)}`;return this.reportError(e),(0,s.w)(e)})),(t=>t()))}setupUnprocessedPrebidAuctions(){const t=new f.b(1e3,2500),e=this.putOrResetUnprocessed.bind(this);return t.schedule(e)}storeAuctionsAsUnprocessed(t){let{debounced:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.mG)(this,void 0,void 0,(function*(){this.logDebug("Store auctions as unprocessed",{auctionsToStore:t,debounced:e});const n=d.Y3((()=>(0,r.mG)(this,void 0,void 0,(function*(){const e=(0,m.qh)(null!=t?t:{}).map((t=>{let[e,n]=t;return Object.assign(Object.assign({},n),{auction_id:e})})),n=yield this.clientContext.getClient();return(0,i.zG)(e,u.DT((t=>t.length>0)),u.UI((t=>({client:n,props:this.makePrebidAuctionProperties({auctions:t}),viewId:this.viewId.get(),sessionId:this.sessionManager.getSessionId()}))))}))),s.w);return(0,i.zG)(n,d.EQ((t=>{this.reportError(`Failed to process auctions: ${t}`)}),(t=>{const n=this.debouncedPutOrResetUnprocessed(t);return e?n:Promise.all([this.putOrResetUnprocessed(t),n])})),(t=>t()))}))}mapBidProperties(t,e){var n;return{ad_id:e.adId,ad_unit_code:e.adUnitCode,advertiser_domains:(0,p.Cg)(e),advertiser_id:(t=>{var e,n;const r=t.rubicon&&"object"==typeof t.rubicon&&"advertiserId"in t.rubicon&&t.rubicon.advertiserId||(null===(e=null==t?void 0:t.meta)||void 0===e?void 0:e.buyerId)||(null===(n=null==t?void 0:t.meta)||void 0===n?void 0:n.advertiserId);return r?`${r}`:void 0})(e),advertiser_name:(t=>{var e,n,r;const i=(null===(e=t.meta)||void 0===e?void 0:e.clickUrl)||(null===(n=t.adomain)||void 0===n?void 0:n[0])||(null===(r=t.meta)||void 0===r?void 0:r.advertiserName);return i?`${i}`:void 0})(e),bid_available:"string"==typeof e.statusMessage&&e.statusMessage.indexOf("empty")<0,bidder:e.bidder,bidder_timeout:(0,m.rH)(t.bidderTimeout),brand_id:(t=>{var e;const n=null===(e=t.meta)||void 0===e?void 0:e.brandId;return n?`${n}`:void 0})(e),brand_name:(t=>{var e;return null===(e=t.meta)||void 0===e?void 0:e.brandName})(e),cpm:(0,p.Qd)(e),creative_id:`${e.creativeId}`,deal_id:(0,p.$7)(e),dsp_id:(0,p.cs)(e),hb_pb:null===(n=e.adserverTargeting)||void 0===n?void 0:n.hb_pb,height:(0,m.rH)(e.height),request_timestamp:e.requestTimestamp,response_timestamp:e.responseTimestamp,time_to_respond:e.timeToRespond,width:(0,m.rH)(e.width)}}collectAdUnitCodes(t){const e=new Set;return t.reduce(((t,n)=>{let{adUnitCode:r}=n;return!r||e.has(r)||(e.add(r),t.push({ad_unit_code:r})),t}),[])}mapToStagedAuctions(t){return c.Y3((()=>{const{auctionId:e,bidsReceived:n,noBids:r}=t,i=this.collectAdUnitCodes(n),o=this.collectAdUnitCodes(r);return this.stagedAuctions[e]={bids:i,no_bids:o},this.logDebug("Added auction",this.stagedAuctions[e]),this.stagedAuctions[e]}),(t=>{const e=`Failed to map auction. Got ${(0,s.w)(t)}`;return this.reportError(e),(0,s.w)(e)}))}findAuction(t){return(0,i.zG)(this.getStagedAuction(t.auctionId),c.vx((()=>this.getTrackableAuction(t.auctionId))),c.vx((()=>this.mapToStagedAuctions({auctionId:t.auctionId,bidsReceived:[t],bidderRequests:[],noBids:[]}))))}setBidByOperation(t,e,n){const r=t=>t.hasOwnProperty("ad_id"),o=(n,o)=>{const u=t=>t.ad_id===n.adId,d=t=>t.ad_unit_code===n.adUnitCode,[l,m]=(0,i.zG)(o,(0,a.uK)((t=>r(t)&&u(t)&&d(t))),(t=>[t.left,t.right]));this.logDebug(`Bids for ${e}`,{nonMatching:l,matching:m});const f=(0,i.ls)(c.DT((t=>1===t.length),(()=>new Error("No matching bids"))),c.UI((t=>{let[n]=t;return this.logDebug(`Found bid for ${e}`,{found:n}),{found:n,others:l}}))),p=c.DT((t=>t.length<=1),(()=>new Error("Ad ID is not unique"))),h=(0,i.ls)(f,c.vx((()=>c.Y3((()=>{const i=this.mapBidProperties(t,n),o=l.filter((t=>!(!d(t)||!r(t))||!d(t)));return this.logDebug(`Creating bid for ${e}`,{created:i,others:o}),{found:i,others:o}}),(t=>(0,s.w)(`Failed to create bid. Got ${(0,s.w)(t)}`))))));return(0,i.zG)(m,p,c.tS(h))};return(0,i.ls)((t=>(0,i.zG)(this.findAuction(t),c.tS((r=>(0,i.zG)(o(t,r.bids),c.tS((t=>{let{found:e,others:r}=t;return c.Y3((()=>({updated:n(e),others:r})),s.w)})),c.UI((t=>{let{updated:n,others:i}=t;const o=[n,...i];r.bids=o,this.logDebug(`Bid operation ${e} successful`,n,o)}))))))),c.Vn((t=>{const n=`Failed bid operation ${e}. Got ${(0,s.w)(t)}`;return this.reportError(n),(0,s.w)(n)})))}setBidToWon(t,e){return this.setBidByOperation(t,"setWon",(t=>Object.assign(Object.assign({},t),{winning_bid:!0})))(e)}setBidToRendered(t,e){return this.setBidByOperation(t,"setRendered",(t=>Object.assign(Object.assign({},t),{winning_bid:!0,is_rendered:!0,rendered_timestamp:(new Date).getTime()})))(e)}promoteAuctionToTrackable(t){let{auctionId:e}=t;const n=this.stagedAuctions[e];if(n){if(this.trackableAuctions[e])return this.logError("Auction is already promoted to trackable",{auction:this.trackableAuctions[e]});this.trackableAuctions[e]=n,delete this.stagedAuctions[e],this.logDebug("Auction promoted to trackable",{auctionId:e,trackableAuctions:this.trackableAuctions})}}trackEligibleAuctions(){if(this.trackAuctionsInterval)return;this.trackAuctionsInterval=(0,m.PQ)((()=>(0,r.mG)(this,void 0,void 0,(function*(){if(!this.trackAuctionsInterval)return;this.trackAuctionsInterval=null;const t=this.trackableAuctions;this.trackableAuctions={},yield this.trackPrebidAuctions(t),yield this.storeAuctionsAsUnprocessed(this.stagedAuctions,{debounced:!1})}))),{timeout:5e3})}trackPrebidAuctions(t,e){return(0,r.mG)(this,void 0,void 0,(function*(){const n=(0,m.qh)(t).map((t=>{let[e,n]=t;return Object.assign(Object.assign({},n),{auction_id:e})}));n.length&&(yield this.permutive.track("PrebidAuctions",this.makePrebidAuctionProperties({auctions:n}),e),this.logDebug("Tracked auctions",{auctions:n}))}))}makePrebidAuctionProperties(t){return{aggregations:t,isp_info:"$ip_isp_info",geo_info:"$ip_geo_info"}}getStagedAuction(t){return(0,i.zG)(this.stagedAuctions[t],c.DT(Boolean,(()=>new Error("Staged auction not found"))),c.Vn((e=>(this.logError(e,{auctionId:t}),e))))}getTrackableAuction(t){return(0,i.zG)(this.trackableAuctions[t],c.DT(Boolean,(()=>new Error("Trackable auction not found"))),c.Vn((e=>(this.logError(e,{auctionId:t}),e))))}reportError(t){return this.api.reportError(`${this.prefix} ${t}`)}logInfo(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.logger.log(this.prefix,...e)}logDebug(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.logger.debug(this.prefix,...e)}logError(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.logger.error(this.prefix,...e)}}var g=n(6930),v=n(167),_=n(2116);const b=(t,e)=>(0,i.zG)(w(t),(0,v.n)({backoffAfterErrorMs:6e5}),_.YO("fetchSegments"),_.ak("fullSegmentationResult",(t=>{let{fetchSegments:n}=t;return(0,g.m)(l.UI((t=>({validityKey:()=>t.userId,freshnessKey:()=>t.sessionId,refresh:()=>(0,i.zG)([t.customCohorts,t.standardCohorts],u.DT((()=>t.isInitd&&t.realtime)),u.tS((e=>{let[r,i]=e;return n({userId:t.userId,fps:r,stds:i,newSession:!0})})),u.UI((e=>e.then((e=>{let{queries:n}=e;return{queries:n,viewId:t.viewId,sessionId:t.sessionId}})))))})),e))})),_.ak("deltaSegmentationResult",(t=>{let{fullSegmentationResult:n,fetchSegments:r}=t;return(0,g.m)((0,i.zG)(l.vP({input:e,fullSegmentationResult:n}),l.UI((t=>{let{input:e,fullSegmentationResult:n}=t;return{validityKey:()=>(0,i.zG)(n,u.UI((t=>t.sessionId)),u.fS((()=>"")),(t=>`${e.userId},${t}`)),freshnessKey:()=>e.viewId,refresh:()=>(0,i.zG)(n,u.hX((()=>e.isInitd&&e.realtime)),u.hX((t=>t.sessionId===e.sessionId&&t.viewId!==e.viewId)),u.UI((()=>[e.customCohorts,e.standardCohorts])),u.tS((t=>{let[n,i]=t;return r({userId:e.userId,fps:n,stds:i,newSession:!1})})))}}))))})),_.UI((0,i.ls)((t=>{let{fullSegmentationResult:e,deltaSegmentationResult:n}=t;return l.vP(e,n)}),l.UI((t=>{let[e,n]=t;const r=(0,i.ls)(u.UI((t=>t.queries)),u.fS(k));return E.concat(r(n),r(e))}))))),y=(t,e)=>n=>{(0,i.zG)(n.segments.direct_buy,l.YP((e=>{0===e.length?t.removeExternalData(S):t.setExternalJsonData(S,e)}))),(0,i.zG)((0,i.zG)(l.vP(n.segments.programmatic,l.UI((t=>t.demandPartnerCohorts),e)),l.UI((t=>{let[e,n]=t;return[...n,...e]}))),l.YP((e=>{0===e.length?t.removeExternalData(P):t.setExternalJsonData(P,e)})))},w=t=>e=>{var{newSession:n}=e,i=(0,r._T)(e,["newSession"]);return t.permutiveApi.req({url:t.permutiveUrls.getAdvertiserEndpointUrl("/segment",u.G(t.config.advertiserApiVersion),[["new-session",n.toString()]]),method:"POST",payload:i,contentType:"text/plain",dataType:"json",withCredentials:!1}).then((t=>{var e,n;return{queries:{direct_buy:null!==(e=t.queries.direct_buy)&&void 0!==e?e:[],programmatic:null!==(n=t.queries.programmatic)&&void 0!==n?n:[]}}}))},k=()=>({direct_buy:[],programmatic:[]}),E={concat:(t,e)=>({direct_buy:[...new Set([...t.direct_buy,...e.direct_buy])],programmatic:[...new Set([...t.programmatic,...e.programmatic])]})},S="_pcrdbs",P="_pcrprs",I="clean_room",D=t=>{(0,o.Hn)(I)("auto_init",!1)&&t.q.push({functionName:"addon",arguments:[I,{}]})};class O extends h{}function T(t,e){return(0,i.zG)(e,l.UI((t=>{var{initdAddons:e}=t,n=(0,r._T)(t,["initdAddons"]);return Object.assign(Object.assign({},n),{isInitd:e.has(I)})})),(e=>M(t,e)))}const M=function(t,e){const n=k();return(0,i.zG)(e,_.KD([[t=>!t.consent||t.addonsLoaded&&!t.isInitd,_.K4((()=>l.a9(n)))],b(t,e)]),_.UI((0,i.ls)(l.xH,(t=>({segments:{all:(0,i.zG)(t,l.UI((t=>[...new Set([...t.direct_buy,...t.programmatic])])),l.D8(m.cO)),direct_buy:(0,i.zG)(t,l.UI((t=>t.direct_buy)),l.D8(m.cO)),programmatic:(0,i.zG)(t,l.UI((t=>t.programmatic)),l.D8(m.cO))}})),(0,m.bw)(y(t.externalData,e)))))}},9557:(t,e,n)=>{n.r(e),n.d(e,{SspAddon:()=>h,load:()=>p,realService:()=>m,sspService:()=>d,stubService:()=>l});var r=n(2851),i=n(9853),o=n(3735),s=n(3328),a=n(2116),c=n(4011),u=n(2652);const d=m;function l(t,e){return a.K4((()=>(t.removeExternalData(g),r.a9({cohorts:[],ssps:[],gamTargetingValues:[]}))))}function m(t,e){const n=(0,i.Hn)(f),d=n("ssps",[]),l=n("cohort_mapping",{}),m=d.includes("google_pps"),p={cohorts:[],ssps:[]};return(0,o.zG)(r.vP({consent:e.consent,addonsLoaded:e.addonsLoaded,addonInitd:r.UI((t=>t.has(f)),e.initdAddons)}),a.KD([[t=>{let{consent:e,addonsLoaded:n,addonInitd:r}=t;return!e||n&&!r},a.K4((()=>(t.removeExternalData(g),r.a9(p))))],[t=>{let{addonsLoaded:e,addonInitd:n}=t;return!e&&!n},a.K4((()=>r.a9(Object.assign(Object.assign({},p),t.getExternalJsonData(g)))))],a.K4((n=>{let{onServiceStop:i}=n;return(0,o.zG)(e.standardCohorts,r.UI(s.hX((t=>t in l))),r.D8(s.Eh(c.Eq)),r.UI((0,o.ls)(s.UI((t=>l[t])),(t=>({ssps:d,cohorts:t})))),(0,u.bw)((0,o.ls)(r.YP((e=>t.setExternalJsonData(g,e))),(t=>i(t)))))}))]),a.UI(r.xH),a.UI(r.UI((t=>Object.assign(Object.assign({},t),{gamTargetingValues:m?t.cohorts:[]})))))}const f="ssp",p=t=>{(0,i.Hn)(f)("auto_init",!1)&&t.q.push({functionName:"addon",arguments:[f,{}]})};class h{constructor(t){}}const g="_pssps"},3992:(t,e,n)=>{n.d(e,{GL:()=>o,HJ:()=>s,SF:()=>u,UM:()=>a,ho:()=>l,iE:()=>d,t_:()=>c});let r=[],i=!1;const o=t=>function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return s((()=>t(...n)))},s=(t,e)=>{if(!i){const n=window.setTimeout(t,e);return()=>window.clearTimeout(n)}let n;const o=()=>{void 0!==n&&i&&r.length<1e4&&r.push([n,performance.now()]),n=void 0},s=[window.setTimeout((()=>{n=performance.now(),window.requestAnimationFrame(o),t()}),e),window.setTimeout(o,e)];return()=>{void 0===n&&s.forEach((t=>window.clearTimeout(t)))}},a=(t,e)=>{if(!i){const n=window.setInterval(t,e);return()=>window.clearInterval(n)}let n=!1,r=()=>{};const o=window.setInterval((()=>{r=s((()=>{n||t()}))}),e);return()=>{n=!0,r(),window.clearInterval(o)}},c=t=>new Promise(((e,n)=>t.then(o(e),o(n)))),u=t=>{const e=(n=t,()=>c(n()));var n;return()=>new Promise((t=>s((()=>t(e())))))},d=()=>{const t=r;return r=[],t},l=t=>{i=t}},2851:(t,e,n)=>{n.d(e,{oQ:()=>P,a9:()=>p,Ue:()=>f,D8:()=>E,BT:()=>S,VS:()=>v,xH:()=>_,g_:()=>b,p4:()=>k,UI:()=>g,vP:()=>y,bw:()=>I,YP:()=>h});var r=n(2688),i=n(365),o=n(3735),s=n(6567),a=n(3328),c=n(2652);function u(t){let e=t,n=[],r=!1;return{addListener(t){if(r)return()=>{};let i=e;const o=()=>{Object.is(e,i)||(i=e,t(e))};n=[...n,o];return()=>{n=n.filter((t=>t!==o))}},notify(t){if(r)throw new Error("Ref bug: Attempted to notify a terminated notifier");Object.is(t,e)||(e=t,n.forEach((t=>t())))},terminate(){r=!0,n=[]}}}function d(t,e){let n=0;return function(){try{if(n++>0)throw new Error(t);return e(...arguments)}finally{n--}}}function l(t,e){let n=[...new Set(t)].filter((t=>"final"!==t.state));if(0===n.length)return{state:"final",onStateChange:()=>()=>{}};const r=()=>0===n.length?"final":n.some((t=>"might_change"===t.state))?"might_change":"nominal",[i,o]=m(r(),(t=>"might_change"!==t&&e())),s=()=>o(r());return n.forEach((e=>{e.onStateChange((e=>{switch(e){case"final":n=t.filter((t=>"final"!==t.state)),s();break;case"might_change":o("might_change");break;case"nominal":s();break;default:throw new Error(`Ref bug: Invalid state ${e}`)}}))})),i}function m(t,e){if("final"===t)return[{state:"final",onStateChange:()=>()=>{}},()=>{}];const{terminate:n,notify:r,addListener:i}=u(t),o={state:t,onStateChange:i},s=d("Disallowed recursion in Branch.",(t=>{if("final"===o.state){if("final"===t)return;throw new Error(`Attempted to change state of final branch to ${t}.`)}try{null==e||e(t),o.state=t,r(t)}finally{"final"===t&&n()}}));return[o,s]}function f(t){const[e,n,r]=function(){const[t,e]=m("nominal"),n=d("Disallowed recursion in Branch.",(n=>{if("final"===t.state)throw new Error("Attempted to mutate a finalized Ref.");const r=t.state;try{e("might_change"),n()}finally{e(r)}}));return[t,n,()=>e("final")]}(),[i,o]=D(e,t);return[i,t=>n((()=>o(t))),r]}function p(t){return{get current(){return t},onChange:()=>()=>{},branch:{state:"final",onStateChange:()=>()=>{}}}}function h(t){return e=>{const n=e.onChange(t);return t(e.current),n}}function g(t,e){if(e){const[n,r]=D(e.branch,t(e.current));return e.onChange((e=>r(t(e)))),n}return e=>g(t,e)}function v(t,e){return e?_(g(t,e)):e=>_(g(t,e))}function _(t){if("final"===t.branch.state)return t.current;const[e,n]=function(t,e){let n=e;const r=[t.state,n.state].includes("might_change")?"might_change":"nominal",[i,o]=m(r),s=t=>e=>{switch(e){case"final":o(t().state);break;case"might_change":o("might_change");break;case"nominal":"might_change"===t().state?o("might_change"):o("nominal");break;default:throw new Error(`Ref bug: Unexpected upstream state ${e}`)}};t.onStateChange(s((()=>n)));const a=s((()=>t));let c=n.onStateChange(a);return[i,t=>{n=t,c(),c=t.onStateChange(a),a(n.state)}]}(t.branch,t.current.branch),[r,i]=D(e,t.current.current);let o=t.current.onChange(i);return t.onChange((t=>{o(),o=t.onChange(i),n(t.branch),i(t.current)})),r}function b(t,e,n){if(!n)return n=>b(t,e,n);let r=t;return g((t=>(r=e(r,t),r)),n)}function y(){if(0===arguments.length||O(arguments.length<=0?void 0:arguments[0]))return w(...arguments);const t=arguments.length<=0?void 0:arguments[0],e=Object.keys(t);return(0,o.zG)(Object.values(t),(t=>w(...t)),g((0,o.ls)(a.Su(((t,n)=>[e[t],n])),Object.fromEntries)))}function w(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(0===e.length)return p([]);if(1===e.length)return g((t=>[t]))(e[0]);let r=!1;e.forEach((t=>t.onChange((()=>{if("might_change"!==t.branch.state)throw new Error("Ref bug: Received a change notification without a `might_change` state.");r=!0}))));const i=e.map((0,c.vg)("branch")),o=()=>{r&&(r=!1,u(e.map((t=>t.current))))},s=l(i,o),[a,u]=D(s,e.map((t=>t.current)));return a}function k(t){const[e,n,a]=f(s.YP);return t.then(i.F2).catch((0,o.ls)(r.w,i.t$)).then((0,o.ls)(s.G,n,a)),e}function E(t){const e=t.hasOwnProperty("equals")?t.equals:t;return function(t){return e=>{if("final"===e.branch.state)return e;let n=s.YP;return g((e=>{if(s.Wi(n))return n=s.G(e),e;const r=t(n.value,e);return n=s.G(r),r}),e)}}(((t,n)=>e(t,n)?t:n))}function S(t){return e=>{const[n,r]=function(t){const[e,n]=m(t.state),r=t.onStateChange(n);return[e,()=>{r(),n("final")}]}(e.branch),[i,a]=D(n,e.current);let c=s.G(e.onChange(a));return t((()=>(0,o.zG)(c,s.UI((t=>{c=s.YP,t(),r()}))))),i}}function P(t){return O(t)?t:p(t)}function I(t){return e=>(h(t)(e),e)}function D(t,e){if("final"===t.state)return[p(e),()=>{}];const n=u(e);t.onStateChange((t=>{"final"===t&&n.terminate()}));let r=e;return[{get current(){return r},onChange:n.addListener,branch:t},d("Disallowed recursion in Ref.",(t=>{r=t,n.notify(r)}))]}function O(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)&&"function"==typeof t.onChange}},2116:(t,e,n)=>{n.d(e,{K4:()=>u,KD:()=>_,UI:()=>m,VS:()=>p,YO:()=>v,ak:()=>g,bw:()=>f,dQ:()=>d,of:()=>l,vP:()=>h});var r=n(7582),i=n(2851),o=n(3735),s=n(2652),a=n(4923),c=n(6567);const u=t=>(0,o.ls)((e=>{var{previousState:n}=e,i=(0,r._T)(e,["previousState"]);return t(i)}),(t=>({value:t,state:i.a9(void 0)}))),d=o.yR,l=(0,o.ls)(o.a9,u),m=t=>e=>(0,o.ls)(e,(0,s.rO)({value:t})),f=t=>e=>(0,o.ls)(e,(0,s.rO)({value:(0,s.bw)(t)}));function p(t){return e=>n=>{var{previousState:o,onServiceStop:s}=n,a=(0,r._T)(n,["previousState","onServiceStop"]);const c=k(),u=e(Object.assign({previousState:Array.isArray(o)?o[0]:void 0,onServiceStop:c.onServiceStop},a)),d=k(),l=t(u.value)(Object.assign({previousState:Array.isArray(o)?o[1]:void 0,onServiceStop:d.onServiceStop},a));return s(c.stop),s(d.stop),{value:l.value,state:i.vP(u.state,l.state)}}}function h(t){return e=>{var{previousState:n}=e,s=(0,r._T)(e,["previousState"]);const c=w(n)?n:{},u=(0,o.zG)(t,a.Su(((t,e)=>e(Object.assign({previousState:c[t]},s)))));return{value:(0,o.zG)(u,a.UI((t=>t.value))),state:(0,o.zG)(u,a.UI((t=>t.state)),(t=>i.vP(t)))}}}function g(t,e){return n=>(0,o.ls)((0,s.rO)({previousState:y}),(s=>{var{onServiceStop:a}=s,c=(0,r._T)(s,["onServiceStop"]);const u=k(),d=n(Object.assign({onServiceStop:u.onServiceStop},c)),l=k(),m=e(d.value)(Object.assign(Object.assign({onServiceStop:l.onServiceStop},c),{previousState:c.previousState[t]}));return a(u.stop),a(l.stop),{value:(0,o.zG)([d.value,m.value],(e=>{let[n,r]=e;if(!w(n))throw new Error;return Object.assign(Object.assign({},n),{[t]:r})})),state:(0,o.zG)(i.vP(d.state,m.state),i.UI((e=>{let[n,r]=e;if(!w(n))throw new Error;return Object.assign(Object.assign({},n),{[t]:r})})))}}))}function v(t){return e=>(0,o.ls)((0,s.rO)({previousState:(0,o.ls)(y,(e=>e[t]))}),e,(0,s.rO)({value:e=>({[t]:e}),state:i.UI((e=>({[t]:e})))}))}const _=t=>{const e=t.slice(0,-1),n=t.slice(-1)[0],r=[...e.map((t=>{let[e,n]=t;return[e,(0,o.a9)(n)]})),(0,o.a9)(n)];return(0,o.ls)(i.UI((0,s.lo)(r)),b)};function b(t){return e=>{var{previousState:n,onServiceStop:a}=e,u=(0,r._T)(e,["previousState","onServiceStop"]);return(0,o.zG)(t,i.BT(a),i.g_({state:i.a9(n),stop:()=>{},value:c.YP},((t,e)=>{let{state:n,stop:r}=t;r();const{stop:i,onServiceStop:o}=k(),{state:s,value:a}=e(Object.assign({previousState:n.current,onServiceStop:o},u));return{state:s,stop:i,value:c.G(a)}})),(0,s.bw)((t=>a((()=>t.current.stop())))),(t=>({value:i.UI((0,o.ls)((t=>t.value),c.fS((()=>{throw new Error}))),t),state:i.VS((t=>t.state),t)})))}}function y(t){return w(t)?t:{}}function w(t){return"object"==typeof t&&null!==t}function k(){const t=[];return{stop:()=>{for(;t.length>0;)t.shift()()},onServiceStop:e=>t.push(e)}}},167:(t,e,n)=>{n.d(e,{n:()=>c});var r=n(6567),i=n(2851),o=n(3735),s=n(2652),a=n(2116);function c(t){return e=>(0,o.zG)(i.oQ(t),i.UI((0,s.rO)({backoffAfterErrorMs:t=>null!=t?t:0,backoffAfterSuccessMs:t=>null!=t?t:0})),(t=>a.dQ((n=>{let{previousState:a}=n;const[c,u]=i.Ue(function(t){if("object"!=typeof t||null===t)return{lastSuccess:0,lastError:0};return t}(a)),d=(0,o.zG)(i.vP(c,t),i.UI((t=>{let[e,n]=t;return Math.max(e.lastError+n.backoffAfterErrorMs,e.lastSuccess+n.backoffAfterSuccessMs)})));return{state:c,value:(0,o.ls)(r.DT((()=>Date.now()>=d.current)),r.UI(e),r.UI((0,s.bw)((t=>t.then((()=>u(Object.assign(Object.assign({},c.current),{lastSuccess:Date.now()}))),(()=>u(Object.assign(Object.assign({},c.current),{lastError:Date.now()}))))))))}}))))}},6930:(t,e,n)=>{n.d(e,{m:()=>u});var r=n(3735),i=n(365),o=n(6567),s=n(2851),a=n(2652),c=n(2116);const u=t=>c.dQ((e=>{let{onServiceStop:n,previousState:c}=e;const u=function(t){if("object"!=typeof t||null===t)return{validityKey:"",inFlight:o.YP,lastSuccess:o.YP};return t}(c),l=(0,r.zG)(t,s.BT(n),s.UI((t=>"currentTimestampSecs"in t&&"freshness"in t&&"validity"in t?t:{currentTimestampSecs:0,validity:{key:t.validityKey,maxAge:Number.MAX_SAFE_INTEGER},freshness:{key:t.freshnessKey,maxAge:Number.MAX_SAFE_INTEGER},refresh:t.refresh})),s.g_(s.a9(u),((t,e)=>{const n=e.validity.key(),c=o.hX((t=>e.currentTimestampSecs-t.timestamp<=e.validity.maxAge)),u=(0,a.HP)(e.freshness.key),l=o.hX((t=>e.currentTimestampSecs-t.timestamp<=e.freshness.maxAge&&t.freshnessKey===u())),m=(0,r.zG)(t,s.UI((0,r.ls)(o.DT((t=>t.validityKey===n)),o.EQ((()=>({validityKey:n,inFlight:o.YP,lastSuccess:o.YP})),(0,a.rO)({inFlight:c,lastSuccess:c})))),s.D8(d));if((0,r.zG)(m.current,(t=>(0,r.zG)(t.inFlight,o.wp((()=>t.lastSuccess)),l,o.pC))))return m;const f=()=>({timestamp:e.currentTimestampSecs,freshnessKey:u(),output:o.YP});return(0,r.zG)(e.refresh(),o.EQ((()=>m),(0,r.ls)(s.p4,s.VS(o.EQ((()=>(0,r.zG)(m,s.UI((t=>Object.assign(Object.assign({},t),{inFlight:o.G(f())}))))),i.EQ((t=>m),(t=>s.a9({validityKey:n,inFlight:o.YP,lastSuccess:o.G(Object.assign(Object.assign({},f()),{output:o.G(t)}))}))))))))})),s.xH,s.D8(d));return{value:s.UI((0,r.ls)((0,a.vg)("lastSuccess"),o.tS((0,a.vg)("output"))),l),state:s.UI((t=>Object.assign(Object.assign({},t),{inFlight:o.YP})),l)}}));const d=(t,e)=>t.validityKey===e.validityKey&&t.inFlight===e.inFlight&&t.lastSuccess===e.lastSuccess},6967:(t,e,n)=>{n(2497),n(5165)},8612:(t,e,n)=>{n.d(e,{lg:()=>h,Bt:()=>v});var r=n(7582),i=n(1500),o=n(3735),s=n(6567),a=n(2751),c=n(2652);class u{constructor(t,e,n,r){this.userId=t,this.network=e,this.api=n,this.logger=r,this.tag="appnexus",this.ttlInSeconds=86400,this.usedForThirdPartyData=!0,this.url="https://ib.adnxs.com/getuidj",this.invalidAliases=["","0","-1"]}getId(){return this.logger.debug("identities[appnexus]: start HTTP request"),(0,c.G6)(navigator.userAgent)?Promise.resolve({type:"skipped"}):this.api.appnexus(this.url).then((t=>(this.logger.debug("identities[appnexus]: end HTTP request"),{type:"attempted",result:(0,o.zG)((0,s.DT)((t=>this.isValidAlias(t.uid)))(t),(0,s.UI)((t=>t.uid)))})),(t=>({type:"attempted",result:s.YP})))}reset(){return Promise.resolve()}isValidAlias(t){return!!t&&-1===this.invalidAliases.indexOf(t)}}class d{constructor(t,e,n,r,i){this.config=t,this.network=e,this.api=n,this.userId=r,this.logger=i,this.tag="pxid",this.ttlInSeconds=86400,this.usedForThirdPartyData=!1,this.url=`https://67cbf6c5-d926-407b-a684-a0606570ff08.${this.config.pxidHost}/${this.config.apiVersion}/pxid`,this.resetUrl=this.url+"/reset"}getId(){return this.logger.debug("identities[pxid]: start HTTP request"),(0,c.G6)(navigator.userAgent)?Promise.resolve({type:"skipped"}):this.api.pxid(this.url).then((t=>(this.logger.debug("identities[pxid]: end HTTP request"),{type:"attempted",result:(0,s.ij)(t.uid)})),(t=>({type:"attempted",result:s.YP})))}reset(){return(0,c.G6)(navigator.userAgent)?Promise.resolve():this.api.pxidReset(this.resetUrl)}}var l=n(2851),m=n(4923),f=n(2197);const p=f.ff((t=>void 0===t));class h{constructor(t,e,n,r,i){this.metrics=t,this.trace=e,this.permutiveData=n,this.identityProviderEnv=r,this.logger=i,this.providers={};const s=this.getCachedIdentitiesAndMigrateIfRequired(),[u,d]=l.Ue(s);this.identityMapRef=u,this.setIdentityMap=d,u.onChange((0,o.ls)(m.z7((t=>!g.has(t))),(0,c.bw)((t=>{this.logger.debug("[identities] Persisting",t),this.permutiveData.setData("identities",t)})))),this.ref=(0,o.zG)(u,l.UI((0,o.ls)(m.UI((t=>t.value)),m.hX(p))),l.D8(m.Eh(a.Eq))),this.thirdParty=this.prepareThirdPartyIdentities()}get identities(){return this.identityMapRef.current}prepareThirdPartyIdentities(){this.logger.debug("[Identities]","loading 3rd party identities");const t=this.metrics.startTimer("sdk_get_third_party_identities_task_duration_seconds",{}),e=this.trace.startSpan("load_tpd_ids"),n=[{load:t=>{return e=t.config,n=t.network,r=t.api,i=t.userId,o=t.logger,(0,s.G)(new d(e,n,r,i,o));var e,n,r,i,o}},{load:t=>{return e=t.userId,n=t.network,r=t.api,i=t.logger,(0,s.G)(new u(e,n,r,i));var e,n,r,i}},{load:t=>(t.cookies,t.messages,s.YP)},{load:t=>(t.cookies,s.YP)},{load:t=>(t.metrics,t.permutiveData,t.permutive,t.messages,s.YP)}],r=(0,i.oA)(n.map((t=>t.load(this.identityProviderEnv)))).map((t=>this.shouldAskForNewIdentity(t)?this.retrieveIdentity(t):Promise.resolve((0,o.bc)(t,this.getCachedTPDIdentity(t.tag)))));return Promise.all(r).then((t=>t.map((t=>{let[e,n]=t;return this.providers[e.tag]=e,this.mapTPDIdentityIfPresent(e.tag,n,e.ttlInSeconds)})))).then((t=>this.setIdentities(t))).then((0,c.bw)((()=>{this.metrics.stopTimer("sdk_get_third_party_identities_task_duration_seconds",t),e.finish()})))}getPrioritizedIdentities(t){const e={default:0,appnexus:1,pxid:1},n=Object.entries(t).map((t=>{let[e,{id:n,expiry:r,priority:i}]=t;return Object.assign(Object.assign(Object.assign({tag:e},n?{id:n}:{}),r?{expiry:r}:{}),void 0!==i?{priority:i}:{})})),r=n.filter((t=>((t,e)=>!!t.id&&!(0,i.t9)(a.Eq)(t.tag,e))(t,Object.values(this.providers).map((t=>t.tag))))),o=n.filter((t=>((t,e)=>!!t.id&&!!(0,i.t9)(a.Eq)(t.tag,e))(t,Object.values(this.providers).map((t=>t.tag))))),c=(0,i.DZ)((t=>(0,s.ij)(t.priority)))(r),u=c.length>0?Math.max(...c):0,d=r.map((t=>void 0!==t.priority?Object.assign(Object.assign({},t),{priority:t.priority}):Object.assign(Object.assign({},t),{priority:u+1}))),l=o.map((t=>void 0===e[t.tag]?{tag:t.tag,id:t.id,priority:u+_}:{tag:t.tag,id:t.id,priority:u+b}));return d.concat(l)}getIdentitiesMap(){return this.getFilteredIdentities(((t,e)=>!!e.value))}parseCustomerDefinedIdentities(t){const e=`Identify must be passed a non-empty string or list of { tag, id, priority? } tuples, value passed was '${JSON.stringify(t)}'`,n=t=>{throw new Error(t)},r=t=>(t.forEach((t=>{(t=>"string"==typeof t.id&&"string"==typeof t.tag)(t)||n(e),(t=>"email_sha256"!==t.tag||h.emailSHA256Regex.test(t.id))(t)||n("Identify called with unsupported format of email_sha256 ID. The support format is hex-encoded 64 character long lowercase string.")})),t);return"string"==typeof t?(i=t).length>0?[{id:i,tag:"default"}]:n(e):Array.isArray(t)?r(t):n(e);var i}extractIdentifyFromQueue(t){let{global:e}=t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const r=()=>e.q.findIndex((t=>"identify"===t.functionName)),i=(t,n)=>{if(t<0)return n;const o=e.q.splice(t,1)[0],s=this.parseCustomerDefinedIdentities(o.arguments[0]);return i(r(),n.concat(s))};return i(r(),n)}setIdentities(t){const e=t.reduce(((t,e)=>{let{tag:n,id:r,expiry:i,priority:o}=e;return void 0===this.identities[n]&&this.logger.debug(`identities[${n}]: added`),t[n]=Object.assign(Object.assign(Object.assign({},r?{value:r}:{}),i?{expiry:i}:{}),void 0!==o?{priority:o}:{}),t}),{}),n=this.ref.current;this.setIdentityMap(Object.assign(Object.assign({},this.identities),e));const r=this.ref.current;return{identifyRequestRequired:()=>!m.xb(r)&&!m.Eh(a.Eq).equals(n,r)}}reset(){return(0,r.mG)(this,void 0,void 0,(function*(){this.setIdentityMap({}),yield Promise.all(Object.values(this.providers).map((t=>t.reset())))}))}getFilteredIdentities(t){return(0,c.m8)(...Object.entries(this.identities).filter((e=>{let[n,r]=e;return t(n,r)})).map((t=>{let[e,{value:n,expiry:r,priority:i}]=t;return(0,o.bc)(e,Object.assign(Object.assign({id:n},r?{expiry:r}:{}),void 0!==i?{priority:i}:{}))})))}shouldAskForNewIdentity(t){var e;const n=(0,s.ij)(null===(e=this.identities)||void 0===e?void 0:e[t.tag]);return(0,s.g_)((()=>!0),this.isIdentityExpired)(n)}getCachedTPDIdentity(t){return this.identities[t]?(0,s.ij)(this.identities[t].value):s.YP}mapTPDIdentityIfPresent(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:86400;const r=()=>Date.now()+Math.floor(1e3*n);return(0,s.g_)((()=>({tag:t,expiry:r()})),(e=>({tag:t,id:e,expiry:r()})))(e)}retrieveIdentity(t){return t.getId().then((e=>"skipped"===e.type?(0,o.bc)(t,s.YP):(0,o.zG)(e.result,(e=>this.metrics.track({name:(0,s.pC)(e)?"sdk_third_party_identity_present_count":"sdk_third_party_identity_missing_count",value:1,labels:{identity_tag:t.tag}})),(n=>(0,o.bc)(t,e.result)))))}isIdentityExpired(t){return"number"==typeof t.expiry&&Date.now()>=t.expiry}getCachedIdentitiesAndMigrateIfRequired(){return(t=>(0,c.m8)(...Object.entries(t).filter((t=>{let[e,n]=t;return!this.isIdentityExpired(n)&&!g.has(e)}))))(this.permutiveData.getData("identities")||{})}}h.emailSHA256Regex=/^[a-f0-9]{64}$/;const g=new Set(["public","email","email_md5","email_sha256","ip_address"]),v=(t,e,n,r,o)=>{const s=(t,e)=>{const n=["(null)"];return n.indexOf(t)>-1||!!w[t]||(0,i.jV)(a.Eq)(e,n).length>0},c=t=>"721d6d85-35f0-4e35-bb38-13eb0d465158"===t,u={"be668577-07f5-444d-98e0-222b990951b1":s,"e43c8a90-d17b-4790-bfda-81b069b3b8c2":(t,e,n)=>["thestudentroom.co.uk"].some((t=>n.indexOf(t)>-1))&&(0,i.jV)(a.Eq)(e,["tsr-"]).length>0,"5d79bce7-5d2b-427e-a6c4-b89b6c7bf048":s,"366ab8da-5efa-4355-ab00-84db3b68ded2":t=>"96539955-4d7e-40df-882b-7e2fbacedb1c"===t||"345600e7-fb5f-48b1-9aa6-cde5396419b0"===t,"f3a06674-ebb9-4b9d-ba8f-0052018c0687":c,"38dadd0d-257a-4641-b332-b8b0fd20a6cb":c,"10453011-272d-49cd-9043-1964fdb36fd8":t=>"936ba6ac-9a8b-454d-ba98-facebd7553fe"===t},d={"fe68d1f7-c9f4-45b3-8905-7cda73d3fd74":t=>!!y[t]},l=u[t]||d[e];return!!l&&l(o,n,r)},_=2,b=3,y={},w={}},7658:(t,e,n)=>{n.d(e,{z:()=>r});class r{ingestIfEligible(t){return Promise.resolve()}}},922:(t,e,n)=>{n.d(e,{CL:()=>d,D0:()=>i,ED:()=>o,EW:()=>l,MU:()=>p,PH:()=>u,Uy:()=>a,eV:()=>s,jH:()=>m,mL:()=>f,t2:()=>c});var r=n(9853);const i=(0,r.MU)("engagement_edge_only",!0),o=(0,r.MU)("segment_transition_edge_only",!0),s=(0,r.MU)("track_form_submission",!0),a=(0,r.MU)("track_pageview_complete",!0),c=(0,r.MU)("track_pageview_engagement",!0),u=((0,r.$S)("sync_segments_cookie",!1),(0,r.$S)("track_slot_clicked",!0)),d=(0,r.$S)("track_slot_rendered",!0),l=(0,r.$S)("track_slot_viewable",!1),m=(0,r.$S)("track_targeting_keys",!1),f="_psegs",p=6e5},4673:(t,e,n)=>{n.d(e,{U:()=>r});const r={$ip_address:"$ip_address",$ip_address_hash:"$ip_address_hash",$ip_geo_info_city:"$ip_geo_info_city",$ip_geo_info_continent:"$ip_geo_info_continent",$ip_geo_info_country:"$ip_geo_info_country",$ip_geo_info_postal_code:"$ip_geo_info_postal_code",$ip_geo_info_province:"$ip_geo_info_province",$ip_isp_info_autonomous_system_organization:"$ip_isp_info_autonomous_system_organization",$ip_isp_info_isp:"$ip_isp_info_isp",$ip_isp_info_organization:"$ip_isp_info_organization"}},8975:(t,e,n)=>{n.d(e,{v:()=>o});class r{constructor(t,e,n,r,i,o,s){this.logger=t,this.permutive=e,this.id=n,this.segmentCode=r,this.triggerType=i,this.config=o,this.workspaceLevelConfig=s,this.prefix="[Activation]"}getSegmentCode(){return this.segmentCode}getTriggerType(){return this.triggerType}getConfig(){return this.config}getWorkspaceLevelConfig(){return this.workspaceLevelConfig}trackImpression(t){return this.trackActivation("impression",t)}trackConversion(t){return this.trackActivation("conversion",t)}trackActivation(t,e){const n={reaction_id:this.id,type:t};this.logger.warn(this.prefix,"Tracking is disabled",n)}}var i=n(9853);class o{constructor(t,e,n){this.logger=t,this.permutive=e,this.clientContext=n,this.optimisedActivationsConfig={dfp:{dfp:[175669,173767,172212,172841,139702,139331,138041,138040,138032,138031,138030,138029,138028,135588,130832,130057,130054,128826,128331,127958,121925,119318,114755,114754,114753,110776,110608,109495,107543,14823,12668,14830,14831,18570,14577,12475,13769,14848,14853,14858,13520,13183,14282,13825,13826,13827,13828,13829,13830,13831,13640,13855,13856,14919,13857,14921,14922,14923,16243,14748,62273,14851,13444,75203,13446,32334,12381,8015,8301,8500,8501,8502,9697,9705,13108,14371,13852,8679,14808,10179,14812,14816,103641,71852,88397,10870,10869,29596,21542,10860,29598,21794,23694,29599,28391,29568,29567,29569,29573,29574,32341,28538,28540,29575,29576,29581,29585,29592,29593,29590,29195,29594,29595,10856,10857,62592,13445,10116,10339,10428,10463,10622,167943,167942,167908,167632,166778,166733,164476,163462,163175,162919,162903,162072,162071,161949,158784,158433,141823,157140,155850,155324,154701,153449,153448,151041,150978,150976,150934,148896,148689,148197,147871,147455,147055,146861,146858,146711,144062,144047,143570,143231,142764,142561,142486,141912,141910,141505,141239,10790,11122,7827,7834,7835,7836,7843,7844,7878,7880,7881,7925,7981,9702,9704,9812,9831,9837,7809,27457,10855,32347,29219,32336,32319,32338,32321,32339,32340,29571,29572,32324,32348,29591,32333,32627,10868,97745,73622,74544,103289,103566],dfp_legacy:{}},eyeota_pixel:[],dbm:{omitted:0},appnexus:{},appnexus_adserver:[],nativo:[],rubicon_ssp:[75203,71852,7878,7835,29567,7827,9812,7834,7836,23694,21794,13640,143570,14282,74544,103566],smart:[],freewheel:[]}}getSpecializedActivations(t){return this.optimisedActivationsConfig[t]}getActivations(t){return(0,i.Hn)(t)("activationConfigs",[]).filter((t=>this.areContextCriteriaSatisfied(t))).map((t=>new r(this.logger,this.permutive,t.id,t.sc,t.tt,t.c,t.wc)))}areContextCriteriaSatisfied(t){const e=t.cc,n=t=>{const e=this.clientContext.getContext()[t.key];switch(t.comparison){case"EQUALS":return e===t.value;case"NOT_EQUALS":return e!==t.value;case"CONTAINS":return"string"==typeof e&&e.indexOf(t.value)>=0;case"NOT_CONTAINS":return"string"==typeof e&&e.indexOf(t.value)<0}};return!e||("AND"===(r=e).operator?r.criteria.every(n):r.criteria.some(n));var r}}},9853:(t,e,n)=>{n.d(e,{$S:()=>s,Hn:()=>i,MU:()=>o});const r={standard_cohorts:{auto_init:!0,activationConfigs:[]},overlays:{auto_init:!0,activationConfigs:[]},tracking_pixel:{auto_init:!0,activationConfigs:[{id:"1260c0d2-30be-419b-8d41-6def4f1ebdc6",tt:"OnEntry",sc:14831,c:{pixel_url:"http://pixel.rubiconproject.com/tag.php?v=597474"},wc:{}},{id:"020bd700-cbae-4c24-a147-b61030e99128",tt:"OnEntry",sc:7844,c:{pixel_url:"http://pixel.rubiconproject.com/tag.php?v=599814"},wc:{}},{id:"0d476a00-46d8-400f-9aac-962263244d83",tt:"OnEntry",sc:7880,c:{pixel_url:"http://pixel.rubiconproject.com/tag.php?v=599816"},wc:{}},{id:"86d3c640-8ea1-46c8-97ee-4bf686192f59",tt:"OnEntry",sc:9702,c:{pixel_url:"http://pixel.rubiconproject.com/tag.php?v=599818"},wc:{}}]},rubicon_ssp:{auto_init:!0,publisher_id:"11092",activationConfigs:[]},scriptrunner:{auto_init:!0,activationConfigs:[]},appnexus:{auto_init:!0,member_id:12905,activationConfigs:[]},pubmatic:{auto_init:!0,dpid:"156924",activationConfigs:[]},clean_room:{auto_init:!0,publisher_permissions:{"457bba0a-09f0-4299-83a0-c2266b870bdd":[],"4fc70213-5dd0-4a51-9396-e59ee458a537":[],"67a79af6-9bff-44fe-9119-1013e9e8575f":[],"7d8cf5d4-8ec8-4c58-9511-901dea28a71e":[],"ad4f2c94-b966-4a42-b842-9dcef69afc7d":[],"bf9865e1-b5de-466a-bbbf-3a6327803f8d":[],"d564f72e-f80f-4eb8-9253-86550a50fd8b":[],"e33d8baa-e928-42f8-ab37-8abdd5328767":[],"f9897e22-b7e4-45bb-bd9a-e1bbcffaca1b":[]},activationConfigs:[]},dfp:{auto_init:!0,track_slot_rendered:!1,track_slot_viewable:!0,track_slot_clicked:!0,track_targeting_keys:!1,activationConfigs:[]},ssp:{auto_init:!0,ssps:["appnexus","pubmatic"],cohort_mapping:{1e7:"bgyz",10000001:"bhgp",10000002:"bhhc",10000003:"bhhg",10000004:"bhhk",10000005:"bhhp",10000006:"bhhv",10000007:"bhhy",10000008:"bhie",10000010:"bhis",10000011:"bhiz",10000012:"bhji",10000013:"bhjq",10000014:"bhka",10000015:"bhkl",10000016:"bhkr",10000017:"bhky",10000018:"bhlg",10000019:"bhli",10000020:"bhlo",10000021:"bhlp",10000022:"bhnd",10000023:"bhnl",10000024:"bhnp",10000025:"bhnw",10000026:"bhoj",10000035:"bgzb",10000036:"bhgq",10000037:"bhgs",10000038:"bhgw",10000039:"bhgy",10000040:"bhgz",10000041:"bhhe",10000042:"bhhh",10000043:"bhhw",10000044:"bhhx",10000045:"bhhz",10000046:"bhia",10000047:"bhif",10000048:"bhig",10000049:"bhii",10000050:"bhij",10000051:"bhik",10000052:"bhim",10000053:"bhip",10000054:"bhit",10000055:"bhiu",10000056:"bhiv",10000057:"bhiy",10000058:"bhjm",10000059:"bhjr",10000060:"bhjs",10000061:"bhjw",10000062:"bhjx",10000063:"bhkm",10000064:"bhir",10000065:"bhko",10000066:"bhkp",10000067:"bhkq",10000068:"bhkz",10000069:"bhla",10000070:"bhlb",10000071:"bhle",10000072:"bhlf",10000073:"bhlq",10000074:"bhlt",10000075:"bhlu",10000076:"bhlw",10000077:"bhlx",10000078:"bhly",10000079:"bhmb",10000080:"bhmi",10000081:"bhmj",10000082:"bhml",10000083:"bhmp",10000084:"bhmr",10000085:"bhmw",10000086:"bhmz",10000087:"bhne",10000088:"bhnf",10000089:"bhni",10000090:"bhnn",10000324:"bhhj",10000325:"bhhi",10000327:"bhku",10000328:"bhkt",10000329:"bhkw",10000330:"bhkv",10000687:"bgzc",10000688:"bgza",10000689:"bhha",10000690:"bhgt",10000691:"bhgx",10000692:"bhgv",10000693:"bhgr",10000694:"bhgu",10000695:"bhhb",10000696:"bhhd",10000697:"bhhf",10000698:"bhhl",10000699:"bhho",10000700:"bhhm",10000701:"bhhn",10000702:"bhhq",10000703:"bhht",10000704:"bhhu",10000705:"bhhs",10000706:"bhhr",10000707:"bhib",10000708:"bhid",10000709:"bhic",10000710:"bhio",10000711:"bhin",10000712:"bhil",10000713:"bhiq",10000714:"bhih",10000715:"bhiw",10000716:"bhix",10000717:"bhja",10000718:"bhjc",10000719:"bhjd",10000720:"bhje",10000721:"bhjf",10000722:"bhjb",10000723:"bhjg",10000724:"bhjh",10000725:"bhjo",10000726:"bhjk",10000727:"bhjn",10000728:"bhjj",10000729:"bhjl",10000730:"bhjy",10000731:"bhju",10000732:"bhjv",10000733:"bhjz",10000734:"bhjt",10000735:"bhkj",10000736:"bhkk",10000737:"bhki",10000738:"bhkd",10000739:"bhkc",10000740:"bhkf",10000741:"bhkh",10000742:"bhkb",10000743:"bhkg",10000744:"bhke",10000745:"bhjp",10000746:"bhkn",10000747:"bhkx",10000748:"bhks",10000749:"bhld",10000750:"bhlc",10000751:"bhlh",10000752:"bhlk",10000753:"bhlj",10000754:"bhll",10000755:"bhlm",10000756:"bhlv",10000757:"bhna",10000758:"bhmv",10000759:"bhmt",10000760:"bhmy",10000761:"bhmc",10000762:"bhmo",10000763:"bhls",10000764:"bhmq",10000765:"bhme",10000766:"bhmh",10000767:"bhlz",10000768:"bhlr",10000769:"bhnb",10000770:"bhmk",10000771:"bhmu",10000772:"bhmx",10000773:"bhmg",10000774:"bhmd",10000775:"bhmf",10000776:"bhnc",10000777:"bhmn",10000778:"bhmm",10000779:"bhma",10000780:"bhms",10000781:"bhng",10000782:"bhnj",10000783:"bhnh",10000784:"bhnk",10000785:"bhno",10000786:"bhnm",10000787:"bhnu",10000788:"bhnv",10000789:"bhns",10000790:"bhnt",10000791:"bhnq",10000792:"bhnr",10000793:"bhob",10000794:"bhny",10000795:"bhod",10000796:"bhoh",10000797:"bhog",10000798:"bhnz",10000799:"bhoa",10000800:"bhoe",10000801:"bhnx",10000802:"bhoc",10000803:"bhof"},activationConfigs:[]},facebook_pixel_v2:{auto_init:!0,activationConfigs:[{id:"a93bdb1e-0ec7-4864-92c1-0d61b0b4b2f8",tt:"EveryTime",sc:175669,c:{},wc:{}},{id:"77c3183d-49be-496f-b065-4772c7ed6f92",tt:"EveryTime",sc:172841,c:{},wc:{}},{id:"ef7994f6-875e-408b-b13a-d36489e26520",tt:"EveryTime",sc:135588,c:{},wc:{}},{id:"ea2cac2c-d59a-4f08-b0e0-52df612765d4",tt:"EveryTime",sc:128331,c:{},wc:{}},{id:"bda6e794-b7d6-4846-b494-1b5a0e780519",tt:"EveryTime",sc:127958,c:{},wc:{}},{id:"9fbdf0bd-066c-491f-80c0-0cdedc675642",tt:"EveryTime",sc:121925,c:{},wc:{}},{id:"9eb71568-adbc-46a5-a655-5ea4060f6928",tt:"EveryTime",sc:119318,c:{},wc:{}},{id:"5213e35d-ef7f-480b-998c-94eecbde1655",tt:"EveryTime",sc:114755,c:{},wc:{}},{id:"bf5cab4a-0f78-4948-aa8c-168e1f5fc02a",tt:"EveryTime",sc:114754,c:{},wc:{}},{id:"6255814d-d5c0-4231-b1bb-2d69aa129136",tt:"EveryTime",sc:114753,c:{},wc:{}},{id:"e1ceddd5-1706-44cf-aaf3-00f186ba111d",tt:"EveryTime",sc:110776,c:{},wc:{}},{id:"2854faa9-485d-4733-960f-4b6242d8f820",tt:"EveryTime",sc:110608,c:{},wc:{}},{id:"a706e33d-d31b-4bc8-ba36-c79a06515280",tt:"EveryTime",sc:109495,c:{},wc:{}},{id:"0ed6506e-86b6-4dc9-a8b5-d789ad83f9d5",tt:"EveryTime",sc:75203,c:{},wc:{}},{id:"48b301f0-7b30-4592-a2d0-0f30e888e8ff",tt:"EveryTime",sc:27457,c:{},wc:{}},{id:"4f5ba495-9b2c-4307-abff-e8f2c20767b9",tt:"EveryTime",sc:7827,c:{},wc:{}},{id:"f102ed9c-e88f-491b-a9ba-b38e7cdbd49d",tt:"EveryTime",sc:8500,c:{},wc:{}},{id:"d17d9315-dee8-47ea-8947-4fb13c0682a6",tt:"EveryTime",sc:7878,c:{},wc:{}},{id:"4e413c56-0a6e-445f-8e6b-76271aeb3fe8",tt:"EveryTime",sc:7834,c:{},wc:{}},{id:"af55c080-b20a-4866-8591-049b81db2d0e",tt:"EveryTime",sc:7925,c:{},wc:{}},{id:"7d3ca916-0e58-424f-a320-a0614bb07218",tt:"EveryTime",sc:8301,c:{},wc:{}},{id:"42eb034c-c3c5-4f54-a98f-5ed3dfaa84ce",tt:"EveryTime",sc:7835,c:{},wc:{}},{id:"cf46cce6-b567-4217-bb73-d5b6573d37b4",tt:"EveryTime",sc:7836,c:{},wc:{}},{id:"a73b0593-5cdc-4a58-a92a-1fe2dbbd56fb",tt:"EveryTime",sc:7844,c:{},wc:{}},{id:"c0825b0e-08e4-4484-ac0c-26bdda53c4bc",tt:"EveryTime",sc:7880,c:{},wc:{}},{id:"4ac11d0e-025f-4bf2-b3c9-0cab7bdc1e84",tt:"EveryTime",sc:10790,c:{},wc:{}},{id:"8c34b642-ea08-4459-a351-087becb9e196",tt:"EveryTime",sc:29585,c:{},wc:{}},{id:"34cfbde8-a2ba-4ca2-9cd1-798cc42bd30a",tt:"EveryTime",sc:29581,c:{},wc:{}},{id:"31135dfe-60a2-4d4a-938b-21f3e642533e",tt:"EveryTime",sc:29576,c:{},wc:{}},{id:"1b98f1f3-cd61-495d-b68e-aca099b5cfc3",tt:"EveryTime",sc:29575,c:{},wc:{}},{id:"b2d1aea9-159f-4a0c-9cfc-c9b4adc4c198",tt:"EveryTime",sc:29574,c:{},wc:{}},{id:"28980b31-a036-4173-be90-20dd2ee6e368",tt:"EveryTime",sc:29573,c:{},wc:{}},{id:"b7faa899-dd0a-46d9-97a7-40dc252fca56",tt:"EveryTime",sc:9702,c:{},wc:{}},{id:"5fdf2a99-35cc-449e-8309-1c044a6dd631",tt:"EveryTime",sc:13108,c:{},wc:{}},{id:"eaf16920-7523-47ca-8afc-77930f37900b",tt:"EveryTime",sc:10339,c:{},wc:{}},{id:"3d479081-1fd1-4021-829e-fd68fd013bc2",tt:"EveryTime",sc:10428,c:{},wc:{}},{id:"3ccc9990-7d02-4b43-9b06-3bdb7d8af28e",tt:"EveryTime",sc:10463,c:{},wc:{}},{id:"18eb408d-a7ba-4e93-8784-f777f397df60",tt:"EveryTime",sc:12381,c:{},wc:{}},{id:"20d4507b-d696-4927-add0-a757bed55f72",tt:"EveryTime",sc:13446,c:{},wc:{}},{id:"b5cf3963-9963-4f5a-aff1-0afb4a7b7f5b",tt:"EveryTime",sc:13640,c:{},wc:{}},{id:"526e5fae-1a26-4adb-a8ff-92c50b823bed",tt:"EveryTime",sc:13183,c:{},wc:{}},{id:"24818515-af74-4ce3-b381-9e1c4a8017bb",tt:"EveryTime",sc:13444,c:{},wc:{}},{id:"55a265af-36b5-4e1f-98c7-ee357f1cdeeb",tt:"EveryTime",sc:13520,c:{},wc:{}},{id:"9d24c43b-f534-4f46-a5d0-301a16557a5b",tt:"EveryTime",sc:13852,c:{},wc:{}},{id:"6b854d47-40bb-4b65-b524-48e53f055ad6",tt:"EveryTime",sc:13855,c:{},wc:{}},{id:"c01cf5b1-a4ec-46f6-89a5-bf699289cbdc",tt:"EveryTime",sc:13856,c:{},wc:{}},{id:"d8e48f59-3939-43f8-9490-d4879e29eac9",tt:"EveryTime",sc:29568,c:{},wc:{}},{id:"122537a4-2d14-4361-a64b-1ffc4192b0a1",tt:"EveryTime",sc:14816,c:{},wc:{}},{id:"8d10a12d-e2b5-42f5-81d8-f93c206a7506",tt:"EveryTime",sc:14831,c:{},wc:{}},{id:"a9c9c1fa-3d39-40b6-8d8a-1202734ef3de",tt:"EveryTime",sc:14830,c:{},wc:{}},{id:"06f8dcfa-8772-437f-9edb-93174280fa32",tt:"EveryTime",sc:14921,c:{},wc:{}},{id:"095c3857-c7c0-48d8-a8b2-6a83a2197e84",tt:"EveryTime",sc:13831,c:{},wc:{}},{id:"5339f27b-8d90-4134-a06a-181002f6bbf9",tt:"EveryTime",sc:28540,c:{},wc:{}},{id:"3dcaa5f4-410c-4d57-82ed-04c9ad93d8ca",tt:"EveryTime",sc:14923,c:{},wc:{}},{id:"12065647-0156-4e21-a4d2-3962e0d686d7",tt:"EveryTime",sc:29567,c:{},wc:{}},{id:"07f315fd-153e-4fb0-94f9-b663e9c3bbfa",tt:"EveryTime",sc:16243,c:{},wc:{}},{id:"60400610-3797-46e9-988f-cb782413d922",tt:"EveryTime",sc:21542,c:{},wc:{}},{id:"c3380577-7f37-494f-9284-0dd37f947719",tt:"EveryTime",sc:32333,c:{},wc:{}},{id:"dc648101-ab67-47d5-8c30-55aece35c2d7",tt:"EveryTime",sc:62592,c:{},wc:{}},{id:"108db46f-4c3f-4bd4-b76b-1822d4736dc1",tt:"EveryTime",sc:167908,c:{},wc:{}},{id:"c155c02b-1308-43cd-a772-61a61de3ecaa",tt:"EveryTime",sc:164476,c:{},wc:{}},{id:"7699eb81-0f57-44b5-9daf-09337e70b0b7",tt:"EveryTime",sc:163462,c:{},wc:{}},{id:"8cdb724c-3c0c-4377-9ffc-ec467ee12c79",tt:"EveryTime",sc:163175,c:{},wc:{}},{id:"2f4cba58-9932-4713-9b20-a6b2c3c7814a",tt:"EveryTime",sc:162169,c:{},wc:{}},{id:"bd0bbeab-bf1e-4447-aaf7-0bea4e1ca85d",tt:"EveryTime",sc:155324,c:{},wc:{}},{id:"0542aa56-2467-4cd6-8778-f2d68ae9ac9d",tt:"EveryTime",sc:150934,c:{},wc:{}},{id:"2eb27a9b-9d87-4dea-9e55-eef310662450",tt:"EveryTime",sc:147871,c:{},wc:{}},{id:"e43631e5-37f2-4d15-8f39-259d3f267467",tt:"EveryTime",sc:147055,c:{},wc:{}},{id:"5e2ca958-daec-45f7-b8c4-3f83e38f576c",tt:"EveryTime",sc:143570,c:{},wc:{}},{id:"aab9dcc2-75b6-4cec-a458-458017d1edb1",tt:"EveryTime",sc:8679,c:{},wc:{}},{id:"f61ee07b-b5d8-4aec-8e2a-2b8e3a7851b8",tt:"EveryTime",sc:9837,c:{},wc:{}},{id:"c1987ed5-c8e3-427c-ba22-d11e378d1d5f",tt:"EveryTime",sc:29582,c:{},wc:{}},{id:"a2f49540-2400-4c0e-9d96-00d5e5cad698",tt:"EveryTime",sc:7981,c:{},wc:{}},{id:"5f729325-6172-4b26-bebf-3c24c8ff9d4f",tt:"EveryTime",sc:28391,c:{},wc:{}},{id:"0632ef5a-99ff-44d0-b9f4-2c801e8e586a",tt:"EveryTime",sc:7843,c:{},wc:{}},{id:"df5e61bf-b9cb-4877-8f04-57331c0535b6",tt:"EveryTime",sc:29572,c:{},wc:{}},{id:"9fd82d2f-52b4-442d-9e76-924745433b66",tt:"EveryTime",sc:10116,c:{},wc:{}},{id:"b67786e8-85e3-4f8c-84b7-1f9569aed52e",tt:"EveryTime",sc:8015,c:{},wc:{}},{id:"6229e725-2cad-48e6-b231-2fa79f31168c",tt:"EveryTime",sc:8502,c:{},wc:{}},{id:"4d773dd9-c2e7-441c-bfb5-0baec6abbcef",tt:"EveryTime",sc:12668,c:{},wc:{}},{id:"895e7c22-757d-45b5-a894-1f3e8f599b5e",tt:"EveryTime",sc:29571,c:{},wc:{}},{id:"0ec592da-b975-4e76-bcd7-98ffa21a4a18",tt:"EveryTime",sc:7881,c:{},wc:{}},{id:"29d0b5f5-cf0d-4d47-a604-5c934709d8ce",tt:"EveryTime",sc:29569,c:{},wc:{}},{id:"3e672429-c3f1-4197-be59-18541ba47ad2",tt:"EveryTime",sc:28538,c:{},wc:{}},{id:"59206936-e04e-49cf-b973-aa7e21721966",tt:"EveryTime",sc:9705,c:{},wc:{}},{id:"86dd6f6d-ac07-4592-aa84-94455b5cf41a",tt:"EveryTime",sc:29591,c:{},wc:{}},{id:"96f7a717-81a5-4daa-8c0d-41ecfb190f23",tt:"EveryTime",sc:29590,c:{},wc:{}},{id:"19bcf78a-d38b-4c81-a6ea-b2e4af0cff71",tt:"EveryTime",sc:29596,c:{},wc:{}},{id:"c91a5813-1dc1-4b01-8683-75964721bbdf",tt:"EveryTime",sc:29595,c:{},wc:{}},{id:"cae99a5c-20eb-497a-9e46-e14be25f741f",tt:"EveryTime",sc:32348,c:{},wc:{}},{id:"5ca3b272-07c3-4845-baa1-d0436d1a8fca",tt:"EveryTime",sc:9704,c:{},wc:{}},{id:"3c914c42-a204-4293-b704-40ffec52a02b",tt:"EveryTime",sc:9831,c:{},wc:{}},{id:"590b5761-74f9-4b4f-9f4c-b549f467ef4a",tt:"EveryTime",sc:29219,c:{},wc:{}},{id:"80aaea92-5225-45ce-b3c1-c4bc042f381e",tt:"EveryTime",sc:29592,c:{},wc:{}},{id:"bd7c9e1a-c4ee-4708-b7a5-9284a72b588c",tt:"EveryTime",sc:32334,c:{},wc:{}},{id:"586e6ac3-1219-496c-bdb3-562a5e981e75",tt:"EveryTime",sc:8501,c:{},wc:{}},{id:"4e1257f0-0089-40a8-bf07-cff4b1cdfb5f",tt:"EveryTime",sc:29598,c:{},wc:{}},{id:"87f6216f-46c6-46ea-b3a2-a5b6bb761292",tt:"EveryTime",sc:9812,c:{},wc:{}},{id:"a580addc-2b5c-4289-94ec-836071ecf26e",tt:"EveryTime",sc:9697,c:{},wc:{}},{id:"89ce536c-981a-42c7-8b05-2d2140ebcba5",tt:"EveryTime",sc:10179,c:{},wc:{}},{id:"6c4b3691-1aa4-482f-8bf0-3a999078fb15",tt:"EveryTime",sc:14808,c:{},wc:{}},{id:"81236014-afa3-4f37-8f1c-fa5fe708b1c3",tt:"EveryTime",sc:29599,c:{},wc:{}},{id:"63fd9b90-473e-4cf9-af63-ebe735a9d420",tt:"EveryTime",sc:29594,c:{},wc:{}},{id:"b53d6259-9920-4b9b-afd8-9a278ff6918d",tt:"EveryTime",sc:29593,c:{},wc:{}},{id:"b79da73e-c40a-414f-8ea2-1e7533216cee",tt:"EveryTime",sc:32336,c:{},wc:{}},{id:"5e5a1f57-19ce-436c-b5f7-00e178b8f15d",tt:"EveryTime",sc:12475,c:{},wc:{}},{id:"5943b9c0-87b0-4502-8f83-a922612cf1e9",tt:"EveryTime",sc:10622,c:{},wc:{}},{id:"dcff063e-4321-476d-83aa-c3c1a87289d8",tt:"EveryTime",sc:32319,c:{},wc:{}},{id:"b769d8e2-b2a1-4b0d-b441-13129a09b7e1",tt:"EveryTime",sc:11122,c:{},wc:{}},{id:"941f9a9b-9954-4ceb-93cc-b895c743d93b",tt:"EveryTime",sc:14371,c:{},wc:{}},{id:"c9e04bff-01f5-41e3-b499-c2ba2bb9b73b",tt:"EveryTime",sc:14282,c:{},wc:{}},{id:"db0e0ffb-0a17-4b68-b9cd-10e1154d49ad",tt:"EveryTime",sc:14823,c:{},wc:{}},{id:"3c6f23f6-67be-40f5-9ad6-b1379a44021c",tt:"EveryTime",sc:14851,c:{},wc:{}},{id:"f51fc5c2-2897-4b0b-97ac-db0ecb90d7d0",tt:"EveryTime",sc:14858,c:{},wc:{}},{id:"5a0ecef7-17ec-42f2-bdb4-0fdf3771bf9c",tt:"EveryTime",sc:18570,c:{},wc:{}},{id:"6f036bf9-f3de-4048-9205-4602bc6627bf",tt:"EveryTime",sc:13445,c:{},wc:{}},{id:"e65cdf0e-1948-45ea-af9a-a83d75525441",tt:"EveryTime",sc:14812,c:{},wc:{}},{id:"8e3b9e5f-21ab-43fb-9598-599cea29a7d1",tt:"EveryTime",sc:13769,c:{},wc:{}},{id:"b03b54a9-f4a5-4469-8b61-4cbf127b70c0",tt:"EveryTime",sc:14577,c:{},wc:{}},{id:"bb7b6d70-9c1f-46f0-9b7f-5038364af096",tt:"EveryTime",sc:14848,c:{},wc:{}},{id:"5ab87078-bd2f-4ce5-81cd-7aa7d940e77f",tt:"EveryTime",sc:14919,c:{},wc:{}},{id:"0412b944-6be4-4751-9858-085f5ebe20b0",tt:"EveryTime",sc:32338,c:{},wc:{}},{id:"92539da5-a588-4e7a-ab4d-6593f939ee64",tt:"EveryTime",sc:14853,c:{},wc:{}},{id:"db3630f3-4ad4-4f28-9a73-330af3f0c1a7",tt:"EveryTime",sc:14922,c:{},wc:{}},{id:"a171f9a1-7e9f-4a53-b44c-3a76bf32f16a",tt:"EveryTime",sc:13857,c:{},wc:{}},{id:"74185b5d-8d11-4e2f-89c5-d761ffe16f1c",tt:"EveryTime",sc:32339,c:{},wc:{}},{id:"3fa25e6e-e2ba-4f7c-8dea-5b256a52b216",tt:"EveryTime",sc:32340,c:{},wc:{}},{id:"aacfdfda-d26e-4fc5-ba61-4f7658a5fac6",tt:"EveryTime",sc:13829,c:{},wc:{}},{id:"27214846-04f8-4e68-b661-e35c544c2bba",tt:"EveryTime",sc:29195,c:{},wc:{}},{id:"f228f9a4-0c6e-4631-a210-6e8d1bd5c94c",tt:"EveryTime",sc:32321,c:{},wc:{}},{id:"71080b67-ec1f-4f57-b3d8-73fcda19384f",tt:"EveryTime",sc:13830,c:{},wc:{}},{id:"77efd1da-e96f-4de9-8b37-ce1f4288a0d8",tt:"EveryTime",sc:13828,c:{},wc:{}},{id:"d154c025-2847-4661-a0de-cd18dd7c3eac",tt:"EveryTime",sc:13827,c:{},wc:{}},{id:"379b2227-795e-4135-8da4-f26a895e19ac",tt:"EveryTime",sc:21794,c:{},wc:{}},{id:"543b957d-d566-4644-973a-29a0b312b702",tt:"EveryTime",sc:14748,c:{},wc:{}},{id:"3fa26517-4753-438f-82c7-39cf5820e161",tt:"EveryTime",sc:13825,c:{},wc:{}},{id:"ec0d40d2-559f-4ff2-95be-a03206c5d536",tt:"EveryTime",sc:23694,c:{},wc:{}},{id:"0b91540d-4ac1-4c0d-bb2d-53e778953db0",tt:"EveryTime",sc:32324,c:{},wc:{}},{id:"2e2d3d51-ee38-4d3a-802b-4552f3ecff2d",tt:"EveryTime",sc:32341,c:{},wc:{}},{id:"f116cad5-ff67-485a-abd5-f96ad7612af8",tt:"EveryTime",sc:13826,c:{},wc:{}},{id:"32c72112-0585-44b8-8754-ea5df11bc086",tt:"EveryTime",sc:32347,c:{},wc:{}},{id:"68b5b24b-d79e-4e03-9b65-cf01289449a6",tt:"EveryTime",sc:32627,c:{},wc:{}},{id:"fb1ff65c-4a59-4363-9cb7-ddbda8cae1a3",tt:"EveryTime",sc:103566,c:{},wc:{}}]},prebid:{auto_init:!0,revenue_insights_enabled:!1,data_provider_config:{ac_bidders:["pubmatic","openx"]},activationConfigs:[]},twitter_pixel:{auto_init:!0,activationConfigs:[]},web:{auto_init:!0,engagement_edge_only:!0,segment_transition_edge_only:!0,activationConfigs:[]}},i=t=>{const e=r[t];return(t,n)=>{var r;return null!==(r=null==e?void 0:e[t])&&void 0!==r?r:n}},o=i("web"),s=i("dfp");i("facebook_pixel_v2")},2836:(t,e,n)=>{n.d(e,{z:()=>o});var r=n(3030);class i{constructor(t){this.context=t}getContext(){return this.context}updateContext(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach((t=>{let[e,n]=t;this.context[e]=n}))}}class o extends i{constructor(t){super(t)}getClient(){var t;const e=null!==(t=document.title)&&void 0!==t?t:"";return Promise.resolve({type:"web",user_agent:navigator.userAgent||"",url:(0,r.bk)(window.location.href),domain:window.location.hostname||"",title:e,referrer:(0,r.bk)(document.referrer)})}}},389:(t,e,n)=>{n.d(e,{p:()=>o});var r=n(3577);const i="permutive-pvc";class o extends((0,r.h)(i)){constructor(t){super(t)}}},5865:(t,e,n)=>{n.d(e,{J:()=>i});var r=n(3577);class i extends((0,r.h)("permutive-unprocessed-pba")){constructor(t){super(t)}}},3577:(t,e,n)=>{n.d(e,{h:()=>a});var r=n(3735),i=n(6567),o=n(7554);const s=t=>e=>class extends e{constructor(){super(...arguments),this.key=t}put(t){return this.db.then((e=>e.put(t,this.key))).then(r.Q1)}getIfPresent(){return this.db.then((t=>t.get(this.key))).then(i.ij)}reset(){return this.db.then((t=>t.delete(this.key)))}},a=t=>(0,r.zG)(class{constructor(t){this.db=Promise.resolve((0,o.E)(t.namespace,t.logger,t.consentTracking))}},s(t))},5700:(t,e,n)=>{n.d(e,{LP:()=>o,dG:()=>r,eP:()=>i});const r=4096,i=`Cookie exceeds maximum supported size of ${r} bytes for most browsers.`,o="Cookie is missing required parameters."},5461:(t,e,n)=>{n.d(e,{S:()=>c});var r=n(3735),i=n(5700);class o{constructor(t,e,n){this.namespace=t,this.config=e,this.logger=n}makeCookie(t,e,n){return[encodeURIComponent(this.namespace.getNamespacedStorageKey(t)),"=",e?encodeURIComponent(e):"","; expires=",n,"; domain=",this.config.cookieDomain,"; path=/; samesite=none; secure"].join("")}setCookie(t,e){var n;if(!(e&&t&&this.config.cookieExpiry&&this.config.cookieDomain)){const{cookieExpiry:r,cookieDomain:o}=null!==(n=this.config)&&void 0!==n?n:{};throw this.logger.warn(`Unable to set cookie. ${i.LP}`,{value:e,cookieName:t,cookieExpiry:r,cookieDomain:o}),new Error(i.LP)}const r=this.makeCookie(t,e,this.config.cookieExpiry);if(r.length>i.dG)throw this.logger.warn(`Unable to set cookie ${this.namespace.getNamespacedStorageKey(t)}. ${i.eP}`),new Error(i.eP);return this.logger.debug(`Setting cookie ${r}`),document.cookie=r,!0}getCookie(t){const e=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?t:this.namespace.getNamespacedStorageKey(t),n=new RegExp("\\b"+encodeURIComponent(e)+"=([^;]+)").exec(document.cookie);return null!==n?decodeURIComponent(n[1]):null}deleteCookie(t){if(!t||!this.config.cookieDomain)return!1;const e=this.makeCookie(t,void 0,"Thu, 01 Jan 1970 00:00:00 UTC");return this.logger.debug(`Deleting cookie ${e}`),document.cookie=e,!0}}var s=n(4769);const a=t=>{const{logger:e,consentTracking:n}=t,r=t=>(e.debug(`Cookie: Failed to set cookie ${t} as consent is revoked`),!1);return t=>class extends t{constructor(){super(...arguments),this.setCookie=(0,s.v)(super.setCookie.bind(this),r,n.isRevoked)}}},c=(t,e,n,i)=>new((0,r.zG)(o,a({consentTracking:i,logger:n})))(t,e,n)},9773:(t,e,n)=>{n.d(e,{S:()=>d});var r=n(3735),i=n(2688),o=n(787),s=n(365);class a{constructor(t){this.namespace=t}getExternalData(t){const e=this.namespace.getNamespacedStorageKey(t);return window.localStorage.getItem(e)}getExternalJsonData(t){const e=this.getExternalData(t);return null===e?null:(0,o.A)(e)}setExternalData(t,e){const n=this.namespace.getNamespacedStorageKey(t);try{window.localStorage.setItem(n,e)}catch(t){}}setExternalJsonData(t,e){return(0,r.zG)((n=e,(0,s.Y3)((function(){var t=JSON.stringify(n);if("string"!=typeof t)throw new Error("Converting unsupported structure to JSON");return t}),r.yR)),(0,s.UI)((e=>this.setExternalData(t,e))),(0,s.g_)((t=>{throw(0,i.w)(t)}),r.Q1));var n}removeExternalData(t){const e=this.namespace.getNamespacedStorageKey(t);window.localStorage.removeItem(e)}}var c=n(4769);const u=t=>{const{logger:e,consentTracking:n}=t,r=t=>{e.debug(`External Data: Failed to set key ${t} as consent is revoked`)},i=r,o=r;return t=>class extends t{constructor(){super(...arguments),this.setExternalData=(0,c.v)(super.setExternalData.bind(this),i,n.isRevoked),this.setExternalJsonData=(0,c.v)(super.setExternalJsonData.bind(this),o,n.isRevoked)}}},d=(t,e,n)=>new((0,r.zG)(a,u({consentTracking:n,logger:e})))(t)},342:(t,e,n)=>{n.d(e,{SX:()=>o});class r{constructor(){this.prefix="[Permutive]",this.debugStyle=["color: blue"].join(";")}log(){return console.log.bind(window.console,this.prefix)(...arguments)}debug(){return console.debug.bind(window.console,"%c%s",this.debugStyle,this.prefix)(...arguments)}warn(){return console.warn.bind(window.console,this.prefix)(...arguments)}error(){return console.error.bind(window.console,this.prefix)(...arguments)}}class i{log(){}debug(){}warn(){}error(){}}const o=t=>{var e;return t.loggingEnabled&&void 0!==(null===(e=window.console)||void 0===e?void 0:e.log)?new r:new i}},8491:(t,e,n)=>{n.d(e,{Q:()=>o});var r=n(3735);const i="[MESSAGES]";class o{constructor(t){this.logger=t,this.messageListenerMap={},this.replayQueue={},this.onceTracker={},this.defaultMessageOptions={withReplay:!1,once:!1}}on(t,e,n){const r=this.mergeMessageOptions(n);r.withReplay&&this.processReplayQueue(t,e);const i=s(t,this.messageListenerMap).push(e)-1;return r.once&&this.addToOnceTracker(t,i),i}once(t,e){return this.on(t,e,{once:!0})}off(t,e){if(null==e)return this.messageListenerMap[t]=[],void(this.replayQueue[t]=[]);e<0?this.logError('Index for "off" fell out of range',{index:e}):s(t,this.messageListenerMap)[e]=r.Q1}emit(t,e,n){const r=this.mergeMessageOptions(n);s(t,this.messageListenerMap).length>0?(this.logDebug(`Emitting Event: ${t}`),this.emitMessageWithPayload(t,e)):r.withReplay&&this.addToReplayQueue(t,e)}addToReplayQueue(t,e){s(t,this.replayQueue).push(e)}processReplayQueue(t,e){var n;null===(n=this.replayQueue[t])||void 0===n||n.forEach((t=>e(t)))}emitMessageWithPayload(t,e){var n;null===(n=this.messageListenerMap[t])||void 0===n||n.forEach(((n,r)=>{n(e),this.removeListenerIfSetToFireOnlyOnce(t,r)}))}addToOnceTracker(t,e){s(t,this.onceTracker).push(e)}removeListenerIfSetToFireOnlyOnce(t,e){var n;(null===(n=this.onceTracker[t])||void 0===n?void 0:n.includes(e))&&this.off(t,e)}mergeMessageOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(Object.assign({},this.defaultMessageOptions),t)}logError(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.logger.error(i,...e)}logDebug(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.logger.debug(i,...e)}}const s=(t,e)=>{var n;return null!==(n=e[t])&&void 0!==n?n:e[t]=[]}},5619:(t,e,n)=>{n.d(e,{Eq:()=>l,X:()=>m,b:()=>d});var r=n(2851),i=n(2116),o=n(4268),s=n(2751),a=n(4011),c=n(3735),u=n(6567);const d=()=>({environment:"",events_count:0,os:"",sdk_version:"",segments_count:0,session_count:0,session_init_count:0,session_view_count:0}),l=o.n_({environment:s.Eq,events_count:a.Eq,os:s.Eq,sdk_version:s.Eq,segments_count:a.Eq,session_count:a.Eq,session_init_count:a.Eq,session_view_count:a.Eq}),m=t=>{const e=p(t.userId),n=(0,c.zG)(r.vP(t.userId,t.sessionId),r.UI((t=>{let[e,n]=t;return`${e},${n}`})),p),o=String(Math.random()),s=(0,c.zG)(t.sdkVariant,u.UI((t=>`-${t}`)),u.fS((()=>""))),a={environment:"web",events_count:0,os:f(window.navigator.userAgent||""),sdk_version:"v19.101.0"+s,segments_count:0};return(0,c.zG)(i.vP({session_count:e(t.sessionId),session_init_count:n(r.a9(o)),session_view_count:n(t.viewId)}),i.UI((0,c.ls)((t=>r.vP(t)),r.UI((t=>Object.assign(Object.assign({},a),t))))))},f=t=>{const e=t.toLowerCase();return e.includes("windows")?"windows":e.includes("iphone")||e.includes("ipad")?"ios":e.includes("android")?"android":e.includes("macintosh")?"macos":e.includes("linux")?"linux":"unknown"},p=t=>e=>i.dQ((n=>{let{previousState:i}=n;const u=(0,c.zG)(r.vP(t,e),r.g_(function(t){if(null!==t&&"object"==typeof t&&"scope"in t&&"lastValue"in t&&"count"in t)return t;return{scope:"",lastValue:"",count:1}}(i),((t,e)=>{let[n,r]=e;return{scope:n,lastValue:r,count:n!==t.scope?1:r!==t.lastValue?t.count+1:t.count}})),r.D8(o.n_({scope:s.Eq,lastValue:s.Eq,count:a.Eq})));return{state:u,value:(0,c.zG)(u,r.UI((t=>t.count)))}}))},7594:(t,e,n)=>{n.d(e,{p:()=>P});var r=n(7582),i=n(2688),o=n(3735),s=(n(7341),n(9384)),a=function(t,e){return function(){return e(t())}},c=function(t){return function(e){return a(e,t)}},u=o.a9,d=(o.yR,o.yR,s.F4,s.Xl,function(){return Math.random()});function l(t,e){return(0,o.zG)(d,c((function(n){return Math.floor((e-t+1)*n+t)})))}c((function(t){return t<.5}));var m=n(7927),f=n(4673),p=n(2652),h=n(5619),g=n(3328),v=n(7241),_=n(4268);function b(t){return t[0]}function y(t){return t[1]}var w=function(t){return function(e){return[t(b(e)),y(e)]}},k=n(6934),E=n(7407),S=n(3992);const P=t=>{let e=[];const n=t=>{e=[...e,...t]},s=e=>{(0,o.zG)(t.metrics.consume(),I(e),n)};let a=t.context.current;t.context.onChange((t=>{s(a),a=t}));const c="[Metrics Reporter]",u=e=>(0,o.zG)({},(0,o.ls)((0,m.dx)("continent",f.U.$ip_geo_info_continent),(e=>t.enrichers.enrich(e,!0).output)),(t=>Object.assign(Object.assign({},e),t))),d=d=>{let{beacon:l}=d;s(a);const m=e;e=[];const f=(0,o.zG)(m,v.ru((0,o.zG)(_.Uz((t=>t[0]))(h.Eq))),g.UI((0,o.ls)(v.Ri,w((0,o.ls)(v.YM,u)))),E.uU((e=>{let[n,o]=e;return k.Y3((()=>((e,n)=>(0,r.mG)(void 0,void 0,void 0,(function*(){if(!e)return t.api.metrics(n);if(!t.api.metricsBeacon(n))throw new Error("Failed to send beacon.")})))(l,{context:n,items:o})),(e=>(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.logger.error(c,...n)}(`Failed to publish metrics ${(0,i.w)(e).message}`,o),I(n)(o))))})),E.UI((0,o.ls)(g.bj,g.xH,(0,p.bw)(n),g.xb)));return f()};t.messages.on("permutive:ready",(()=>{const t=l(3e4,9e4),e=n=>(0,S.HJ)((()=>(0,r.mG)(void 0,void 0,void 0,(function*(){const n=(yield d({beacon:!1}))?5e3:t();e(n)}))),n);e(5e3),(0,p.Bf)((()=>d({beacon:!0})),{capture:!1})}))},I=t=>e=>(0,o.zG)(e,g.UI((e=>[t,e])))},4074:(t,e,n)=>{function r(t,e,n,r,s){var a;return(null!==(a=n.getData("metricsEnabled"))&&void 0!==a?a:(()=>{const t=Math.random()<=e.metricsSamplingPercentage/100;return n.setData("metricsEnabled",t),t})())?new i(t,r,s):new o}n.d(e,{g:()=>r});class i{constructor(t,e,n){this.sdkInitTimestamp=t,this.messages=e,this.logger=n,this.prefix="[Metrics]",this.pendingMetrics=[],this.pendingTimers={},this.track({name:"sdk_initialisation_start_time_seconds",value:t/1e3,labels:{}})}isEnabled(){return!0}consume(){const t=this.pendingMetrics;return this.pendingMetrics=[],t}track(t){this.logDebug(`Tracking ${t.name}`,{metric:t}),this.pendingMetrics.push(t)}trackTimeSinceInit(t,e){const n=(performance.now()-this.sdkInitTimestamp)/1e3;this.logDebug("timer stopped",t,n),this.track({name:t,value:n,labels:e})}startTimer(t,e){const n=performance.now(),r=this.generateRandomKey(t);return this.pendingTimers[r]={startTime:n,labels:e},r}stopTimer(t,e){const n=this.pendingTimers[e];if(n){const r=(performance.now()-n.startTime)/1e3;this.logDebug("timer stopped",t,r),this.track({name:t,value:r,labels:n.labels}),delete this.pendingTimers[e]}}generateRandomKey(t){return`${t}-${[...Array(24)].map((()=>Math.random().toString(36)[2])).join("")}`}logDebug(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.logger.debug(this.prefix,...e)}}class o{isEnabled(){return!1}consume(){return[]}track(t){}trackTimeSinceInit(t,e){}startTimer(t,e){return""}stopTimer(t,e){}}},8317:(t,e,n)=>{n.d(e,{S:()=>s});var r=n(7582),i=n(3735),o=n(2652);class s{constructor(t,e){this.db=t,this.options=e}getSessionId(){return this.options.session_id}sessionHasChanged(){return this.options.hasChanged}static decodeSessionData(t){return t&&"object"==typeof t&&t.hasOwnProperty("session_id")&&t.hasOwnProperty("last_updated")?Object.assign(Object.assign({},t),{last_updated:new Date(t.last_updated)}):null}reset(){return this.db.delete(this.options.session_data_key)}persistSessionData(t){return(0,r.mG)(this,void 0,void 0,(function*(){const e=t.last_updated.toISOString();yield this.db.put(Object.assign(Object.assign({},t),{last_updated:e}),this.options.session_data_key)}))}static generateNewSession(t){return{session_id:(0,o.k$)(),last_updated:t}}static hasExpired(t,e,n){if(isNaN(e.getTime()))return!0;return t>new Date(e.getTime()+1e3*n)}static initialise(t,e,n){return(0,r.mG)(this,void 0,void 0,(function*(){const r={timeout_seconds:1800,session_data_key:"permutive-session",hasChanged:!1,logger:n};t.deleteCookie(r.session_data_key);const a=new Date,c=yield e.get(r.session_data_key).catch(i.gn),u=s.decodeSessionData(c),d=null===u||s.hasExpired(a,u.last_updated,r.timeout_seconds)?Object.assign(Object.assign({},s.generateNewSession(a)),{hasChanged:!0}):Object.assign(Object.assign({},u),{last_updated:a,hasChanged:!1}),l=new s(e,(0,o.PM)(r,d));return yield l.persistSessionData(d),l}))}}},4026:(t,e,n)=>{n.d(e,{S:()=>v});var r=n(3735),i=n(2688),o=n(787),s=n(365),a=n(2652),c=n(4730),u=n(926);class d{constructor(t,e,n){this.config=t,this.namespace=e,this.logger=n,this.prefix="[Data Store]",this.permutiveData={},this.permutiveDataSize=0,this.localStorageQueue=new Set,this.localStorageScheduler=new c.b(t.localStorageWriteDelay,t.localStorageWriteMaxDelay),this.debouncedFlush=this.localStorageScheduler.schedule(this.flushLocalStorageQueue.bind(this)),this.debouncedStorageKeys=new Set(t.localStorageDebouncedKeys),this.localStorageScheduler.scheduleForPageUnload(this.flushLocalStorageQueue.bind(this)),this.permutiveData=this.buildData()}reset(){this.permutiveData={}}getDataSize(){return this.permutiveDataSize}getData(t){return this.permutiveData[t]}setData(t,e){this.permutiveData[t]=e,this.requestWrite(t)}deleteKey(t){delete this.permutiveData[t],this.requestWrite(t)}requestWrite(t){this.debouncedStorageKeys.has(t)?(this.localStorageQueue.add(t),this.debouncedFlush()):this.writeData(t)}flushLocalStorageQueue(){for(let t of this.localStorageQueue)this.writeData(t);this.localStorageQueue.clear()}buildData(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.getDataChunk("misc")),this.getDataChunk("models")),this.getDataChunk("queries")),this.getDataChunk("enrichers"))}getDataChunk(t){const e=this.namespace.getNamespacedStorageKey(this.chunkKeyToStorageKey(t)),n=window.localStorage.getItem(e),r=null===n?null:(0,o.A)(n);return n&&r?(this.permutiveDataSize+=2*n.length,r):{}}chunkKeyToStorageKey(t){switch(t){case"models":return this.config.permutiveDataModelsKey;case"queries":return this.config.permutiveDataQueriesKey;case"enrichers":return this.config.permutiveDataEnrichersKey;case"misc":return this.config.permutiveDataMiscKey;default:throw new Error(`Unhandled chunk key "${t}"`)}}writeData(t){this.logger.debug(`Data Store: Writing ${t} to localStorage`);const[e,n]=this.dataKeyToChunkInfo(t);return s.Y3((()=>window.localStorage.setItem(this.namespace.getNamespacedStorageKey(e),JSON.stringify(n))),(e=>{const n=(0,i.w)(e);return this.logError(`Failed to set ${t}. Got ${n}`),n}))}dataKeyToChunkInfo(t){const e=t=>(0,a.eu)(this.permutiveData,t);switch(t){case"models_data":case"models_last_updated":return[this.chunkKeyToStorageKey("models"),e(l)];case"query_states":case"internal_query_states":case"external_query_states":case"state_offset":case"event-source-id":return[this.chunkKeyToStorageKey("queries"),e(m)];case"enricher:geoip":return[this.chunkKeyToStorageKey("enrichers"),e(f)];case u.TWITTER_PIXEL_LS_KEY:case"identities":case"amp_ready":case"metricsEnabled":case"addon:tradedesk":case"addon:tracking_pixel":case"addon:eyeota_pixel":case"addon:pinterest_pixel":case"addon:facebook_pixel_v2":case"addon:appnexus":case"addon:ddp":case"addon:gigya":case"addon:neustar_fabrick":case"pubmatic":case"lotame":return[this.chunkKeyToStorageKey("misc"),e(p)];default:throw new Error(`Unhandled data key "${t}"`)}}logError(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.logger.error(this.prefix,...e)}}const l=["models_data","models_last_updated"],m=["query_states","internal_query_states","external_query_states","state_offset","event-source-id"],f=["enricher:geoip"],p=[u.TWITTER_PIXEL_LS_KEY,"identities","amp_ready","metricsEnabled","addon:tradedesk","addon:tracking_pixel","addon:eyeota_pixel","addon:pinterest_pixel","addon:facebook_pixel_v2","addon:appnexus","addon:ddp","addon:gigya","addon:neustar_fabrick","pubmatic","lotame"];var h=n(4769);const g=t=>{const{logger:e,consentTracking:n}=t,r=t=>(e.debug(`Data Store: Failed to write ${t} as consent is revoked`),s.F2(void 0));return t=>class extends t{constructor(){super(...arguments),this.writeData=(0,h.v)(super.writeData.bind(this),r,n.isRevoked)}}},v=(t,e,n,i)=>new((0,r.zG)(d,g({consentTracking:i,logger:n})))(t,e,n)},569:(t,e,n)=>{n.d(e,{L:()=>r});class r{constructor(t){this.config=t}getNamespacedStorageKey(t){return`${this.config.stateNamespace}${t}`}}},7575:(t,e,n)=>{n.d(e,{u:()=>r});class r{constructor(t,e){this.metrics=t,this.messages=e,this._isRealtime=!1,this._isReady=!1}isRealtime(){return this._isRealtime}isReady(){return this._isReady}setAsRealtime(t){this._isRealtime=!0,this.messages.emit("permutive:realtime"),this.metrics.trackTimeSinceInit("sdk_realtime_targeting_set_task_duration_seconds",{}),this.metrics.track({name:"sdk_user_segments_count",value:t,labels:{}})}setAsReady(){this._isReady=!0,this.messages.emit("permutive:ready"),this.metrics.trackTimeSinceInit("sdk_initialisation_task_duration_seconds",{}),window.performance&&window.performance.memory&&(this.metrics.track({name:"sdk_heap_memory_bytes_used",value:window.performance.memory.usedJSHeapSize,labels:{}}),this.metrics.track({name:"sdk_heap_memory_limit_fraction_used",value:window.performance.memory.usedJSHeapSize/window.performance.memory.jsHeapSizeLimit,labels:{}}))}}},7256:(t,e,n)=>{n.d(e,{a:()=>s});var r=n(7582),i=n(3735),o=n(7927);class s{constructor(t,e,n,r,i,o,s){this.config=t,this.localStorage=e,this.logger=n,this.permutiveData=r,this.eventSourceId=i,this.cookies=o,this.externalData=s}reset(){return(0,r.mG)(this,void 0,void 0,(function*(){return this.logger.log("Resetting State"),(0,i.zG)(this.cookies.deleteCookie(this.config.cookieName),(t=>this.externalData.removeExternalData(this.config.cookieName)),(t=>(0,o.XP)({_paols:!0,_papns:!0,_pcrdbs:!0,_pcrprs:!0,_pdfps:!0,_pfws:!0,_pnativo:!0,_prps:!0,_prubicons:!0,_psegs:!0,_psmart:!0,"permutive-id":!0,"permutive-loaded":!0,"permutive-prebid-rtd":!0,"permutive-events-cache":!0,_pssps:!0}).forEach((t=>this.externalData.removeExternalData(t)))),(t=>this.permutiveData.reset()),(t=>this.eventSourceId.generateAndSet()),(t=>Promise.all([this.localStorage.delete(this.config.permutiveDataModelsKey),this.localStorage.delete(this.config.permutiveDataQueriesKey),this.localStorage.delete(this.config.permutiveDataEnrichersKey),this.localStorage.delete(this.config.permutiveDataMiscKey)])),i.Q1)}))}}},7274:(t,e,n)=>{n.d(e,{u:()=>r});class r{constructor(t,e,n,r,i){this.permutiveData=t,this.permutiveReset=e,this.userId=n,this.viewId=r,this.eventCollection=i}getPermutiveData(t){return this.permutiveData.getData(t)}setPermutiveData(t,e){return this.permutiveData.setData(t,e)}getStateSizeInBytes(){return this.permutiveData.getDataSize()+this.eventCollection.getStateSizeInBytes()}reset(){return this.permutiveReset.reset()}}},9117:(t,e,n)=>{n.d(e,{M:()=>a});var r=n(3735),i=n(6567),o=n(2851),s=n(2652);class a{constructor(t,e,n,i){this.config=t,this.clientContext=e,this.cookies=n,this.externalData=i;const[s,a]=o.Ue(this.getOrGenerateUserId());this.ref=s,this.setUserId=a,(0,r.zG)(s,o.YP((t=>{this.cookies.setCookie(this.config.cookieName,t),this.externalData.setExternalData(this.config.cookieName,t),this.clientContext.updateContext(["user_id",t])})))}isEqual(t){return this.ref.current===t}get(){return this.ref.current}set(t){this.setUserId(t)}getOrGenerateUserId(){return(0,i.fS)((()=>(0,i.fS)(s.k$)(this.getUserIdFromLocalStorage())))(this.getUserIdFromCookie())}getUserIdFromCookie(){return this.getUserIdFromStorageIfValid("cookie")}getUserIdFromLocalStorage(){return this.getUserIdFromStorageIfValid("localStorage")}getUserIdFromStorageIfValid(t){const e=(0,i.DT)(s.Gz);return(0,r.zG)("cookie"===t?this.cookies.getCookie(this.config.cookieName):this.externalData.getExternalData(this.config.cookieName),i.ij,(0,i.tS)(e))}}},9880:(t,e,n)=>{n.d(e,{W:()=>o});var r=n(2851),i=n(2652);class o{constructor(t){this.config=t;const e=t.viewId&&(0,i.Gz)(t.viewId)?t.viewId:(0,i.k$)(),[n,o]=r.Ue(e);this.ref=n,this.set=o}get(){return this.ref.current}generateAndSet(){const t=(0,i.k$)();return this.set(t),t}}},7554:(t,e,n)=>{n.d(e,{E:()=>i});var r=n(8259);const i=(t,e,n)=>{const i=window.localStorage;return(0,r.rK)(i,"[Local Storage]",t,e,n)}},9332:(t,e,n)=>{n.d(e,{u:()=>i});n(6640);var r=n(8259);const i=(t,e,n)=>{const i=window.sessionStorage;return(0,r.rK)(i,"[Session Storage]",t,e,n)}},8259:(t,e,n)=>{n.d(e,{_z:()=>d,oP:()=>u,rK:()=>m});var r=n(7582),i=n(2688),o=n(787),s=n(365),a=n(3735),c=n(4769);class u{constructor(t,e){this.storage=t,this.namespace=e}put(t,e){return(0,r.mG)(this,void 0,void 0,(function*(){const n=this.namespace.getNamespacedStorageKey(e.toString());return this.storage.setItem(n,JSON.stringify(t)),e}))}get(t){return(0,r.mG)(this,void 0,void 0,(function*(){const e=this.namespace.getNamespacedStorageKey(t.toString()),n=this.storage.getItem(e);return null===n?null:(0,o.A)(n)}))}delete(t){return(0,r.mG)(this,void 0,void 0,(function*(){const e=this.namespace.getNamespacedStorageKey(t.toString());this.storage.removeItem(e)}))}deleteStore(){return(0,r.mG)(this,void 0,void 0,(function*(){}))}}const d=t=>{const{logger:e,consentTracking:n,prefix:r}=t,i=(t,n)=>(e.debug(`${r} Failed to write ${String(n)} as consent is revoked`),Promise.resolve(n));return t=>class extends t{constructor(){super(...arguments),this.put=(0,c.v)(super.put.bind(this),i,n.isRevoked)}}},l=t=>{const{logger:e,prefix:n,storage:o}=t;return t=>class extends t{constructor(){super(...arguments),this.isSupported=null}isStorageSupported(){return null!==this.isSupported||(this.isSupported=s.Y3((()=>{const t="_permutive_ls_test";return o.setItem(t,t),o.getItem(t),o.removeItem(t),!0}),i.w),(0,a.zG)(this.isSupported,s.EQ((t=>{e.warn(`${n} Is NOT supported`,t)}),(()=>{e.debug(`${n} Is supported`)})))),this.isSupported}put(t,e){const n=Object.create(null,{put:{get:()=>super.put}});return(0,r.mG)(this,void 0,void 0,(function*(){return(0,a.zG)(this.isStorageSupported(),s.EQ((t=>{throw t}),(()=>n.put.call(this,t,e))))}))}get(t){const e=Object.create(null,{get:{get:()=>super.get}});return(0,r.mG)(this,void 0,void 0,(function*(){return(0,a.zG)(this.isStorageSupported(),s.EQ((()=>null),(()=>e.get.call(this,t))))}))}delete(t){const e=Object.create(null,{delete:{get:()=>super.delete}});return(0,r.mG)(this,void 0,void 0,(function*(){return(0,a.zG)(this.isStorageSupported(),s.EQ(a.Q1,(()=>e.delete.call(this,t))))}))}deleteStore(){const t=Object.create(null,{deleteStore:{get:()=>super.deleteStore}});return(0,r.mG)(this,void 0,void 0,(function*(){return(0,a.zG)(this.isStorageSupported(),s.EQ(a.Q1,(()=>t.deleteStore.call(this))))}))}}},m=(t,e,n,r,i)=>new((0,a.zG)(u,l({logger:r,prefix:e,storage:t}),d({logger:r,consentTracking:i,prefix:e})))(t,n)},2497:(t,e,n)=>{n.d(e,{Ec:()=>s,_8:()=>o});var r=n(6567),i=n(2652);const o=t=>{const e=t.__tcfapi,n={type:"aborted"},o=["tcloaded","useractioncomplete"];return e?(0,i.a4)((()=>a(e,"getTCData")),(()=>a(e,"getTCData").then((t=>"loaded"===(null==t?void 0:t.cmpStatus)&&o.includes(null==t?void 0:t.eventStatus))))).then((0,r.g_)((()=>n),(t=>({type:"loaded",data:t})))):Promise.resolve({type:"missing"})},s=t=>t.gdprApplies?(0,r.G)(t.vendor.consents):r.YP,a=(t,e)=>new Promise((n=>{t(e,2,(t=>{n(t)}))}))},5165:(t,e,n)=>{n.d(e,{D:()=>r});const r={tradedesk:21,ddp:755,appnexus:32,pubmatic:76,neustar_fabrick:468}},6037:(t,e,n)=>{n.d(e,{C:()=>c});var r=n(7582),i=n(1500),o=n(3735);const s=(a=[[{name:"dfp",import:Promise.resolve().then(n.bind(n,4388))}],[],[],[],[{name:"appnexus",import:Promise.resolve().then(n.bind(n,3994))}],[],[{name:"clean_room",import:Promise.resolve().then(n.bind(n,5912))}],[],[],[],[{name:"facebook_pixel_v2",import:Promise.resolve().then(n.bind(n,4519))}],[],[],[],[],[{name:"overlays",import:Promise.resolve().then(n.bind(n,8087))}],[],[],[{name:"prebid",import:Promise.resolve().then(n.bind(n,9581))}],[],[{name:"pubmatic",import:Promise.resolve().then(n.bind(n,1840))}],[],[{name:"rubicon_ssp",import:Promise.resolve().then(n.bind(n,8563))}],[{name:"scriptrunner",import:Promise.resolve().then(n.bind(n,7416))}],[{name:"tracking_pixel",import:Promise.resolve().then(n.bind(n,3792))}],[],[{name:"twitter_pixel",import:Promise.resolve().then(n.bind(n,926))}],[{name:"web",import:Promise.resolve().then(n.bind(n,4400))}],[],[],[{name:"ssp",import:Promise.resolve().then(n.bind(n,9557))}]],(0,o.zG)((0,i.xH)(a),(0,i.u4)({},((t,e)=>Object.assign(Object.assign({},t),{[e.name]:e.import})))));var a;const c=t=>{const e=Object.entries(s).map((e=>{let[n,i]=e;return(0,r.mG)(void 0,void 0,void 0,(function*(){return t.logger.log(`Loading addon ${n}`),(yield i).load(t)}))}));return Promise.all(e)}},9658:(t,e,n)=>{n.r(e),n.d(e,{createAddon:()=>E,getCachedDFPSegments:()=>w});var r=n(7582),i=n(2688),o=n(365),s=n(3735),a=n(6567),c=n(2851),u=n(9853),d=n(2652);const l="_pdfps";n(5700);var m=n(1500),f=n(2751);let p=!1;let h=null;const g=(t,e)=>{const{logger:n}=e;(0,s.zG)(t,a.UI((t=>{!0!==p&&t.pubadsReady&&(null!=h||(h=r=>{let{slot:i}=r;const{getContentUrl:o}=i;if(!o||"function"!=typeof o)return;(0,s.zG)(o(),(0,f.pn)("&trunc=1"))&&(n.debug("DFP content URL has been truncated!"),(t=>{let{metrics:e,logger:n}=t;p||(e.track({name:"sdk_targeting_size_limit_exceeded_count",value:1,labels:{target:"dfp"}}),p=!0,n.debug("DFP has exceeded targeting limit"))})(e),h&&t.pubads().removeEventListener("slotRenderEnded",h),h=null)}),t.pubads().addEventListener("slotRenderEnded",h))})))},v=(t,e,n,r)=>{const{logger:i}=e;g(t,e);(0,s.zG)(t,a.UI((t=>(t=>{t.cmd.push((()=>{const{getTargeting:e,setTargeting:o}=t.pubads(),s=e("permutive")||[],a=Object.values(n.eligibleSegments).map(String).concat(n.cloudCohorts).concat("rts"),c=(0,m.uK)((t=>a.includes(t))),{left:u}=c(s),d=r.concat(u).concat("rts");i.debug("DFP setting GPT targeting to",d),o("permutive",d)}))})(t))))};var _=n(4388);const b={liveSegments:[],cloudCohorts:[],eligibleSegments:{}},y={segments:b,getGAMKeyValues:()=>({permutive:""})},w=t=>t.getExternalJsonData(l)||[],k=(t,e,n)=>{const{logger:r,externalData:o,api:s}=e;let a=n.map(String).concat(b.cloudCohorts);r.debug("DFP is updating with targeting values",a),v(t,e,b,a);try{o.setExternalJsonData(l,a)}catch(t){const e=(0,i.w)(t),n="DFP failed to set data. Got:";r.error(n,e),s.reportError(`${n} ${e.message}`)}return((t,e)=>{let{api:n,logger:r}=t;(0,u.$S)("sync_segments_cookie",!1)?(r.debug("DFP syncing segment cookie _pdfps"),n.segmentSync({key:l,value:e})):r.debug("DFP sync segments cookie not enabled, skipping sync")})(e,JSON.stringify(a)),r.debug("DFP live segments updated to",n),n},E=t=>(0,r.mG)(void 0,void 0,void 0,(function*(){const{api:e,logger:n,activationManager:r,messages:i,externalData:u,nextGenOutput:m,userId:f,cookies:p}=t,h=yield(0,d.a4)((()=>window.googletag),(()=>!!window.googletag),{waitTimeInMs:10,maxAttempts:200,exponentialBackOff:!1});a.Wi(h)&&n.error("[DFP]: unable to find google tag script on the page"),(0,s.zG)(h,a.UI((t=>(t=>t.cmd.push((()=>t.pubads().setTargeting("prmtvsdk","web"))))(t))));y.getGAMKeyValues=()=>Object.assign(Object.assign({},(0,s.zG)((0,_.generateProjectSpecificKVs)(t),o.Vn((t=>{var n;return n=t,e.reportError(`[DFP] ${n}`,f.get()),t})),o.fS((()=>({}))))),{permutive:y.segments.liveSegments.join(",")}),b.eligibleSegments=(t=>{const e=t.getSpecializedActivations("dfp"),n={};for(const t of e.dfp)n[t]=t;for(const t of Object.keys(e.dfp_legacy)){const r=Number(t);n[r]=e.dfp_legacy[r]}return n})(r);const g=(0,s.zG)(m.queryLanguageCohorts.all,c.UI((t=>(n.debug("DFP received QL segments",{qlSegments:t}),((t,e)=>t.filter((t=>t in e)).map((t=>e[t])))(t,b.eligibleSegments)))),c.D8(d.cO));return(0,s.zG)(c.vP(g,m.cloudCohorts.gam),c.YP((0,d.Z_)(e,f,(e=>{let[r,i]=e;n.debug("DFP received updated cohorts",{filteredQlSegments:r,cloudCohorts:i}),b.cloudCohorts=i,b.liveSegments=k(h,t,r)})))),n.debug("DFP initialised with segments",b),i.on("permutive:reset",(0,d.Z_)(e,f,(()=>{n.debug("DFP received 'permutive:reset' event"),u.removeExternalData(l),p.deleteCookie(l)}))),i.emit("permutive:dfp:ready"),y}))},4388:(t,e,n)=>{n.r(e),n.d(e,{generateProjectSpecificKVs:()=>P,load:()=>l});var r=n(2688),i=n(365),o=n(3735),s=n(922),a=n(9853),c=n(2652),u=n(9658);const d={},l=t=>{(0,a.Hn)("dfp")("auto_init",!1)&&t.q.push({functionName:"addon",arguments:["dfp",{}]}),window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push((()=>m(t)))},m=t=>{t.permutive.ready((0,c.Z_)(t.api,t.userId,(()=>w(t.metrics))),"realtime");k(t.externalData);(0,o.zG)(P(t),i.tS((t=>i.Y3((()=>(0,c.qh)(t).forEach((t=>{let[e,n]=t;googletag.pubads().setTargeting(e,n)}))),r.w))),i.Vn((e=>t.api.reportError(`[DFP:load], ${e}`,t.userId.get())))),v(t.permutive),googletag.cmd.push((()=>{_(t.permutive),b(t.permutive)})),window.addEventListener("message",p(t.permutive),!1)},f=t=>{let{advertiserId:e,campaignId:n,lineItemId:r,creativeId:i}=t;return{advertiser_id:(0,c.rH)(e),campaign_id:(0,c.rH)(n),line_item_id:(0,c.rH)(r),creative_id:(0,c.rH)(i)}},p=t=>e=>{var n;try{const r=JSON.parse(e.data);if(!r.permutive_type||"google_ad_click"!==r.permutive_type)return;const{ad_unit_path:i,creative_id:o,advertiser_id:s,order_id:a,line_item_id:c}=null!==(n=null==r?void 0:r.data)&&void 0!==n?n:{},u=f({lineItemId:c,advertiserId:s,campaignId:a,creativeId:o});let l;Object.keys(d).some((t=>{const{slot:e,creative_id:n}=d[t];if((null==e?void 0:e.ad_unit_path)===i&&n===u.creative_id)return l=d[t],!0})),l=null!=l?l:Object.assign(Object.assign({},u),{is_empty:!1}),h(t,l)}catch(t){}},h=(t,e)=>{s.PH&&e&&t.track("SlotClicked",e)},g=(t,e,n)=>{d[e]=n,y(t,n),S(t,e)},v=t=>{const e=googletag.pubadsReady&&googletag.pubads().getSlots();e&&e.forEach((e=>{const n=e.getResponseInformation();if(!n)return;const r=Object.assign(Object.assign({},f(n)),{is_empty:!1,service_name:"publisher_ads",slot:E(e)}),i=e.getSlotElementId();g(t,i,r)}))},_=t=>{googletag.pubads().addEventListener("slotRenderEnded",(e=>{const n=Object.assign(Object.assign({},f(e)),{is_empty:e.isEmpty,service_name:e.serviceName,slot:E(e.slot)});if(e.size){const[t,r]=e.size;"number"==typeof t&&"number"==typeof r&&(n.width=t,n.height=r)}const r=e.slot.getSlotElementId();g(t,r,n)}))},b=t=>{s.EW&&googletag.pubads().addEventListener("impressionViewable",(e=>{let{slot:n,serviceName:r}=e;const i=n.getResponseInformation();if(!i)return;const o=Object.assign(Object.assign({},f(i)),{service_name:r,slot:E(n)});t.track("SlotViewable",o)}))},y=(t,e)=>{if(!s.CL)return;var n;n=Object.assign(Object.assign({},e),{rendered_timestamp:Date.now()}),t.track("SlotRendered",n)},w=t=>{let e=0;const n=googletag.pubadsReady&&googletag.pubads().getSlots();n&&n.forEach((t=>t.getResponseInformation()&&e++));const r=0===e?"sdk_targeting_realtime_success_count":"sdk_targeting_realtime_fail_count";t.track({name:r,value:1,labels:{target:"dfp"}})},k=t=>{const e=(0,u.getCachedDFPSegments)(t);googletag.cmd.push((()=>{const{getTargeting:t,setTargeting:n}=googletag.pubads(),r=t("permutive")||[];n("permutive",[...new Set([...e.map(String),...r])])}))},E=t=>{const e={ad_unit_path:t.getAdUnitPath(),slot_element_id:t.getSlotElementId()};return s.jH?Object.assign(Object.assign({},e),(()=>{const e={},n=[];let r=[];const i=(t,i)=>{const o="slot"===t?t=>e[t]=1:()=>{},s=i.getTargetingKeys();r=s;for(let s=0;s<r.length;s++){const a=r[s];if(void 0!==e[a]&&"service"===t)continue;const c=[],u=i.getTargeting(a);for(let t=0;t<u.length;t++)c.push(u[t].toString());c.length>0&&(o(a),n.push({key:a,value:c}))}};return i("slot",t),i("service",googletag.pubads()),{targeting_keys:n}})()):e},S=(t,e)=>{let n=!1;const r=()=>{n&&"hidden"===document.visibilityState&&h(t,d[e])},i=()=>{n=!0},o=()=>{n=!1};try{document.addEventListener("visibilitychange",r);const t=document.getElementById(e);t&&(t.addEventListener("mouseover",i),t.addEventListener("mouseout",o))}catch(t){}},P=t=>{let{userId:e,viewId:n}=t;return i.Y3((()=>({})),r.w)}},8087:(t,e,n)=>{n.r(e),n.d(e,{OverlaysAddon:()=>a,load:()=>s});var r=n(3992),i=n(9853),o=n(2652);const s=t=>{(0,i.Hn)("overlays")("auto_init",!1)&&t.q.unshift({functionName:"addon",arguments:["overlays",{}]})};class a{constructor(t){const e=this;this.permutive=t.permutive,this.options=t,this.activations=this.options.activationManager.getActivations("overlays"),this.loadedImageCounts={};for(let n=0;n<this.activations.length;n++){const r=this.activations[n],i=r.getSegmentCode(),s=r.getTriggerType(),a=r.getConfig(),c=this.buildOverlayCss(a,n);document.head.insertAdjacentHTML("beforeend",c);const u=this.buildOverlayBody(a,n);document.body.insertAdjacentHTML("beforeend",u);const d=`permutive-overlay-${n}`,l=document.getElementById(d);if(l){const t=l.getElementsByClassName("close")[0],e=l.getElementsByClassName("content")[0],n=()=>{l.style.visibility="hidden",l.style.opacity="0"},i=t=>{(null==e?void 0:e.contains(t.target))||(n(),l.removeEventListener("click",i))};t.addEventListener("click",n),l.addEventListener("click",i);[].slice.call(l.getElementsByTagName("a")).slice(1).forEach((t=>{t.addEventListener("click",(function(){r.trackConversion({useBeacon:!0})}))}));const o=l.getElementsByTagName("form")[0];o&&o.addEventListener("submit",(function(t){t.preventDefault(),r.trackConversion({success:function(){o.submit()}})}))}const m=function(t,n){e.showOverlay(t),n.trackImpression()};"EveryTime"===s?this.permutive.segment(i,(0,o.Z_)(t.api,t.userId,(t=>{t?m(d,r):this.permutive.trigger(i,"result",(function(t){t.result&&m(d,r)}))}))):"OnEntry"===s?this.permutive.trigger(i,"result",(0,o.Z_)(t.api,t.userId,(function(t){t.result&&m(d,r)}))):"OnExit"===s&&this.permutive.trigger(i,"result",(0,o.Z_)(t.api,t.userId,(function(t){t.result||m(d,r)})))}}buildOverlayCss(t,e){return'<style type="text/css">.${overlay_class}{position:fixed;top:0;bottom:0;left:0;right:0;width:100%;height:100%;background:rgba(0,0,0,0.${opacity_percentage});transition:opacity ${opacity_transition_ms}ms;visibility:hidden;opacity:0;z-index:1000000;}.${modal_class}{position:fixed;padding:10px;background:#fff;border-radius:5px;z-index:1000001}.${modal_class} .content{overflow:auto;z-index:1000002;}.${modal_class} .close{position:absolute;top:20px;right:30px;transition:all 200ms;font-size:30px;font-weight:bold;text-decoration:none;color:#333;z-index:1000003}.${modal_class} .close:hover{color:orange;}</style>'.replace(/\${overlay_class}/g,"permutive-overlay-"+e).replace(/\${modal_class}/g,"permutive-modal-"+e).replace("${opacity_percentage}",t.opacity_percentage.toString()).replace("${opacity_transition_ms}",t.opacity_transition_ms.toString())}buildOverlayBody(t,e){const n=this.options.config.windowKey;let r="";return!function(t){return void 0!==t.html}(t)?function(t){return void 0!==t.image_url&&void 0!==t.image_link}(t)&&(r='<a href="'+t.image_link+'"><img src="'+t.image_url+'"/></a>'):r=t.html,'<div id="${overlay_class}" class="${overlay_class}"><div id="${modal_class}" class="${modal_class}"><a class="close" href="javascript:;">&times;</a><div class="content">${content}</div></div></div>'.replace(/\${overlay_class}/g,"permutive-overlay-"+e).replace(/\${modal_class}/g,"permutive-modal-"+e).replace("${content}",r).replace(/<img /g,`<img onload='window[${n}].addons.overlays.loadedImage("permutive-overlay-" + num + "")' `)}showOverlay(t){const e=document.getElementById(`${t}`);if(!e)return;const n=()=>{const t=e.getElementsByTagName("div")[0],n=t.getBoundingClientRect().height,r=t.getBoundingClientRect().width;t.style.left=window.innerWidth/2-r/2+"px",t.style.top=window.innerHeight/2-n/2+"px",e.style.visibility="visible",e.style.opacity="1"},i=e.getElementsByTagName("img");if(i.length>0){let e=0;const o=()=>{e<10&&(!(t in this.loadedImageCounts)||this.loadedImageCounts[t]<i.length)?(e+=1,(0,r.HJ)(o,500)):n()};o()}else n()}loadedImage(t){t in this.loadedImageCounts?this.loadedImageCounts[t]=this.loadedImageCounts[t]+1:this.loadedImageCounts[t]=1}}},2460:(t,e,n)=>{n.d(e,{i:()=>r});class r{constructor(t,e){this.isFirstRun=void 0===t.permutiveData.getData(e),this.cachedSegmentsMembership=new Set(t.nextGenOutput.queryLanguageCohorts.all.current),this.isFirstRun&&t.permutiveData.setData(e,!0),t.messages.on("permutive:reset",(()=>t.permutiveData.setData(e,!1)))}}},3994:(t,e,n)=>{n.r(e),n.d(e,{AppnexusPixel:()=>s,load:()=>a});var r=n(9853),i=n(2460);class o extends i.i{constructor(t,e,n){super(t,n);const r=t.activationManager.getSpecializedActivations(e);this.processSpecialisedActivations(t.permutive,r)}}class s extends o{constructor(t){super(t,"appnexus","addon:appnexus")}processSpecialisedActivations(t,e){Object.entries(e).forEach((e=>{let[n,r]=e;const i=parseInt(n),o=this.cachedSegmentsMembership.has(i);this.isFirstRun&&o?this.firePixel(r):t.trigger(i,"",(t=>{t.result&&this.firePixel(r)}))}))}firePixel(t){(new Image).src=`https://secure.adnxs.com/seg?add=${t}&t=1`}}const a=t=>{(0,r.Hn)("appnexus")("auto_init",!1)&&t.q.push({functionName:"addon",arguments:["appnexus",{}]})}},4519:(t,e,n)=>{n.r(e),n.d(e,{FacebookV2Pixel:()=>a,load:()=>c});var r=n(9853),i=n(2652),o=n(2460);class s extends o.i{constructor(t,e,n){super(t,n);t.activationManager.getActivations(e).forEach((e=>{const n=e.getSegmentCode(),r=this.cachedSegmentsMembership.has(n);this.isFirstRun&&r?this.fire(e,r):t.permutive.trigger(n,"",(t=>{this.fire(e,t.result)}))}))}}class a extends s{constructor(t){super(t,"facebook_pixel_v2","addon:facebook_pixel_v2")}fire(t,e){fbq("trackCustom",!0===e?"PermutiveSegmentEntry":"PermutiveSegmentExit",{segment_id:t.getSegmentCode()}),t.trackImpression()}}const c=t=>{(0,r.Hn)("facebook_pixel_v2")("auto_init",!1)&&(0,i.a4)((()=>t.permutive.addon("facebook_pixel_v2",{})),(()=>"undefined"!=typeof fbq),{waitTimeInMs:1e3,maxAttempts:3})}},1840:(t,e,n)=>{n.r(e),n.d(e,{PubMaticAddon:()=>s,load:()=>o});var r=n(9853),i=n(2652);const o=t=>{(0,r.Hn)("pubmatic")("auto_init",!1)&&t.q.push({functionName:"addon",arguments:["pubmatic",{}]})};class s{constructor(t){const e=this;this.options=t;const n=(0,r.Hn)("pubmatic");this.defaultDpid=n("dpid",""),this.eligibleSegments={},this.liveDpidsToSegments={},this.activations=this.options.activationManager.getActivations("pubmatic");for(let t=0;t<this.activations.length;t++){const e=this.activations[t],n=e.getSegmentCode(),r=e.getConfig().dpid||this.defaultDpid;this.eligibleSegments[n]=this.eligibleSegments[n]||[],this.eligibleSegments[n].push(r)}const o=t.nextGenOutput.queryLanguageCohorts.all;void 0===this.options.permutiveData.getData("pubmatic")?this.updateIfNecessary(o.current):this.liveDpidsToSegments=this.dpidsToSegments(o.current),o.onChange((0,i.Z_)(t.api,t.userId,(t=>e.updateIfNecessary(t))))}updateIfNecessary(t){const e=this.dpidsToSegments(t);for(const t in e)e.hasOwnProperty(t)&&this.embedPixel(t,e[t]);this.options.state.setPermutiveData("pubmatic",(new Date).toISOString()),this.liveDpidsToSegments=e}embedPixel(t,e){if(!(0,i.cO)(e,this.liveDpidsToSegments[t])){const n="https:"===location.protocol?"https:":"http:",r=n+"//aud.pubmatic.com/AdServer/Artemis?uidtype=0&dpid="+t+"&segid="+e.join(",");(new Image).src=n+"//image6.pubmatic.com/AdServer/UCookieSetPug?rd="+encodeURIComponent(r)}}dpidsToSegments(t){const e={};for(let n=0;n<t.length;n++){const r=t[n];if(null!=this.eligibleSegments[r]){const t=this.eligibleSegments[r];for(let n=0;n<t.length;n++){const i=t[n];e[i]=e[i]||[],e[i].push(r)}}}return e}}},8563:(t,e,n)=>{n.r(e),n.d(e,{RubiconSspAddon:()=>c,load:()=>a});var r=n(3735),i=n(2652),o=n(2851);const s="_prubicons",a=t=>{t.q.push({functionName:"addon",arguments:["rubicon_ssp",{}]})};class c{constructor(t){this.options=t,this.liveSegments=[],this.eligibleSegments={},this.liveSegments=t.externalData.getExternalJsonData(s)||[];const e=this.options.activationManager.getSpecializedActivations("rubicon_ssp");for(let t=0;t<e.length;t++)this.eligibleSegments[e[t]]=!0;(0,r.zG)(t.nextGenOutput.queryLanguageCohorts.all,o.YP((t=>this.updateIfNecessary(t))))}updateIfNecessary(t){const e=this.filterSegments(t);(0,i.cO)(e,this.liveSegments)||this.options.externalData.setExternalJsonData(s,e),this.liveSegments=e}filterSegments(t){return t.filter((t=>t in this.eligibleSegments))}}},7416:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ScriptRunnerAddon:()=>ScriptRunnerAddon,load:()=>load});const load=t=>{t.q.unshift({functionName:"addon",arguments:["scriptrunner",{}]})};class ScriptRunnerAddon{constructor(options){this.permutive=options.permutive,this.options=options,this.api=options.api,this.activations=this.options.activationManager.getActivations("scriptrunner");for(let i=0;i<this.activations.length;i++){const activation=this.activations[i],triggerType=activation.getTriggerType(),segmentCode=activation.getSegmentCode(),run=activation=>{const script=activation.getConfig().script.replace(/impression\(\)/g,"activation.trackImpression();").replace(/conversion\(\)/g,"activation.trackConversion();");try{eval(script)}catch(t){t instanceof Error&&(t.message="Error running custom script: "+t.message,this.api.reportError(t,this.options.userId.get()))}};"EveryTime"===triggerType?this.permutive.segment(segmentCode,(t=>{t?run(activation):this.permutive.trigger(segmentCode,"result",(function(t){t.result&&run(activation)}))})):"OnEntry"===triggerType?this.options.queryManager.segmentEntryQueryCodes.has(segmentCode)?run(activation):this.permutive.trigger(segmentCode,"result",(function(t){t.result&&run(activation)})):"OnExit"===triggerType&&(this.options.queryManager.segmentExitQueryCodes.has(segmentCode)?run(activation):this.permutive.trigger(activation.getSegmentCode(),"result",(function(t){t.result||run(activation)})))}}}},3792:(t,e,n)=>{n.r(e),n.d(e,{PixelAddon:()=>s,load:()=>o});var r=n(9853),i=n(2652);const o=t=>{(0,r.Hn)("tracking_pixel")("auto_init",!1)&&t.q.push({functionName:"addon",arguments:["tracking_pixel",{}]})};class s{constructor(t){const e=this;this.options=t,this.latestStateByDomain=this.options.permutiveData.getData("addon:tracking_pixel")||{},this.activations=this.options.activationManager.getActivations("tracking_pixel");const n=0===Object.keys(this.latestStateByDomain).length;this.eligibleSegmentsForEntries={},this.eligibleSegmentsForExits={};for(let t=0;t<this.activations.length;t++){const e=this.activations[t],n=e.getTriggerType(),r=e.getSegmentCode(),i=e.getConfig().pixel_url,o=this.extractPixelType(i);"OnEntry"===n?(o in this.eligibleSegmentsForEntries||(this.eligibleSegmentsForEntries[o]={}),this.eligibleSegmentsForEntries[o][r]=e):"OnExit"===n&&(o in this.eligibleSegmentsForExits||(this.eligibleSegmentsForExits[o]={}),this.eligibleSegmentsForExits[o][r]=e)}const r=t.nextGenOutput.queryLanguageCohorts.all;n&&(0,i.Z_)(t.api,t.userId,(()=>this.firePixelsIfNecessary(r.current))),r.onChange((0,i.Z_)(t.api,t.userId,(t=>e.firePixelsIfNecessary(t))))}extractPixelType(t){return t.indexOf("://")>-1?t.split("/")[2]:t.split("/")[0]}firePixelsIfNecessary(t){const e=Object.keys(Object.assign(Object.assign({},this.eligibleSegmentsForEntries),this.eligibleSegmentsForExits)),n={},r=this.eligibleSegmentsForEntries,i=this.eligibleSegmentsForExits;e.forEach((e=>{n[e]=n[e]||[];for(let o=0;o<t.length;o++){const s=t[o];(r[e]&&r[e][s]||i[e]&&i[e][s])&&n[e].push(t[o])}})),e.forEach((t=>{const e=n[t]||[],o=Array.isArray(this.latestStateByDomain[t])?this.latestStateByDomain[t]:[];for(let n=0;n<e.length;n++){const i=e[n];if(-1===o.indexOf(i)){const e=r[t]&&r[t][i];"OnEntry"===(null==e?void 0:e.getTriggerType())&&this.firePixel(e)}}for(let n=0;n<o.length;n++){const r=o[n];if(-1===e.indexOf(r)){const e=i[t]&&i[t][r];"OnExit"===(null==e?void 0:e.getTriggerType())&&this.firePixel(e)}}})),this.latestStateByDomain=n,this.options.state.setPermutiveData("addon:tracking_pixel",this.latestStateByDomain)}firePixel(t){(new Image).src=t.getConfig().pixel_url,t.trackImpression()}}},4400:(t,e,n)=>{n.r(e),n.d(e,{WebAddon:()=>P,load:()=>S});var r=n(7582),i=n(2688),o=n(365),s=n(3735),a=n(4011),c=n(6567),u=n(7209),d=n(6341),l=n(922),m=n(9853),f=n(2652);const p=(0,m.MU)("add_alchemy_entities",!1),h=(0,m.MU)("add_alchemy_taxonomy",!1);function g(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object.assign(Object.assign(Object.assign({},t&&h?{taxonomy_labels:"$alchemy_taxonomy_labels"}:{}),t&&p?{entity_names:"$alchemy_entity_names"}:{}),{classifications_watson:{taxonomy_labels:"$taxonomy_labels"}})}function v(t,e,n,r){const i=Object.assign(Object.assign(Object.assign({isp_info:"$ip_isp_info",geo_info:"$ip_geo_info"},{}),t),e);n.track("Pageview",i).then((t=>{t&&r.emit("permutive:event:pageview",t)}))}function _(t,e,n,r,i,o){let s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:c.YP;const u=b(t,e,n,r,i),d=(0,c.fS)((()=>null))(a);let l={useBeacon:s};null!==d&&(l=Object.assign(Object.assign({},l),{unprocessedData:d})),o.track("PageviewComplete",u,l)}function b(t,e,n,r,i){return Object.assign(Object.assign(Object.assign({isp_info:"$ip_isp_info",geo_info:"$ip_geo_info"},r),n),{aggregations:Object.assign({PageviewEngagement:Object.assign({engaged_time:t},{completion:e})},l.ED?{SegmentEntry:Array.from(i.segmentEntryQueryCodes),SegmentExit:Array.from(i.segmentExitQueryCodes),CohortEntry:Array.from(i.cohortEntryQueryCodes),CohortExit:Array.from(i.cohortExitQueryCodes)}:{})})}var y=n(3992);const w=["mousemove","click","scroll"],k=["email","tel","submit","reset","button","file","password","radio","checkbox"],E=["email","e-mail","password","tel","telephone","phone","name_first","name_last","sa_zip"],S=t=>{(0,m.Hn)("web")("auto_init",!1)&&t.q.push({functionName:"addon",arguments:["web",{auto_init:!0}]})};class P{constructor(t){this.dirtyState=!1,this.cancelEngagementTimer=()=>{},this.totalCompletion=0,this.totalEngagedTime=0,this.cancelPageviewCompleteTimer=()=>{},this.hasPageviewCompleteFired=!1,this.cleanupPageEngagementDetection=s.Q1,this.permutive=t.permutive,this.options=t,this.api=t.api,this.clientContext=t.clientContext,this.logger=t.logger,this.unprocessedPVC=t.unprocessedEvents.PageviewComplete,this.options.customProperties.overrideCustomProps(t.page||{});this.pageEngagementDetected=(()=>{this.dirtyState=!0,l.Uy&&this.resetTimeout()}).bind(this),v(g(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.permutive,this.options.messages),this.enablePageEngagementDetection(),"loading"!==document.readyState?this.attachListeners():window.addEventListener("DOMContentLoaded",this.attachListeners.bind(this),!1),l.t2&&(this.cancelEngagementTimer=this.registerEngagementInterval(this.getEventInterval())),l.Uy&&(this.setPageviewCompleteTimeout(l.MU),(0,f.aT)((()=>{this.hasPageviewCompleteFired||_(this.totalEngagedTime,this.totalCompletion,g(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.options.queryManager,this.permutive)})))}sendFormSubmissionEvent(t){{const e=t.currentTarget,n={form:Object.assign(Object.assign(Object.assign({method:e.method||"GET",properties:this.serializeForm(e)},"string"==typeof e.id?{id:e.id}:{}),e.name&&"string"==typeof e.name?{name:e.name}:{}),e.action&&"string"==typeof e.action?{action:e.action}:{})};this.permutive.track("FormSubmission",n)}}trackEngagementInterval(t){return(0,r.mG)(this,void 0,void 0,(function*(){const e=this.updateState(t);!function(t,e,n,r,i,o){const s=Object.assign(Object.assign({isp_info:"$ip_isp_info",geo_info:"$ip_geo_info",engaged_time:t,total_engaged_time:e},i),{completion:n,total_completion:r});o.track("PageviewEngagement",s)}(e.engaged_time,e.total_engaged_time,e.completion,e.total_completion,this.options.customProperties.getCustomProps(),this.permutive),this.hasPageviewCompleteFired||(yield function(t,e,n,r,i,o,s,a,c){const u=b(t,e,s,a,c);return i.then((t=>{const e={props:u,sessionId:n,viewId:r,client:t};o.put(e)}))}(this.totalEngagedTime,this.totalCompletion,this.options.sessionManager.getSessionId(),this.options.viewId.get(),this.clientContext.getClient(),this.unprocessedPVC,g(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.options.queryManager))}))}reset(t){var e;return(0,r.mG)(this,void 0,void 0,(function*(){if(this.disablePageEngagementDetection(),l.Uy){const t=yield this.unprocessedPVC.getIfPresent();this.hasPageviewCompleteFired=!1,_(this.totalEngagedTime,this.totalCompletion,g(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.options.queryManager,this.permutive,!1,t)}this.dirtyState=!1,this.options.state.viewId.generateAndSet(),this.totalCompletion=0,this.totalEngagedTime=0,this.updateWebOptions(t),this.options.customProperties.overrideCustomProps(this.options.page||{}),this.enablePageEngagementDetection();const n={logger:this.logger,config:Object.assign(Object.assign({},this.options.config),{watson:null!==(e=this.options.watson)&&void 0!==e?e:this.options.config.watson}),clientContext:this.clientContext,api:this.api,permutiveData:this.options.permutiveData,metrics:this.options.metrics,sessionManager:this.options.sessionManager,enrichers:this.options.enrichers,network:this.options.network};(0,d.H)(n)().then((()=>{v(g(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.permutive,this.options.messages),l.t2&&(this.cancelEngagementTimer(),this.cancelEngagementTimer=this.registerEngagementInterval(this.getEventInterval()))}))}))}serializeForm(t){return[...t.getElementsByTagName("input")].filter((t=>!(!t.type||!t.id||t.disabled||t.checked||"fieldset"===t.nodeName.toLowerCase()||-1!==k.indexOf(t.type.toLowerCase())||-1!==E.indexOf(t.name.toLowerCase())))).map((t=>({name:t.name||t.id,value:t.value}))).filter((t=>t.value.length<120))}registerEngagementInterval(t){return(0,y.UM)((()=>{this.dirtyState&&this.trackEngagementInterval(t)}),1e3*t)}attachListeners(){const t=t=>"a"===t.tagName.toLowerCase(),e=t=>t instanceof Element,n=e=>t(e)?(0,c.G)(e):e.parentElement?t(e.parentElement)?(0,c.G)(e.parentElement):n(e.parentElement):c.YP;l.eV&&[].slice.call(document.getElementsByTagName("form"),0).forEach((t=>t.addEventListener("submit",(0,s.ls)(c.DT(this.canTrackPermutiveEvent("FormSubmission")),c.UI((0,f.Z_)(this.options.api,this.options.userId,this.sendFormSubmissionEvent.bind(this)))))));(0,m.MU)("track_link_click",!0)&&document.body.addEventListener("click",(0,s.ls)(c.DT(this.canTrackPermutiveEvent("LinkClick")),c.UI((t=>({event:t,anchor:(0,s.zG)(t.target,c.ij,c.tS(c.DT(e)),c.tS(n))}))),c.DZ((t=>{let{event:e,anchor:n}=t;return c.pC(n)?c.G({event:e,anchor:n.value}):c.YP})),c.UI((t=>{let{event:e,anchor:n}=t;return I(this.permutive,n,(r=e,!("_blank"===n.target||r.metaKey||r.ctrlKey||r.shiftKey||2===r.which||3===r.which)));var r}))),{capture:!0})}updateState(t){const e=Math.max(this.totalCompletion,this.getCurrentCompletion()),n=e-this.totalCompletion;return this.totalEngagedTime+=t,this.totalCompletion=e,this.dirtyState=!1,{engaged_time:t,total_engaged_time:this.totalEngagedTime,completion:n,total_completion:this.totalCompletion}}getCurrentCompletion(){if("function"==typeof this.options.getPageCompletion)return(0,s.zG)((0,o.Y3)((0,s.ls)(this.options.getPageCompletion,Number,(t=>isNaN(t)?0:t),(0,u.uZ)(a.Df)(0,1)),i.w),(0,o.EQ)((t=>(this.logger.warn("Web: invoking getPageCompletion threw an error. Got",t),0)),(t=>(this.logger.debug("Web: invoking getPageCompletion returned",t),t))));return(()=>{const t=document.documentElement.scrollHeight,e=window.pageYOffset+window.innerHeight;return e<=0?0:e>=t?1:e/t})()}setPageviewCompleteTimeout(t){return(0,y.HJ)((()=>{this.hasPageviewCompleteFired||(_(this.totalEngagedTime,this.totalCompletion,g(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.options.queryManager,this.permutive,!1),this.hasPageviewCompleteFired=!0)}),t)}resetTimeout(){this.cancelPageviewCompleteTimer(),this.cancelPageviewCompleteTimer=this.setPageviewCompleteTimeout(l.MU)}registerPageEngagementCleanup(t){"function"==typeof t?this.cleanupPageEngagementDetection=()=>(0,o.Y3)((()=>{t(),this.cleanupPageEngagementDetection=s.Q1}),(t=>this.logger.warn("Page detection cleanup threw an error",(0,i.w)(t)))):this.logger.warn("No page detection cleanup was registered")}enablePageEngagementDetection(){this.options.addPageEngagementDetection&&(0,s.zG)(this.options.addPageEngagementDetection(this.pageEngagementDetected),(t=>this.registerPageEngagementCleanup(t))),this.setDirtyEventListenersTo(!0,this.getDirtyEvents())}disablePageEngagementDetection(){this.cleanupPageEngagementDetection(),this.setDirtyEventListenersTo(!1,this.getDirtyEvents())}setDirtyEventListenersTo(t,e){const n=t?window.addEventListener:window.removeEventListener;return e.forEach((t=>n(t,this.pageEngagementDetected))),null}getDirtyEvents(){return this.options.dirtyEvents||w}getEventInterval(){return this.options.eventInterval||5}canTrackPermutiveEvent(t){return e=>{var n,r;return(0,s.zG)(null===(r=null===(n=this.options)||void 0===n?void 0:n.filterPermutiveEvent)||void 0===r?void 0:r[t],c.DT((t=>"function"==typeof t)),c.tS((0,s.ls)((t=>o.Y3((()=>t(e)),(t=>new Error(`Threw an unexpected error: ${(0,i.w)(t)}`)))),o.tS(o.DT((t=>"boolean"==typeof t),(()=>new Error("Did not return a boolean")))),(0,f.bw)(o.Vn((e=>this.logger.error(`Filter predicate for "${t}" event failed`,e)))),c.Uo)),c.fS((()=>!0)))}}updateWebOptions(t){t.watson&&"object"==typeof t.watson&&"enabled"in t.watson&&"boolean"==typeof t.watson.enabled||delete t.watson,"object"==typeof t.filterPermutiveEvent&&null!==t.filterPermutiveEvent||delete t.filterPermutiveEvent;const e={addPageEngagementDetection:void 0,dirtyEvents:void 0,eventInterval:void 0,filterPermutiveEvent:void 0,getPageCompletion:void 0,page:void 0,watson:void 0};return this.options=Object.assign(Object.assign(Object.assign({},this.options),e),t)}}const I=(t,e,n)=>{if(window.location.href&&e.href){const r=0===e.href.indexOf("data:")?"NOT_URL":e.href;t.track("LinkClick",{dest_url:r},{useBeacon:n})}}},9078:(t,e,n)=>{n.d(e,{a:()=>r});class r{constructor(t){var e;this.messages=t,this.handlers={},this.messageQueue={};null===(e=window.addEventListener)||void 0===e||e.call(window,"message",(t=>{var e;"permutive"===(null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.origin)&&this.handle(t)}),!1),this.messages.once("permutive:api:ready",(function(){var t;null===(t=window.postMessage)||void 0===t||t.call(window,{origin:"permutive",type:"sdk-init"},"*")}))}listen(t,e){if(t in this.handlers||(this.handlers[t]=[]),this.handlers[t].push(e),t in this.messageQueue){const e=this.messageQueue[t];if(void 0===e)return;for(let t=0;t<e.length;t++){const n=e[t];this.handle(n)}}}handle(t){var e,n,r;if(t.data.type in this.handlers)this.handlers[t.data.type].forEach((e=>{e(t)}));else{(null!==(e=(n=this.messageQueue)[r=t.data.type])&&void 0!==e?e:n[r]=[]).push(t)}}}},533:(t,e,n)=>{n.d(e,{o:()=>r,s:()=>i});class r extends Error{constructor(){super(r.defaultMessage),this.name=r.errorName}static get defaultMessage(){return"Network request failed"}}r.errorName="NetworkRequestFailedError";class i extends Error{constructor(){super(i.defaultMessage),this.name=i.errorName}static get defaultMessage(){return"Network request timed out"}}i.errorName="NetworkRequestTimeoutError"},7423:(t,e,n)=>{n.d(e,{F:()=>d});var r=n(7582),i=n(2688),o=n(3735),s=n(6567),a=n(3328),c=n(3030),u=n(533);class d{constructor(t,e,n,r,i){this.urls=t,this.config=e,this.network=n,this.metricsCollector=r,this.logger=i,this.prefix="[API]"}identify(t,e,n){const r=()=>this.reqWithMetrics(t,"sdk_http_identify_seconds",{url:this.urls.getEndpointUrl("/identify",s.G(this.config.apiVersion)),method:"POST",payload:{user_id:e.get(),aliases:n},contentType:"text/plain",dataType:"json",withCredentials:!0});return this.identifyPromise?this.identifyPromise=this.identifyPromise.then(r):this.identifyPromise=r()}metrics(t){return this.network.req({url:this.urls.getEndpointUrl("/internal/metrics",s.G(this.config.apiVersion)),method:"POST",payload:t,contentType:"text/plain",dataType:"text",withCredentials:!1})}metricsBeacon(t){return this.network.reqWithBeacon({url:this.urls.getEndpointUrl("/internal/metrics",s.G(this.config.apiVersion)),payload:t})}track(t,e,n){const r=this.getTrackUrl(e,{isFullyEnriched:n,useBeacon:!1});return this.reqWithMetrics(t,"sdk_http_events_seconds",{url:r,method:"POST",payload:e,contentType:"text/plain",dataType:"json",withCredentials:!1})}trackBatch(t,e){const n=this.getTrackUrl(e,{isFullyEnriched:!0,useBeacon:!1});return this.reqWithMetrics(t,"sdk_http_events_seconds",{url:n,method:"POST",payload:e,contentType:"text/plain",dataType:"json",withCredentials:!1})}trackBeacon(t,e){const n=this.getTrackUrl(t,{isFullyEnriched:e,useBeacon:!0});return this.network.reqWithBeacon({url:n,payload:t})}trackBatchBeacon(t){const e=this.getTrackUrl(t,{isFullyEnriched:!0,useBeacon:!0});return this.network.reqWithBeacon({url:e,payload:t})}reset(t){return this.reqWithMetrics(t,"sdk_http_reset_seconds",{url:this.urls.getEndpointUrl("/reset",s.G(this.config.apiVersion)),method:"POST",payload:null,contentType:"text/plain",dataType:"json",withCredentials:!0})}segmentSync(t){return this.network.req({url:`https://${this.config.segmentSyncApiHost}/sync/${t.key}`,method:"POST",payload:`value=${encodeURIComponent(t.value)}`,contentType:"application/x-www-form-urlencoded",dataType:"json",withCredentials:!0})}modelsBinary(t){return this.reqWithMetrics(t,"sdk_http_models_seconds",{url:this.getModelsUrl("binary"),method:"GET",contentType:"text/plain",dataType:"binary",withCredentials:!1})}modelsJson(t){return this.reqWithMetrics(t,"sdk_http_models_seconds",{url:this.getModelsUrl("json"),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!1})}state(t,e,n,r,i,o){return this.reqWithMetrics(t,"sdk_http_reset_seconds",{url:this.urls.getEndpointUrl("/state",s.G("v1.0"),[["fetch_unseen",JSON.stringify(o)]]),method:"POST",payload:{group_id:e,event_source_id:n,state:JSON.stringify(r),last_seen_offset:i},contentType:"text/plain",dataType:"json",withCredentials:!1})}appnexus(t){return this.network.req({url:t,method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!0,timeout:2e3})}pxid(t){return this.network.req({url:this.urls.makeAuthenticatedUrl(t),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!0,timeout:2e3})}queries(){const t={addons:{dfp:{activations:{dfp:[],dfp_legacy:{}},auto_init:!0,track_slot_rendered:!1,track_slot_viewable:!1,track_slot_clicked:!1,track_targeting_keys:!1,sync_segments_cookie:!1},web:{auto_init:!1,track_pageview_engagement:!0,track_pageview_complete:!0,track_form_submission:!1,track_link_click:!1,engagement_edge_only:!0,segment_transition_edge_only:!1}},queries:{queries:{},eventSegments:{},eventsLookup:[],literalsLookup:[],subexpressionsLookup:[],stateSyncReplays:[],propertiesLookup:[]},queries_metadata:{}},e=`${this.config.cdnBaseUrl.startsWith("dev.local:")?"http":"https"}://${this.config.cdnBaseUrl}/queries/67cbf6c5-d926-407b-a684-a0606570ff08-amp.json`;return this.network.req({url:e,withCredentials:!1,dataType:"json",method:"GET"}).catch((()=>t))}pxidReset(t){return this.network.req({url:this.urls.makeAuthenticatedUrl(t),method:"POST",payload:null,contentType:"text/plain",dataType:"json",withCredentials:!0})}uploadCohortMemberships(t,e){return this.reqWithMetrics(t,"sdk_http_upload_cohort_memberships_seconds",{url:this.urls.getCCSCohortMembershipEndpointUrl("/amp/cohorts",s.G("alpha"),[["i",e.user_id]]),method:"POST",payload:e,contentType:"text/plain",dataType:"json",withCredentials:!1})}reqWithMetrics(t,e,n){const r=t.startTimer(e,{});return this.network.req(n).then((n=>(0,o.zG)(t.stopTimer(e,r),(t=>n))))}reportError(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;return(0,r.mG)(this,void 0,void 0,(function*(){const d=(0,i.w)(t);if(this.logError("Reporting error:\n",d),!this.config.sendClientErrors)return void this.logDebug("Send errors not enabled. Skipping");const l=t=>this.network.req({url:this.urls.getSdkErrorsUrl("/errors",s.G(this.config.sdkErrorsApiVersion)),method:"POST",payload:[t],contentType:"text/plain",dataType:"text",withCredentials:!1}),m=t=>{this.metricsCollector.track({name:"sdk_http_generic_network_request_fail_count_total",value:1,labels:{network_error_type:t}})};yield(0,o.zG)([u.o,u.s],a.Ew((t=>d.name===t.errorName||d.message.indexOf(t.errorName)>=0||d.message.indexOf(t.defaultMessage)>=0)),s.g_((()=>{const t=(()=>{var t,r,i,o,s,a,u,l;const m={error_message:null!==(r=null===(t=null==d?void 0:d.message)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",stack_trace:null===(i=null==d?void 0:d.stack)||void 0===i?void 0:i.split("\n")},f=e?{user_id:e}:{};return Object.assign({platform:"web",sdk_version:"v19.101.0",ql_runtime_version:"v10.0.2",timestamp:n,domain:null!==(s=null===(o=null===window||void 0===window?void 0:window.location)||void 0===o?void 0:o.hostname)&&void 0!==s?s:"",url:(0,c.bk)(null===(a=null===window||void 0===window?void 0:window.location)||void 0===a?void 0:a.href),referrer:(0,c.bk)(null===document||void 0===document?void 0:document.referrer),user_agent:null!==(u=null===navigator||void 0===navigator?void 0:navigator.userAgent)&&void 0!==u?u:"",error_message:null!==(l=m.error_message)&&void 0!==l?l:String(d),stack_trace:m.stack_trace},f)})();return l(t).catch((0,o.ls)(i.w,(t=>this.logError(t))))}),(t=>(0,r.mG)(this,void 0,void 0,(function*(){return m(t.errorName)})))))}))}getTrackUrl(t,e){const{isFullyEnriched:n,useBeacon:r}=e,i=Array.isArray(t),o=!n;return this.urls.getEndpointUrl(i?"/batch/events":"/events",s.G(this.config.apiVersion),[["enrich",JSON.stringify(o)],["sdkp",JSON.stringify(!r)]])}getModelsUrl(t){const e=`https://${this.config.cdnBaseUrl}`;switch(t){case"binary":return`${e}/models/v2/67cbf6c5-d926-407b-a684-a0606570ff08-models.bin`;case"json":return`${e}/models/67cbf6c5-d926-407b-a684-a0606570ff08-models.json`}}logDebug(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.logger.debug(this.prefix,...e)}logError(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.logger.error(this.prefix,...e)}}},4586:(t,e,n)=>{n.d(e,{E:()=>a});var r=n(365),i=n(3735),o=n(533),s=n(3992);class a{constructor(){}req(t){return this.reqImpl(t).then((t=>(0,i.MZ)(t)))}reqWithBeacon(t){let{url:e,payload:n}=t;return null===navigator||void 0===navigator?void 0:navigator.sendBeacon(e,JSON.stringify(n))}reqImpl(t){const{url:e,dataType:n,contentType:i,method:a,withCredentials:c,timeout:u}=t;return new Promise(((d,l)=>{const m=new XMLHttpRequest,f="POST"===t.method?"string"==typeof(p=t.payload)?p:JSON.stringify(p):null;var p;m.onload=(0,s.GL)((function(){if(m.status>=400){const t="text"===m.responseType||""===m.responseType?m.responseText:"Couldn't access response text";l(`Failed ajax request. Status code was ${m.status}. ${t}`)}else if("json"===n){const t=m.responseText?(0,r.Y3)((()=>JSON.parse(m.responseText)),(t=>`Failed to parse response as JSON. Response was ${JSON.stringify(m.responseText)}. Got ${t}`)):(0,r.F2)(null);(0,r.g_)(l,d)(t)}else d("text"===n?m.responseText:m.response)})),m.onerror=(0,s.GL)((()=>l(new o.o))),m.ontimeout=(0,s.GL)((()=>l(new o.s))),m.open(a,e,!0),i&&m.setRequestHeader("content-type",i),m.timeout=u||m.timeout,m.withCredentials=c||m.withCredentials,m.responseType="binary"===n?"arraybuffer":m.responseType,m.send(f)}))}}},310:(t,e,n)=>{n.d(e,{s:()=>i});var r=n(6567);class i{constructor(t){this.config=t,this.PATH_JOINER_Q="?",this.PATH_JOINER_A="&"}getEndpointUrl(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("base",t,e,n)}getSdkErrorsUrl(t,e){return this.getUrl("sdk-errors",t,e,[])}getAdvertiserEndpointUrl(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("adv",t,e,n)}getClassificationModelsEndpointUrl(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("clm",t,e,n)}getAudienceMatchingEndpointUrl(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];const i=`${t}/${n}/audiences`;return this.getUrl("audience-matching",i,e,r)}getCCSCohortMembershipEndpointUrl(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("ccs",t,e,n)}makeAuthenticatedUrl(t){return this.makeUrlWithQueryParams(t,[["k",this.config.apiKey]])}getUrlPrefix(t){switch(t){case"base":return"";case"adv":return"/adv";case"sdk-errors":return"/sdk-errors";case"clm":return"/clm";case"audience-matching":return"/audience-matching";case"ccs":return"/ccs"}}getUrl(t,e,n,i){const o=this.getUrlPrefix(t),s=(0,r.g_)((()=>""),(t=>`/${t}`))(n),a=`${this.config.apiProtocol}://${this.config.apiHost}${o}${s}${e}`;return this.makeUrlWithQueryParams(a,i.concat([["k",this.config.apiKey]]))}makeUrlWithQueryParams(t,e){const n=e.map((t=>{let[e,n]=t;return`${e}=${n}`})).join(this.PATH_JOINER_A),r=t.includes(this.PATH_JOINER_Q)?this.PATH_JOINER_A:this.PATH_JOINER_Q;return`${t}${r}${n}`}}},2271:(t,e,n)=>{n.r(e),n.d(e,{nextGenWeb:()=>Ke,runNextGenFeaturesWeb:()=>Be});var r=n(7582),i=n(2116);class o{constructor(){this.events=[],this.listeners=[]}newEvent(t,e){this.events.push([t,e]),[...this.listeners].forEach((n=>{this.handle(t,e,n)}))}addListener(t){this.listeners.push(t);const e={replay:()=>(this.replay(t),e),remove:()=>(this.remove(t),e)};return e}handle(t,e,n){const r="string"==typeof n.name&&t.name===n.name,i=n.name.test&&n.name.test(t.name),o=r||i;if(o)try{n.callback(t,e)}catch(t){window.console&&window.console.error&&window.console.error("callback error: ",t)}o&&n.once&&this.remove(n)}replay(t){let e=-1!==this.listeners.indexOf(t);for(let n=0;n<this.events.length&&e;n++)this.handle(this.events[n][0],this.events[n][1],t),e=-1!==this.listeners.indexOf(t)}remove(t){const e=this.listeners.indexOf(t);-1!==e&&this.listeners.splice(e,1)}}var s=n(2688),a=n(3735);const c=t=>({id:t.id,name:t.name,time:new Date(t.time),properties:t.properties||{},session_id:t.session_id,view_id:t.view_id}),u=t=>({id:t.id,name:t.name,time:(m(t.time)?t.time:new Date).toISOString(),properties:t.properties||{},session_id:t.session_id,view_id:t.view_id}),d=(t,e)=>({id:t.id,time:new Date(t.time),name:e.name,properties:e.properties,session_id:e.session_id,view_id:e.view_id}),l=t=>void 0!==t.request_id,m=t=>isFinite(t)&&t instanceof Date;var f=n(4730);class p{constructor(t,e,n,r,i){this.eventHandler=t,this.api=e,this.metrics=n,this.userId=r,this.eventsCache=i,this.DEBOUNCE_TIME=500,this.MAX_DEBOUNCE_TIME=5e3,this.batch={requestData:[],requestOptions:[],processingStrategies:[]},this.scheduler=new f.b(this.DEBOUNCE_TIME,this.MAX_DEBOUNCE_TIME),this.debouncedFlushIfNotEmpty=this.scheduler.schedule(this.flush.bind(this)),this.scheduler.scheduleForPageUnload((()=>this.flushWithBeacon.bind(this)(this.batch)))}add(t,e,n){return this.batch.requestData.push(t),this.batch.requestOptions.push(e),this.batch.processingStrategies.push(n),this.debouncedFlushIfNotEmpty(this.batch),Promise.resolve()}flush(t){return this.flushIfNotEmpty(t,!1)}flushWithBeacon(t){return this.flushIfNotEmpty(t,!0)}flushIfNotEmpty(t,e){const{requestData:n,requestOptions:r,processingStrategies:i}=t,o=t=>this.api.reportError(`Error sending events batch. Got ${(0,s.w)(t)}`,this.userId.get()),c=e?(0,a.ls)((t=>this.api.trackBatchBeacon(t)),(t=>Promise.resolve())):t=>this.api.trackBatch(this.metrics,t);return n.length>0?(0,a.zG)(this.resetBatch(),(t=>this.trackMetrics(n)),(t=>c(n).then((t=>this.isBatchResponse(t)?this.onBatchResponseSuccess(t,n,r,i):(0,a.Q1)())).catch(o))):Promise.resolve()}onBatchResponseSuccess(t,e,n,r){const i=(t,e)=>{"never"!==e&&(this.eventHandler.newEvent(u(t),null),this.eventsCache.add(t,{persistOnDisk:!0}))},o=(t,e,n)=>{const r={name:e.name,session_id:e.session_id,view_id:e.view_id,properties:e.properties,time:(new Date).toISOString()};n&&n(t.error.message),console.error(t),this.eventHandler.newEvent(r,t)};return t.forEach(((t,s)=>{let{body:a}=t;const c=e[s],u=n[s],m=r[s];return l(a)?o(a,c,u.error):((t,e,n,r)=>{const o=d(t,e);return r&&r(o),i(o,n)})(a,c,m,u.success)}))}resetBatch(){this.batch={requestData:[],requestOptions:[],processingStrategies:[]}}trackMetrics(t){this.metrics.track({name:"sdk_events_batch_size_total",value:t.length,labels:{}}),this.metrics.track({name:"sdk_events_batch_size_bytes",value:2*JSON.stringify(t).length,labels:{}})}isBatchResponse(t){return!!t}}var h=n(6567),g=n(7407),v=n(1828),_=n(922);const b=(t,e,n)=>n?"deferred":y(t.name,e),y=(t,e)=>C.has(t)?"memoryOnly":x.has(t)?"never":e?"immediate":"response",w=t=>{let{event:e,requestData:n,requestOptions:r,queryManager:i,eventsBatch:o,stateSync:s,metrics:c,logger:u}=t;const d=(t,e)=>{const n=new Set(t);for(const t of e)n.delete(t);return n};return(0,a.zG)(T(e,c,i,u),g.YO("update"),g.ak("updatedSegments",(t=>{let{update:[,e]}=t;return g.tD((()=>d(new Set([...n.segments,...e.segmentsEntered]),e.segmentsExited)))})),g.ak("updatedCohorts",(t=>{let{update:[,e]}=t;return g.tD((()=>d(new Set([...n.cohorts,...e.cohortsEntered]),e.cohortsExited)))})),g.At((t=>{let{updatedCohorts:n,updatedSegments:r}=t;return()=>u.debug(`Batching ${e.name} with`,{segments:r,cohorts:n})})),g.tS((t=>{let{update:[e],updatedSegments:i,updatedCohorts:a}=t;return v.gz(g.oE)((()=>o.add(Object.assign(Object.assign({},n),{segments:[...i],cohorts:[...a]}),r,"immediate")),(()=>s.sync(e)))})),g.UI(a.Q1))},k=t=>{let{event:e,metrics:n,queryManager:r,logger:i}=t;return(0,a.zG)(T(e,n,r,i),g.UI(a.Q1))},E=t=>{let{requestData:e,requestOptions:n,queryManager:r,eventsCache:i,eventHandler:o,api:s,metrics:c,logger:u}=t;return(0,a.zG)((()=>s.track(c,e,!1)),g.tS((t=>I(t,e,n,i,c,r,u))),g.UI((t=>M(o,t.event,t.error))))},S=t=>{let{event:e,isEventFullyEnriched:n,requestData:r,api:i,eventHandler:o}=t;return g.tD((()=>{i.trackBeacon(r,n),M(o,e,h.YP)}))},P=t=>{let{requestData:e,requestOptions:n,eventsBatch:r}=t;return()=>r.add(e,n,"never")},I=(t,e,n,r,i,o,s)=>l(t)?D(t,e,n):O(t,e,n,r,i,o,s),D=(t,e,n)=>{const r=new Date;return g.tD((()=>{const i={name:e.name,session_id:e.session_id,view_id:e.view_id,properties:e.properties,time:r};return"function"==typeof n.error&&n.error(t.error.message),{event:i,error:(0,h.G)(t)}}))},O=(t,e,n,r,i,o,s)=>(0,a.zG)(g.tD((()=>(t=>void 0!==t.properties)(t)?c(Object.assign(Object.assign({},t),{session_id:e.session_id,view_id:e.view_id})):d(t,e))),g.mU((t=>T(t,i,o,s))),g.At((t=>()=>{"function"==typeof n.success&&n.success(t)})),g.mU((t=>()=>r.add(t,{persistOnDisk:!0}))),g.UI((t=>({event:t,error:h.YP})))),T=(t,e,n,r)=>{const i=g.tD((()=>(0,a.bc)({},{segmentsEntered:new Set,segmentsExited:new Set,cohortsEntered:new Set,cohortsExited:new Set}))),o="sdk_events_querylanguage_seconds",s=(0,a.zG)(g.tD((()=>e.startTimer(o,{}))),g.YO("qlMetricKey"),g.ak("update",(()=>n.process(t,!0))),g.UI((n=>{let{qlMetricKey:i,update:s}=n;return e.stopTimer(o,i),r.debug("[Processing]","Processing event",t,"caused the following update",s),s})));return A.has(t.name)?s:i},M=(t,e,n)=>{t.newEvent(u(e),(0,a.zG)(n,h.fS((()=>null))))},x=new Set(["ThirdPartySegments","SlotRendered","PrebidAuctions"]),C=new Set([..._.D0?["PageviewEngagement"]:[],..._.ED?["SegmentEntry","SegmentExit"]:[]]),q=new Set(["PageviewComplete"]),A=new Set(["!UpdateThirdPartyData","FormSubmission","LinkClick","Pageview","PageviewComplete","PageviewEngagement","SlotClicked","SlotViewable"]);function U(t,e,n){const{api:s,enrichers:c,logger:u,metrics:d,queryManager:l,stateSync:m,unprocessedPVC:f,userId:v}=t;return i.K4((()=>{const t=new o,i=new p(t,s,d,v,n);return{allEvents:()=>n.all(),getStateSizeInBytes:()=>n.getStateSizeInBytes(),on:(e,n)=>t.addListener({name:e,callback:n,once:!1}),once:(e,n)=>t.addListener({name:e,callback:n,once:!0}),reset:t=>n.reset(t),track:o=>{var{client:p,event:v,useBeacon:_}=o,y=(0,r._T)(o,["client","event","useBeacon"]);const{output:I,isFullyEnriched:D}=c.enrich(v.properties,C.has(v.name)),O=Object.assign(Object.assign({},I),{client:p});d.track({name:D?"sdk_event_enrichment_success_count":"sdk_event_enrichment_fail_count",value:1,labels:{}});const T=(0,a.zG)(e.nonQlCohorts.current,h.fS((()=>[]))),M={user_id:e.userId.current,name:v.name,cohorts:[...T,...e.qlCohorts.current.map(String)],segments:e.qlCohorts.current,properties:O,session_id:v.session_id,view_id:v.view_id};return((t,e)=>(0,a.zG)(b(t.event,t.isEventFullyEnriched,e),(e=>{switch(e){case"immediate":return w(t);case"memoryOnly":return k(t);case"response":return E(t);case"deferred":return S(t);case"never":return P(t)}}),g.tS((()=>q.has(t.event.name)?()=>t.unprocessedPVC.reset():g.of(void 0)))))(Object.assign(Object.assign({},y),{api:s,event:Object.assign(Object.assign({},v),{properties:O}),eventsBatch:i,eventsCache:n,eventHandler:t,isEventFullyEnriched:D,logger:u,metrics:d,queryManager:l,requestData:M,stateSync:m,unprocessedPVC:f}),_)()},__deprecated_eventsCache:n}}))}var G=n(3992);class j{constructor(){this.crypto=window.crypto||window.msCrypto,this.ALG_NAME="AES-GCM"}isAvailable(){var t;return!!(null===(t=this.crypto)||void 0===t?void 0:t.subtle)}generateKey(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,G.t_)(this.crypto.subtle.generateKey({name:this.ALG_NAME,length:256},t,["encrypt","decrypt"]))}encrypt(t,e){const[n,r]=this._encrypt(t,this.str2bytes(e));return n.then((t=>{const e=new Uint8Array(16+t.byteLength);return e.set(r,0),e.set(new Uint8Array(Uint32Array.of(t.byteLength).buffer),12),e.set(new Uint8Array(t),16),e.buffer}))}decrypt(t,e){const n=new Uint8Array(e,0,12),r=new Uint32Array(e,12,1)[0],i=e.slice(16,16+r);return this._decrypt(t,n,i).then(this.bytes2str)}_encrypt(t,e){const n=this.crypto.getRandomValues(new Uint8Array(12));return[(0,G.t_)(this.crypto.subtle.encrypt({name:this.ALG_NAME,iv:n},t,e)),n]}_decrypt(t,e,n){return(0,G.t_)(this.crypto.subtle.decrypt({name:this.ALG_NAME,iv:e},t,n))}str2bytes(t){return(new TextEncoder).encode(t).buffer}bytes2str(t){return(new TextDecoder).decode(t)}}var z=n(365),R=n(6934);var L=n(7554);class B extends Error{constructor(t){super(t),this.name="StoreClosingError"}}class K{constructor(t,e,r,i,o,s,a,c,u,d){this.version=3;{const l=n(2546);this.db=l.make(t,e,r,i,o,s,a,c,this.version,u,d)().then((0,z.fS)((t=>(0,L.E)(e,u,d))))}}shouldThrowStoreClosingError(t){return"NotFoundError"===t.name||"InvalidStateError"===t.name}makeStoreClosingDuringOpertationError(t){return new B(`Attempted ${t} when the current store is closing.`)}put(t,e){return(0,R.Y3)((()=>this.db.then((n=>n.put(t,e)))),(t=>{const e=(0,s.w)(t);return this.shouldThrowStoreClosingError(e)?this.makeStoreClosingDuringOpertationError("put"):e}))}get(t){return(0,R.Y3)((()=>this.db.then((e=>e.get(t))).then(h.ij)),(t=>{const e=(0,s.w)(t);return this.shouldThrowStoreClosingError(e)?this.makeStoreClosingDuringOpertationError("get"):e}))}delete(t){return(0,R.Y3)((()=>this.db.then((e=>e.delete(t)))),(t=>String(t)))}deleteStore(){return(0,R.Y3)((()=>this.db.then((t=>t.deleteStore()))),(t=>String(t)))}}var $=n(3328),W=n(2652);const N="permutive-events-cache",F="permutive-events-for-page",Y="[EVENTSCACHE]",Q=t=>"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name;class H{constructor(t,e,n,r,i,o,s,c){this.config=t,this.namespace=e,this.logger=n,this.api=r,this.trace=i,this.metrics=o,this.userId=s,this.makeEventsStore=c,this.eventsCache=this.makeEventsRepository(N),this.eventsForPage=this.makeEventsRepository(F),this.debouncedReportError=(()=>new f.b(5e3,5e3).schedule((t=>this.api.reportError(t.errorMessage,t.userId))))(),this.eventStore=c(),this.eventsTTLInMilliseconds=(0,a.zG)((0,h.ij)(this.config.eventsTTLInDays),(0,h.tS)((t=>"number"==typeof t&&t>0?(0,h.G)(24*t*3600):h.YP))),this.eventsCache.events=(0,W.HP)((()=>(0,W.PQ)((0,a.zG)(g.tD((()=>this.trace.startSpan("load_event_cache"))),g.tS((t=>(0,a.zG)(this.loadFromDisk(),g.At((e=>()=>{t.finish(),this.logDebug(`Event cache loaded, #e ${e.length}`)}))))))))),this.readiness=this.eventsCache.events().then((()=>this.migratePreviousPagesEvents()))}migratePreviousPagesEvents(){return(0,r.mG)(this,void 0,void 0,(function*(){const t=this.trace.startSpan("migrate_previous_for_page_events"),e=(0,g.pE)((t=>(0,R.Y3)((()=>t.flush()),s.w)));return(0,a.zG)([this.eventsForPage,this.eventsCache],e,(0,g.UI)((e=>{const n=$.bj(e);return n.length>0&&this.api.reportError(`Migrate previous events failed. Got:\n${n.join("\n ")}`,this.userId.get()),t.finish()})),(t=>t()))}))}all(){return Promise.all([this.eventsCache.events(),this.eventsForPage.events()]).then($.xH)}add(t,e){let{persistOnDisk:n}=e;return(0,r.mG)(this,void 0,void 0,(function*(){return this.logDebug("Adding to cache",t),this.eventsForPage.events=(0,a.zG)(this.eventsForPage.events,g.UI((e=>[...e,t])),W.HP),n&&this.readiness.then((()=>this.eventsForPage.flush())),t}))}filterEventsByWorkspace(t){return t}pruneEventsToSizeLimit(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.config.eventsCacheLimitBytes;if(n<=0||e<=n)return this.logDebug(`Event size of ${e} less than limit of ${n}`),{events:t,sizeInBytes:e};this.logDebug("Events before pruning",{count:t.length,sizeInBytes:e,byteLimit:n});let r=1,i=[...t];for(;e>n;)i.splice(0,r),r*=2,e=2*JSON.stringify(i).length;return this.logDebug("Events after pruning",{count:i.length,sizeInBytes:e}),{events:i,sizeInBytes:e}}loadFromDisk(){const t=()=>[],e=(0,a.zG)(this.eventsTTLInMilliseconds,h.EQ((()=>a.yR),(t=>$.hX((e=>t>Date.now()-e.time.getTime())))));return(0,a.zG)(g.tD((()=>(this.logLog("Loading event cache..."),this.metrics.startTimer("sdk_load_events_cache_task_duration_seconds",{})))),g.YO("loadEventsCacheTask"),g.ak("eventsFromDisk",(()=>(0,a.zG)($.nI([this.eventStore.get(N),this.eventStore.get(F)]),$.UI(R.LV((0,W.lo)([[t=>t instanceof B,(0,a.ls)(t,g.of)],e=>(0,a.zG)((()=>this.api.reportError(`Error fetching data from store. Got ${e}`,this.userId.get())),g.tS((()=>()=>this.reset("historical"))),g.UI(t))]),(0,a.ls)(h.fS(t),g.of))),$.vP(g.qA)))),g.At((t=>{let{eventsFromDisk:e,loadEventsCacheTask:n}=t;return()=>{this.logDebug("Read events from store:",e),this.metrics.stopTimer("sdk_load_events_cache_task_duration_seconds",n)}})),g.UI((0,a.ls)((0,W.vg)("eventsFromDisk"),$.xH,this.filterEventsByWorkspace,(t=>this.pruneEventsToSizeLimit(t,2*JSON.stringify(t).length)),(t=>(this.eventsCache.sizeInBytes=t.sizeInBytes,this.eventsCache.sizeInBytesLastSuccessfulWrite=t.sizeInBytes,t.events.length>0&&(this.metrics.track({name:"sdk_events_cache_byte_total",value:t.sizeInBytes,labels:{}}),this.metrics.track({name:"sdk_events_cache_size_total",value:t.events.length,labels:{}})),t.events)),$.UI(c),e)))}reset(t){return(0,r.mG)(this,void 0,void 0,(function*(){return(0,a.zG)(g.tD((()=>this.logDebug("Resetting Events Cache"))),g.tS((()=>this.eventStore.deleteStore())),R.Zl((()=>(this.eventStore=this.makeEventsStore(),"historical"===t?v.gz(R.Ij)(this.eventsCache.reset,this.eventsForPage.flush):v.gz(R.Ij)(this.eventsCache.reset,this.eventsForPage.reset)))),R.wE((()=>()=>this.all())),R.fS((()=>g.of(V()))),(t=>t()))}))}getStateSizeInBytes(){return this.eventsForPage.sizeInBytes+this.eventsCache.sizeInBytes}makeEventsRepository(t){const e=(()=>{let t=Promise.resolve(z.F2((0,a.Q1)()));return e=>t=t.then(e)})(),n=t=>(0,a.zG)(g.tD((()=>this.logDebug(`Writing ${t.length} events to ${f.key}`))),g.tS((()=>this.eventStore.put(t.map(u),f.key))),R.UI(a.Q1)),r=(0,a.zG)(g.tD((()=>this.logDebug(`Deleting events for ${f.key}`))),g.tS((()=>this.eventStore.delete(f.key))),R.Vn(s.w)),i=(0,a.ls)(g.of,g.At((t=>()=>this.logError(`Events cache failed to put ${f.key}. Got ${t}`))),g.tS((0,W.lo)([[t=>Q(t)&&f.retryAttempts<9,()=>(0,a.zG)(g.tD((()=>{f.retryAttempts+=1,this.logDebug(`Attempt #${f.retryAttempts} to write ${f.key} to EventsStore`)})),g.tS((()=>m)),g.tS((()=>c)))],[t=>Q(t),t=>(0,a.zG)(g.tD((()=>this.logDebug(`Attempted ${f.retryAttempts} rewrite attempts and reached limit of 9 max writes.`,"Reporting QuotaExceededError to API"))),g.tS((()=>()=>this.debouncedReportError({errorMessage:`Events cache failed to put ${f.key}. Got ${t}`,userId:this.userId.get()}))),g.tS((()=>R.t$(t))))],R.t$]))),o=t=>R.tD((()=>{this.logDebug(`Successfully wrote events for ${f.key} after ${f.retryAttempts} attempts`),f.retryAttempts=0,f.sizeInBytes=2*JSON.stringify(t).length,f.sizeInBytesLastSuccessfulWrite=f.sizeInBytes})),c=(0,a.zG)((()=>f.events()),g.tS((t=>(0,a.zG)(n(t),g.mU(z.EQ(i,(()=>o(t)))))))),d=(t,e)=>(0,a.zG)(t.events,g.UI((n=>{const r=2*JSON.stringify(n).length,i=this.pruneEventsToSizeLimit(n,r,e);return t.events=g.of(i.events),t.sizeInBytes=i.sizeInBytes,e-t.sizeInBytes}))),l=(t,e)=>{let[n,...r]=t;return n&&0!==e?(0,a.zG)(d(n,e),g.tS((t=>(this.logDebug(`${t} left after pruning ${n.key}`),l(r,t))))):g.of((0,a.Q1)())},m=(0,a.zG)(R.tD((()=>this.eventsForPage.sizeInBytes-this.eventsForPage.sizeInBytesLastSuccessfulWrite)),R.fX(z.DT((t=>t>0),(t=>new Error(`${this.eventsForPage.key} failed to write the same or smaller events cache of size ${t}`)))),R.tS((t=>{const e=1.2*t,n=[this.eventsCache,this.eventsForPage];return this.logDebug(`Pruning ${e} bytes from`,n),(0,a.zG)(l(n,e),R.fF)}))),f={key:t,events:g.of([]),sizeInBytes:0,sizeInBytesLastSuccessfulWrite:0,retryAttempts:0,flush:()=>(0,a.zG)(g.tD((()=>this.trace.startSpan(`write_${f.key}`))),g.tS((t=>(0,a.zG)(c,g.At((()=>()=>t.finish()))))),e),reset:()=>(0,a.zG)(g.tD((()=>{f.events=g.of([]),f.sizeInBytes=0,f.sizeInBytesLastSuccessfulWrite=0})),g.tS((()=>r)),e)};return f}logDebug(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.logger.debug(Y,...e)}logWarn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.logger.warn(Y,...e)}logError(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.logger.error(Y,...e)}logLog(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.logger.log(Y,...e)}}const V=()=>[];class J extends H{constructor(t,e,n,r,i,o,s,a){super(t,e,n,r,i,o,s,(()=>new K(t,e,o,new j,"67cbf6c5-d926-407b-a684-a0606570ff08",`events_${s.get()}`,`keys_${s.get()}`,"events",n,a)))}}function X(t,e){return U(t,e,new J(t.config,t.namespace,t.logger,t.api,t.trace,t.metrics,t.userId,t.consentTracking))}var Z=n(7826),tt=n(2851),et=n(9853);const nt="_pnativo",rt=function(t){let{externalData:e}=t;return i.K4((()=>{e.removeExternalData(nt)}))};var it=n(4011),ot=n(7927),st=n(6017);function at(t,e){const n=function(t){const e=function(t){let{logger:e,messages:n,queryManager:r}=t;const i="[Ref: QL segments]",o=()=>[...r.userSegments.getAllAsList()],[s,c]=tt.Ue(o());return e.debug(i,"initialised",{segments:s.current}),n.on("permutive:segments:updated",(()=>{const t=o();e.debug(i,"updated",{segments:t}),c(t)})),n.on("permutive:reset",(()=>{const t=o();e.debug(i,"reset"),c(t)})),(0,a.zG)(s,tt.D8($.Eh(it.Eq)))}(t);return(0,a.zG)(e,tt.UI((0,a.ls)($.uK((t=>t<1e7)),(t=>{let{left:e,right:n}=t;return{custom:n,standard:e}}))),(t=>({all:e,custom:(0,a.zG)(t,tt.UI((t=>{let{custom:e}=t;return e}))),standard:(0,a.zG)(t,tt.UI((t=>{let{standard:e}=t;return e})))})))}(t),r=function(t){let{messages:e,queryManager:n}=t;const[r,i]=tt.Ue(h.YP);return e.on("permutive:segments:updated",(()=>{i(h.G(n.stateMap.value))})),e.on("permutive:reset",(()=>i(h.YP))),tt.UI(h.UI(ct),r)}(t);return t.queryManager.setLalRef(e.lookalikeModels),t.queryManager.setTpdRef(e.thirdPartyData),i.K4((()=>({cohorts:n,tpdUsage:r})))}const ct=(0,a.ls)(ot.UI((t=>{var e;return null!==(e=t.activations)&&void 0!==e?e:{}})),ot.hX((0,a.zG)(Boolean,(0,st.xD)((0,st.ff)(ot.xb)))));var ut,dt,lt,mt,ft,pt=-1,ht=function(t){addEventListener("pageshow",(function(e){e.persisted&&(pt=e.timeStamp,t(e))}),!0)},gt=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},vt=function(){var t=gt();return t&&t.activationStart||0},_t=function(t,e){var n=gt(),r="navigate";return pt>=0?r="back-forward-cache":n&&(document.prerendering||vt()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:t,value:void 0===e?-1:e,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},bt=function(t,e,n){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var r=new PerformanceObserver((function(t){Promise.resolve().then((function(){e(t.getEntries())}))}));return r.observe(Object.assign({type:t,buffered:!0},n||{})),r}}catch(t){}},yt=function(t,e,n,r){var i,o;return function(s){e.value>=0&&(s||r)&&((o=e.value-(i||0))||void 0===i)&&(i=e.value,e.delta=o,e.rating=function(t,e){return t>e[1]?"poor":t>e[0]?"needs-improvement":"good"}(e.value,n),t(e))}},wt=function(t){requestAnimationFrame((function(){return requestAnimationFrame((function(){return t()}))}))},kt=function(t){var e=function(e){"pagehide"!==e.type&&"hidden"!==document.visibilityState||t(e)};addEventListener("visibilitychange",e,!0),addEventListener("pagehide",e,!0)},Et=function(t){var e=!1;return function(n){e||(t(n),e=!0)}},St=-1,Pt=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},It=function(t){"hidden"===document.visibilityState&&St>-1&&(St="visibilitychange"===t.type?t.timeStamp:0,Ot())},Dt=function(){addEventListener("visibilitychange",It,!0),addEventListener("prerenderingchange",It,!0)},Ot=function(){removeEventListener("visibilitychange",It,!0),removeEventListener("prerenderingchange",It,!0)},Tt=function(){return St<0&&(St=Pt(),Dt(),ht((function(){setTimeout((function(){St=Pt(),Dt()}),0)}))),{get firstHiddenTime(){return St}}},Mt=function(t){document.prerendering?addEventListener("prerenderingchange",(function(){return t()}),!0):t()},xt=[1800,3e3],Ct=[.1,.25],qt=function(t,e){e=e||{},function(t,e){e=e||{},Mt((function(){var n,r=Tt(),i=_t("FCP"),o=bt("paint",(function(t){t.forEach((function(t){"first-contentful-paint"===t.name&&(o.disconnect(),t.startTime<r.firstHiddenTime&&(i.value=Math.max(t.startTime-vt(),0),i.entries.push(t),n(!0)))}))}));o&&(n=yt(t,i,xt,e.reportAllChanges),ht((function(r){i=_t("FCP"),n=yt(t,i,xt,e.reportAllChanges),wt((function(){i.value=performance.now()-r.timeStamp,n(!0)}))})))}))}(Et((function(){var n,r=_t("CLS",0),i=0,o=[],s=function(t){t.forEach((function(t){if(!t.hadRecentInput){var e=o[0],n=o[o.length-1];i&&t.startTime-n.startTime<1e3&&t.startTime-e.startTime<5e3?(i+=t.value,o.push(t)):(i=t.value,o=[t])}})),i>r.value&&(r.value=i,r.entries=o,n())},a=bt("layout-shift",s);a&&(n=yt(t,r,Ct,e.reportAllChanges),kt((function(){s(a.takeRecords()),n(!0)})),ht((function(){i=0,r=_t("CLS",0),n=yt(t,r,Ct,e.reportAllChanges),wt((function(){return n()}))})),setTimeout(n,0))})))},At={passive:!0,capture:!0},Ut=new Date,Gt=function(t,e){ut||(ut=e,dt=t,lt=new Date,Rt(removeEventListener),jt())},jt=function(){if(dt>=0&&dt<lt-Ut){var t={entryType:"first-input",name:ut.type,target:ut.target,cancelable:ut.cancelable,startTime:ut.timeStamp,processingStart:ut.timeStamp+dt};mt.forEach((function(e){e(t)})),mt=[]}},zt=function(t){if(t.cancelable){var e=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;"pointerdown"==t.type?function(t,e){var n=function(){Gt(t,e),i()},r=function(){i()},i=function(){removeEventListener("pointerup",n,At),removeEventListener("pointercancel",r,At)};addEventListener("pointerup",n,At),addEventListener("pointercancel",r,At)}(e,t):Gt(e,t)}},Rt=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach((function(e){return t(e,zt,At)}))},Lt=[100,300],Bt=0,Kt=1/0,$t=0,Wt=function(t){t.forEach((function(t){t.interactionId&&(Kt=Math.min(Kt,t.interactionId),$t=Math.max($t,t.interactionId),Bt=$t?($t-Kt)/7+1:0)}))},Nt=function(){return ft?Bt:performance.interactionCount||0},Ft=function(){"interactionCount"in performance||ft||(ft=bt("event",Wt,{type:"event",buffered:!0,durationThreshold:0}))},Yt=[200,500],Qt=0,Ht=function(){return Nt()-Qt},Vt=[],Jt={},Xt=function(t){var e=Vt[Vt.length-1],n=Jt[t.interactionId];if(n||Vt.length<10||t.duration>e.latency){if(n)n.entries.push(t),n.latency=Math.max(n.latency,t.duration);else{var r={id:t.interactionId,latency:t.duration,entries:[t]};Jt[r.id]=r,Vt.push(r)}Vt.sort((function(t,e){return e.latency-t.latency})),Vt.splice(10).forEach((function(t){delete Jt[t.id]}))}},Zt=[2500,4e3],te={};const ee=function(t){let e=0;const n=n=>{if(0===e)return;const r=ne(n);r&&t.metrics.track({name:`sdk_web_vitals_${r.suffix}`,labels:{},value:r.value})},r=(0,W.HP)((()=>{qt(n),function(t,e){e=e||{},Mt((function(){var n,r=Tt(),i=_t("LCP"),o=function(t){var e=t[t.length-1];e&&e.startTime<r.firstHiddenTime&&(i.value=Math.max(e.startTime-vt(),0),i.entries=[e],n())},s=bt("largest-contentful-paint",o);if(s){n=yt(t,i,Zt,e.reportAllChanges);var a=Et((function(){te[i.id]||(o(s.takeRecords()),s.disconnect(),te[i.id]=!0,n(!0))}));["keydown","click"].forEach((function(t){addEventListener(t,a,!0)})),kt(a),ht((function(r){i=_t("LCP"),n=yt(t,i,Zt,e.reportAllChanges),wt((function(){i.value=performance.now()-r.timeStamp,te[i.id]=!0,n(!0)}))}))}}))}(n),function(t,e){e=e||{},Mt((function(){var n,r=Tt(),i=_t("FID"),o=function(t){t.startTime<r.firstHiddenTime&&(i.value=t.processingStart-t.startTime,i.entries.push(t),n(!0))},s=function(t){t.forEach(o)},a=bt("first-input",s);n=yt(t,i,Lt,e.reportAllChanges),a&&kt(Et((function(){s(a.takeRecords()),a.disconnect()}))),a&&ht((function(){var r;i=_t("FID"),n=yt(t,i,Lt,e.reportAllChanges),mt=[],dt=-1,ut=null,Rt(addEventListener),r=o,mt.push(r),jt()}))}))}(n),function(t,e){e=e||{},Mt((function(){Ft();var n,r=_t("INP"),i=function(t){t.forEach((function(t){t.interactionId&&Xt(t),"first-input"===t.entryType&&!Vt.some((function(e){return e.entries.some((function(e){return t.duration===e.duration&&t.startTime===e.startTime}))}))&&Xt(t)}));var e,i=(e=Math.min(Vt.length-1,Math.floor(Ht()/50)),Vt[e]);i&&i.latency!==r.value&&(r.value=i.latency,r.entries=i.entries,n())},o=bt("event",i,{durationThreshold:e.durationThreshold||40});n=yt(t,r,Yt,e.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),kt((function(){i(o.takeRecords()),r.value<0&&Ht()>0&&(r.value=0,r.entries=[]),n(!0)})),ht((function(){Vt=[],Qt=Nt(),r=_t("INP"),n=yt(t,r,Yt,e.reportAllChanges)})))}))}(n)}));return i.K4((n=>{let{onServiceStop:i}=n;e++,i((()=>{e--})),t.metrics.isEnabled()&&r()}))};const ne=t=>(t=>"CLS"===t.name)(t)?{value:t.value,suffix:`${t.name.toLowerCase()}_score`}:(t=>["INP","FID","LCP"].includes(t.name))(t)?{value:t.value/1e3,suffix:`${t.name.toLowerCase()}_seconds`}:void 0;var re=n(926),ie=n(4923);const oe=(t,e)=>((t,e,n)=>{const{activationManager:o,externalData:s,metrics:c,permutiveData:u,queryManager:d,stateSync:l,trace:m}=t;return(0,a.zG)(at(t,{lookalikeModels:e.lookalikeModels,thirdPartyData:(0,a.zG)(e.thirdPartyData,tt.UI(h.UI(ie.UI((t=>{const e={};for(const n of t)e[n]=!0;return e})))))}),i.YO("queryLanguage"),i.ak("webVitals",(()=>ee(t))),i.ak("eventCollection",(r=>{let{queryLanguage:i}=r;return n(t,{nonQlCohorts:e.nonQlCohorts,qlCohorts:i.cohorts.all,userId:e.userId})})),i.ak("nativo",(t=>{let{queryLanguage:n}=t;return rt(Object.assign({activationManager:o,externalData:s,metrics:c,queryLanguageCohorts:n.cohorts.all},e))})),i.ak("twitterPixel",(t=>{let{queryLanguage:n}=t;return(0,re.twitterPixelService)(Object.assign({activationManager:o,metrics:c,permutiveData:u,queryLanguageCohorts:n.cohorts.all},e))})),i.ak("prebidJS",(()=>(0,Z.dN)(t))),i.ak("reset",(t=>{let{eventCollection:e}=t;return i.of((t=>(0,r.mG)(void 0,void 0,void 0,(function*(){d.reset();const n=t.preserveEventsFromCurrentView?"historical":void 0,r=yield e.reset(n),i=m.startSpan("ss_reset_sync");t.downloadState?yield l.resetSync():l.reset(),yield d.bootstrap(r)(),i.finish()}))))})))})(t,e,X);function se(t){return"consentTracking"in t?t.consentTracking.consentRef:tt.a9(!0)}function ae(t){let{messages:e}=t;const[n,r]=tt.Ue(new Set);return e.on("permutive:addon:preinit",(t=>r(new Set([...n.current,t])))),n}function ce(t){let{messages:e,realtime:n}=t;var r;const[i,o]=tt.Ue(null!==(r=n.isRealtime())&&void 0!==r&&r);return e.on("permutive:realtime",(()=>o(!0))),i}function ue(){const t=()=>Math.floor(Date.now()/1e3),[e,n]=tt.Ue(t());return(0,G.UM)((()=>n(t())),1e3),e}function de(t,e){const n=function(t){const{activationManager:e,api:n,config:r,enrichers:i,externalData:o,logger:s,messages:a,metrics:c,permutiveData:u,namespace:d,network:l,queryManager:m,stateSync:f,trace:p,track:h,unprocessedPVC:g,urls:v,userId:_}=t,b="consentTracking"in t?t.consentTracking:{consentRef:tt.a9(!0),listenForConsent:()=>0,isRevoked:()=>!1,isGiven:()=>!0};return{activationManager:e,api:n,config:r,consentTracking:b,enrichers:i,externalData:o,logger:s,messages:a,metrics:c,permutiveData:u,namespace:d,permutiveApi:l,permutiveUrls:v,queryManager:m,reportError:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.reportError(t,null==e?void 0:e.userId,null==e?void 0:e.timestamp)},stateSync:f,trace:p,track:h,unprocessedPVC:g,userId:_}}(t),i=function(t){return{addonsLoaded:t.addonsLoaded,consent:se(t),currentTimestampSecs:ue(),enabledAddons:ae(t),identities:t.identities,realtime:ce(t),sdkVariant:h.ij(t.sdkVariant),sessionId:tt.a9(t.sessionManager.getSessionId()),userId:t.userId.ref,viewId:t.viewId.ref}}(t);return function(t,e,n){const i=5e3;return(0,a.zG)(t,(o=i,t=>e=>{var{onServiceStop:n}=e,i=(0,r._T)(e,["onServiceStop"]);let s=[];const{value:a,state:c}=t(Object.assign(Object.assign({},i),{onServiceStop:t=>s.push(t)})),[u,d]=tt.Ue(c.current),l=()=>d(c.current),m=(0,G.UM)(l,o);let f=!1;return(0,W.aT)((()=>!f&&l()),navigator.userAgent),n((()=>{f=!0,s.forEach((t=>t())),l(),m()})),{value:a,state:u}}),le,function(t){return e=>(0,a.ls)((0,W.rO)({previousState:e=>t.current?e:void 0}),e,(0,W.rO)({state:(0,a.ls)((e=>tt.vP(t,e)),tt.UI((t=>{let[e,n]=t;return e?n:void 0})))}))}(n),function(t){return e=>(0,a.ls)((0,W.rO)({previousState:()=>localStorage.getItem(t)}),e,(0,W.rO)({state:(0,W.bw)(tt.YP((e=>{switch(typeof e){case"string":localStorage.setItem(t,e);break;case"undefined":localStorage.removeItem(t);break;case"object":if(null===e){localStorage.removeItem(t);break}throw new Error("Permutive app raised an invalid state.");default:throw new Error("Permutive app raised an invalid state.")}})))}))}(e))({onServiceStop:a.Q1}).value;var o}(e(n,i),t.namespace.getNamespacedStorageKey("permutive-app"),i.consent)}function le(t){return(0,a.ls)((0,W.rO)({previousState:t=>{if("string"!=typeof t)return{};try{return JSON.parse(t)}catch(t){return{}}}}),t,(0,W.rO)({state:tt.UI(JSON.stringify)}))}var me=n(5912),fe=n(7241),pe=n(2197),he=n(4870);const ge="[Prebid Monitoring]",ve=(t,e)=>{t.metrics.track({name:"sdk_prebid_monitoring_key_flag_count_total",labels:e,value:1})},_e=(t,e)=>{t.metrics.track({name:"sdk_prebid_monitoring_key_bidder_flag_count_total",labels:e,value:1})},be=function(t,e){const n=ye(t);return i.K4((()=>(0,a.zG)(e,tt.UI((0,a.ls)(h.DT((t=>t.consent)),h.UI((t=>t.prebidJS)))),tt.D8(h.Eh((0,W.Or)())),tt.bw((0,a.ls)(h.tS((t=>t.completedChecks?t.mainPair:h.YP)),h.UI((e=>ve(t,{flag:"prebid_main_key",prebid_key:e.windowPropertyKey}))))),tt.UI(h.UI((t=>(0,a.zG)(t.mainPair,h.UI((e=>[e,...t.otherPairs])),h.fS((()=>t.otherPairs)))))),tt.g_(new Set,((e,r)=>(0,a.zG)(r,h.UI($.hX((t=>!e.has(t.windowPropertyKey)))),h.hX($.Od),(0,W.bw)(h.EQ((()=>t.logger.debug(ge,"Nothing to report")),(e=>t.logger.debug(ge,"Reporting",e)))),h.fS((()=>[])),$.UI((e=>(0,a.zG)((e=>(0,a.zG)(z.Y3((function(){var n,r;const{pbjs:i,windowPropertyKey:o}=e;t.logger.log(ge,`Reporting on "${o}"`,e);const s=we(i);t.logger.debug(ge,`Version ${i.version} parsed as`,s);const c=(0,Z.zi)(i);t.logger.debug(ge,"Read config",c);const u=(0,a.zG)(null!==(r=null===(n=c.realTimeData)||void 0===n?void 0:n.dataProviders)&&void 0!==r?r:[],$.Ew((t=>"permutive"===t.name)));return t.logger.debug(ge,"Read data provider config",u),{pbjs:i,config:c,dataProviderConfig:u,installedModules:i.installedModules||[],version:s,windowPropertyKey:o}}),s.w),z.ak("bidders",(t=>n.acBidders(t))),z.ak("permutiveRTDProvider",(t=>n.permutiveRTDProvider(t))),z.ak("consent",(t=>n.consent(t))),z.ak("targeting",(t=>n.targeting(t)))))(e),z.Pd((n=>t.reportError(`[Prebid Monitoring] Failed to report pair "${e.windowPropertyKey}", ${n.message}`)),(()=>e.windowPropertyKey))))),$.hp,(t=>new Set([...e,...t]))))),(t=>({reportedKeys:t})))))};const ye=t=>({acBidders:e=>z.Y3((()=>{const n=(0,et.Hn)("prebid")("data_provider_config",{ac_bidders:[]}),r=e.version.major>=7&&e.version.minor>=13?n.ac_bidders:[],i=(0,a.zG)(e.dataProviderConfig,h.UI((t=>{var e,n;return null!==(n=null===(e=null==t?void 0:t.params)||void 0===e?void 0:e.acBidders)&&void 0!==n?n:[]})),h.fS((()=>[]))),o=[...new Set([...r,...i])];return t.logger.debug(ge,"Determined acBidders as",{acBidders:o,dynamicBidders:r,staticBidders:i}),o.forEach((n=>{_e(t,{flag:"prebid_ac_bidder",prebid_key:e.windowPropertyKey,prebid_bidder:n})})),{acBidders:o,dynamicBidders:r,readBidders:i}}),s.w),consent:e=>z.Y3((()=>{var n,r,i,o,s,a;const c=e.windowPropertyKey;e.config.consentManagement&&"object"==typeof e.config.consentManagement&&ve(t,{prebid_key:c,flag:"prebid_has_consent_management"});const u=e.installedModules.includes("gdprEnforcement");u&&ve(t,{prebid_key:c,flag:"prebid_gdpr_enforcement_module"});const d=(null===(a=null===(s=null===(o=null===(i=null===(r=null===(n=e.config)||void 0===n?void 0:n.consentManagement)||void 0===r?void 0:r.gdpr)||void 0===i?void 0:i.rules)||void 0===o?void 0:o.find((t=>"storage"===(null==t?void 0:t.purpose))))||void 0===s?void 0:s.vendorExceptions)||void 0===a?void 0:a.includes("permutive"))||!1;return d&&ve(t,{prebid_key:c,flag:"prebid_storage_exception"}),{hasGDPREnforcementModule:u,addedAsStorageException:d}}),s.w),permutiveRTDProvider:e=>z.Y3((()=>{const n=e.installedModules.includes("permutiveRtdProvider");return n&&ve(t,{prebid_key:e.windowPropertyKey,flag:"prebid_permutive_rtd"}),n}),s.w),targeting:e=>{const n=(0,a.ls)($.UI((t=>[t,null])),ie.sq),r=(e,n)=>(0,a.zG)(e,(0,W.bw)((e=>t.logger.debug(ge,`Processing ${e.length} bidder request(s)`,e))),$.hX((t=>n.hasOwnProperty(t.bidderCode)&&null===n[t.bidderCode])),fe.vM((t=>t.bidderCode)),ie.DZ($.f2((0,W.lo)([[t=>(t=>{var e,n,r;const i=null===(n=null===(e=null==t?void 0:t.user)||void 0===e?void 0:e.data)||void 0===n?void 0:n.find((t=>"permutive.com"===t.name));return!!(null===(r=null==i?void 0:i.segment)||void 0===r?void 0:r.length)})(t.ortb2),()=>h.G("ortb2")],[t=>{return e=t.params,["permutive","p_standard"].some((t=>{var n,r,i,o;return(null===(r=null===(n=null==e?void 0:e.visitor)||void 0===n?void 0:n[t])||void 0===r?void 0:r.length)||(null===(o=null===(i=null==e?void 0:e.keywords)||void 0===i?void 0:i[t])||void 0===o?void 0:o.length)}));var e},()=>h.G("params")],()=>h.YP]))),(0,W.bw)((e=>t.logger.debug(ge,"Bidders targeting method's updated",e)))),i=i=>{t.logger.debug(ge,"Bidders found with no targeting method",i);let o=n(i);const s=n=>(0,a.zG)(r([n],o),(0,W.bw)((t=>{o=Object.assign(Object.assign({},o),t)})),(0,W.bw)(ie.Su(((n,r)=>_e(t,{flag:`prebid_${r}_targeting_success`,prebid_key:e.windowPropertyKey,prebid_bidder:n})))),(0,W.bw)((()=>{Object.values(o).includes(null)||(t.logger.debug(ge,`Cleaning up "bidRequested" listener for ${e.windowPropertyKey}`),e.pbjs.offEvent("bidRequested",s))})));e.pbjs.onEvent("bidRequested",s)};return z.Y3((()=>{const o=(0,a.zG)(e.pbjs.getEvents(),$.DZ((0,a.ls)(h.DT((t=>"bidRequested"===t.eventType)),h.UI((0,W.vg)("args")))));return(0,a.zG)(e.bidders.acBidders,h.DT($.Od),h.EQ((()=>t.logger.debug(ge,"No bidders for targeting")),(0,a.ls)(n,(t=>Object.assign(Object.assign({},t),r(o,t))),ie.uK(pe.ff((t=>null===t))),he.Pd((0,a.ls)(ie.XP,h.DT($.Od),h.UI(i)),ie.Su(((n,r)=>_e(t,{prebid_bidder:n,prebid_key:e.windowPropertyKey,flag:`prebid_${r}_targeting_success`})))))))}),s.w)}}),we=t=>{const[e,n,r]=t.version.split("-")[0].replace("v","").split(".").map((t=>parseInt(t)));return{major:e,minor:n,patch:r}};var ke=n(9557);const Ee=function(t,e){const n=(0,a.zG)(e.pbjs,tt.VS((0,a.ls)(h.tS(h.KQ((t=>{var e;return null===(e=t.getUserIdsAsync)||void 0===e?void 0:e.call(t).then((()=>{var e,n;return null!==(n=null===(e=t.getUserIdsAsEids)||void 0===e?void 0:e.call(t))&&void 0!==n?n:[]}))}))),h.UI(tt.p4),h.fS((()=>tt.a9(h.YP))))),tt.UI(h.tS(h.Uo)),tt.bw(h.mU((e=>(e.length>0?e.forEach((e=>{t.metrics.track({name:"sdk_prebid_alternative_identifiers_count_total",labels:{alternative_user_id_name:e.source},value:1})})):t.metrics.track({name:"sdk_prebid_alternative_identifiers_count_total",labels:{identifier:"NONE"},value:1}),h.YP))))),r=(0,a.zG)(e.pbjs,tt.UI(h.tS(h.KQ((t=>{var e;return null===(e=t.getUserIdsAsEids)||void 0===e?void 0:e.call(t)})))));return i.K4((()=>(0,a.zG)(tt.vP(n,r),tt.UI((t=>{let[e,n]=t;return(0,a.zG)(e,h.wp((()=>n)))})),tt.UI((0,a.ls)(h.UI($.DZ((t=>{var e,n;return"string"==typeof(null===(n=null===(e=t.uids)||void 0===e?void 0:e[0])||void 0===n?void 0:n.id)?h.G((0,a.bc)(t.source,{id:t.uids[0].id})):h.YP}))),h.tS(fe.c2),h.UI(ie.sq))),tt.bw((e=>{h.pC(e)&&t.logger.debug("[Prebid Identifiers]","Found identifiers",e.value)})))))};const Se=function(t){let{externalData:e}=t;return i.K4((()=>{e.removeExternalData(Pe)}))};const Pe="_pfws";var Ie=n(6930);var De=n(167);const Oe=()=>({allCohorts:[],gam:[],xandrSsp:[]}),Te=function(t,e){return i.K4((()=>tt.a9(Oe())))},Me=function(t){return i.K4((()=>tt.a9(h.YP)))};const xe=(t,e)=>(0,a.zG)(i.vP({classificationModels:Te(t,e)}),i.UI((t=>t.classificationModels))),Ce=function(t,e){return(0,a.zG)(qe(t),(0,De.n)({backoffAfterErrorMs:6e5}),i.VS((t=>Ie.m(tt.UI((e=>{let{tpdUsage:n,userId:r}=e;return{validityKey:()=>r,freshnessKey:(0,a.ls)((()=>n),h.EQ((()=>0),(0,a.ls)(JSON.stringify,W.vp))),refresh:(0,a.ls)((()=>n),h.hX((t=>Object.keys(t).length>0)),h.tS((e=>t({user_id:r,time:new Date,tpd_segments:e}))))}}),e)))),i.UI(a.Q1))};const qe=t=>e=>{const{config:n,metrics:r,permutiveApi:i,permutiveUrls:o}=t,s=r.startTimer("sdk_http_tpd_usage_seconds",{});return i.req({url:o.getEndpointUrl("/tpd/usage",h.G(n.apiVersion)),method:"POST",payload:e,contentType:"text/plain",dataType:"json",withCredentials:!1}).then((t=>(r.stopTimer("sdk_http_tpd_usage_seconds",s),t)))};function Ae(t,e){const[n,r]=tt.Ue(0);let o=!1;const s=()=>{try{o=!0,r(n.current+1)}finally{o=!1}},c=["amp","gigya","pxid","sailthru"],u=(0,a.zG)(e.identities,tt.UI(ie.z7((t=>!c.includes(t)))));return(0,a.zG)(i.vP({fetchFromNewEndpoint:(0,a.zG)(Ue(t),(0,De.n)({backoffAfterErrorMs:6e5})),fetchFromLegacyEndpoint:(0,a.zG)(Ge(t),(0,De.n)({backoffAfterErrorMs:6e5}))}),i.VS((r=>{let{fetchFromNewEndpoint:i,fetchFromLegacyEndpoint:s}=r;const c=e=>(0,a.zG)(i(e),h.UI((t=>t.catch((()=>(0,a.zG)(s(e.identities),h.fS((()=>t))))))),h.wp((()=>s(e.identities))),h.UI((0,W.bw)((e=>{const n=t.metrics.startTimer("sdk_get_third_party_data_task_duration_seconds",{});e.catch(a.Q1).then((()=>{t.metrics.stopTimer("sdk_get_third_party_data_task_duration_seconds",n)}))}))));return Ie.m((0,a.zG)(tt.vP(n,e.userId,e.sessionId,u),tt.UI((t=>{let[e,n,r,i]=t;return{validityKey:()=>n,freshnessKey:()=>`${je(i)},${r}`,refresh:()=>(0,a.zG)({userId:n,identities:i},h.DT((t=>{let{identities:e}=t;return o&&!ie.xb(e)})),h.tS(c))}}))))})),i.UI((t=>({refresh:s,data:t}))))}const Ue=t=>e=>(0,r.mG)(void 0,void 0,void 0,(function*(){return(yield t.api.reqWithMetrics(t.metrics,"sdk_http_audience_matching_seconds",{url:t.permutiveUrls.getAudienceMatchingEndpointUrl("/id",h.G("v1"),e.userId),payload:{identities:(0,a.zG)(e.identities,ie.Yz,$.UI((t=>{let[e,n]=t;return{tag:e,id:n}})))},method:"POST",withCredentials:!1,dataType:"json"})).items})),Ge=t=>e=>t.api.reqWithMetrics(t.metrics,"sdk_http_tpd_seconds",{url:t.permutiveUrls.getEndpointUrl("/tpd",h.G(t.config.apiVersion)),method:"POST",payload:{user_id:e},contentType:"text/plain",dataType:"json",withCredentials:!1}),je=(0,a.ls)(JSON.stringify,W.vp);const ze=(t,e)=>(0,a.zG)(i.vP({data:Ae(t,{identities:e.identities,sessionId:e.sessionId,userId:e.userId}),usageReporting:Ce(t,tt.vP({tpdUsage:e.tpdUsage,userId:e.userId})),removeLegacyDataFromLocalStorage:i.dQ((e=>{let{previousState:n}=e;if(!n){const e=t.namespace.getNamespacedStorageKey("permutive-data-tpd");localStorage.removeItem(e)}return{value:null,state:tt.a9(!0)}}))}),i.ak("analytics",(n=>{let{data:{data:r}}=n;return function(t,e){return i.dQ((n=>{let{previousState:r}=n;var i;return{state:(0,a.zG)(tt.vP(e.userId,e.providerSegments),tt.g_(null!==(i=r)&&"object"==typeof i?i:{userId:"",providerHashes:{}},((e,n)=>{let[r,i]=n;const o=(0,a.zG)(i,h.fS((()=>({})))),s=(0,a.zG)(o,ie.UI((0,W.SL)(W.vp))),c=(0,a.zG)(e,h.DT((t=>t.userId===r)),h.UI((t=>t.providerHashes)),h.fS((()=>({}))));return(0,a.zG)(o,ie.z7((t=>s[t]!==(c[t]||0))),ie.Su(((e,n)=>{t("ThirdPartySegments",{data_provider:e,segments:[...n]})}))),{userId:r,providerHashes:s}}))),value:void 0}}))}(t.track,{providerSegments:r,userId:e.userId})})),i.UI((t=>{let{data:e}=t;return{data:e.data,refreshData:e.refresh}})));var Re=n(5619);tt.a9([]),tt.a9([]),tt.a9([]),tt.a9([]),tt.a9([]),tt.a9([]),tt.a9(Re.b()),tt.a9(h.YP),tt.a9(h.YP);function Le(t,e,n){const{addonsLoaded:r,consent:o,currentTimestampSecs:s,enabledAddons:c,identities:u,realtime:d,sdkVariant:l,sessionId:m,userId:f,viewId:p}=e,[g,v]=(0,a.zG)(tt.Ue(h.YP),(t=>{let[e,n]=t;return[(0,a.zG)(e,tt.VS(h.EQ((()=>tt.a9(h.YP)),tt.UI(h.G)))),n]})),[_,b]=(0,a.zG)(tt.Ue(tt.a9(h.YP)),(t=>{let[e,n]=t;return[tt.xH(e),n]}));return(0,a.zG)(i.vP({lookalikeModels:Me(t),metricContext:Re.X({sdkVariant:l,sessionId:m,userId:f,viewId:p}),computeTimeMetrics:(y=t.metrics,i.K4((t=>{let{onServiceStop:e}=t;const n=(0,G.HJ)((()=>{(0,a.zG)((0,G.iE)(),(0,W.bw)((()=>(0,G.ho)(!1))),$.UI((t=>{let[e,n]=t;return(n-e)/1e3})),(t=>{y.track({name:"sdk_ui_thread_compute_first10s_total_seconds",value:t.reduce(((t,e)=>t+e),0),labels:{}}),y.track({name:"sdk_ui_thread_compute_first10s_total_task_overrun_seconds",value:(0,a.zG)(t,$.hX((t=>t>.05)),$.UI((t=>t-.05)),$.u4(0,((t,e)=>t+e))),labels:{}}),y.track({name:"sdk_ui_thread_compute_first10s_longest_task_seconds",value:Math.max(0,...t),labels:{}})}))}),1e4);e(n)})))}),i.ak("sdkql",(e=>{let{lookalikeModels:i}=e;return n(t,{addonsLoaded:r,consent:o,initdAddons:c,lookalikeModels:i,nonQlCohorts:g,thirdPartyData:_,userId:f})})),i.ak("strategicPartnerships",(e=>{let{sdkql:n}=e;return((t,e)=>i.vP({prebid_identifiers:Ee(t,e)}))(t,{pbjs:(0,a.zG)(n.prebidJS,tt.UI((t=>(0,a.zG)(t.mainPair,h.UI((t=>t.pbjs))))))})})),i.ak("demandPartners",(e=>{let{sdkql:{queryLanguage:n}}=e;return((t,e)=>(0,a.zG)(i.vP({ssp:ke.sspService(t.externalData,e)}),i.UI((t=>{let{ssp:e}=t;return e}))))(t,{addonsLoaded:r,consent:o,initdAddons:c,standardCohorts:n.cohorts.standard})})),i.ak("mediaAndEntertainment",(e=>{let{sdkql:{queryLanguage:n}}=e;return((t,e)=>(0,a.zG)(i.vP({freewheel:Se(Object.assign({activationManager:t.activationManager,externalData:t.externalData},e))}),i.UI((0,a.a9)({}))))(t,{addonsLoaded:r,consent:o,initdAddons:c,queryLanguageCohorts:n.cohorts.all})})),i.ak("publishers",(e=>{let{sdkql:{queryLanguage:n}}=e;return((t,e)=>(0,a.zG)(i.vP({addressability:xe(t,tt.vP(e)),audienceMatching:ze(t,{identities:e.identities,sessionId:e.sessionId,tpdUsage:e.tpdUsage,userId:e.userId})}),i.UI((t=>{let{addressability:e,audienceMatching:n}=t;return{cohorts:{all:tt.UI((t=>t.allCohorts),e),gam:tt.UI((t=>t.gam),e),xandrSsp:tt.UI((t=>t.xandrSsp),e)},refreshThirdPartyData:n.refreshData,thirdPartyData:n.data}}))))(t,{addonsLoaded:r,consent:o,currentTimestampSecs:s,identities:u,initdAddons:c,queryLanguageCohorts:n.cohorts.all,realtime:d,sessionId:m,tpdUsage:n.tpdUsage,userId:f})})),i.ak("advertisers",(e=>{let{demandPartners:n,sdkql:u}=e;return((t,e)=>(0,a.zG)(me.segmentationService(t,tt.vP(e)),i.YO("segmentation"),i.ak("prebidMonitoring",(()=>be(t,tt.vP({consent:e.consent,prebidJS:e.prebidJS})))),i.UI((t=>t.segmentation))))(t,{addonsLoaded:r,consent:o,currentTimestampSecs:s,customCohorts:u.queryLanguage.cohorts.custom,demandPartnerCohorts:tt.UI((t=>t.cohorts),n),initdAddons:c,prebidJS:u.prebidJS,realtime:d,sessionId:m,standardCohorts:u.queryLanguage.cohorts.standard,userId:f,viewId:p})})),i.bw((t=>{let{publishers:e}=t;return b(e.thirdPartyData)})),i.UI((t=>{let{advertisers:e,demandPartners:n,metricContext:r,publishers:i,sdkql:o,strategicPartnerships:s}=t;return{cloudCohorts:{all:(0,a.zG)(tt.vP(i.cohorts.all,e.segments.all,tt.UI((t=>t.cohorts),n)),tt.UI($.xH)),gam:(0,a.zG)(tt.vP(i.cohorts.gam,e.segments.all,tt.UI((t=>t.gamTargetingValues),n)),tt.UI($.xH)),xandrSsp:i.cohorts.xandrSsp},eventCollection:o.eventCollection,metricContext:r,pbjsPair:tt.UI((t=>t.mainPair),o.prebidJS),prebidIdentifiers:s.prebid_identifiers,queryLanguageCohorts:o.queryLanguage.cohorts,refreshThirdPartyData:i.refreshThirdPartyData,resetQL:o.reset}})),i.bw((t=>{let{cloudCohorts:e}=t;return v(h.G(e.all))})));var y}function Be(t){return de(t,Ke)}function Ke(t,e){return Le(t,e,oe)}},6640:(t,e,n)=>{n.d(e,{B9:()=>p,iq:()=>l,ti:()=>g});var r=n(2688),i=n(787),o=n(365),s=n(6567),a=n(3735),c=n(2652),u=n(3030);const d="__permutive.",l="__permutiveConfigQueryParams";const m={default:{windowKey:"permutive",environment:"default",apiHost:"api.permutive.com",apiKey:"",cdnBaseUrl:"cdn.permutive.com",pxidHost:"prmutv.co",apiVersion:"v2.0",sdkErrorsApiVersion:"v2",advertiserApiVersion:"v2",classificationModelsApiVersion:"v1",apiProtocol:"https",loggingEnabled:!1,tracingEnabled:!1,requestTimeout:5e3,cookieDomain:"."+(0,u._Y)(window.location.hostname),cookieName:"permutive-id",cookieExpiry:function(){const t=new Date;return t.setMonth(t.getMonth()+6),t.toUTCString()}(),eventsTTLInDays:null,permutiveDataMiscKey:"permutive-data-misc",permutiveDataModelsKey:"permutive-data-models",permutiveDataQueriesKey:"permutive-data-queries",permutiveDataEnrichersKey:"permutive-data-enrichers",stateNamespace:"",sendClientErrors:!0,metricsSamplingPercentage:20,eventsCacheLimitBytes:25e5,segmentSyncApiHost:"67cbf6c5-d926-407b-a684-a0606570ff08.partner.permutive.app",consentRequired:!1,sdkType:"stable",viewId:null,localStorageDebouncedKeys:["internal_query_states"],localStorageWriteDelay:1e3,localStorageWriteMaxDelay:1500,watson:{enabled:!0}},production:{},development:{apiProtocol:"http",loggingEnabled:!0,tracingEnabled:!0,sendClientErrors:!1}},f=t=>{const e={consentRequired:!0,loggingEnabled:!0,sendClientErrors:!0,tracingEnabled:!0},n={eventsTTLInDays:!0,eventsCacheLimitBytes:!0,metricsSamplingPercentage:!0,requestTimeout:!0,localStorageWriteDelay:!0,localStorageWriteMaxDelay:!0};return Object.keys(t).reduce(((r,i)=>{if(e.hasOwnProperty(i)){const e="true"===t[i];return Object.assign(Object.assign({},r),{[i]:e})}if(n.hasOwnProperty(i)){const e=Number(t[i]);return isNaN(e)?r:Object.assign(Object.assign({},r),{[i]:e})}return Object.assign(Object.assign({},r),{[i]:t[i]})}),{})},p=function(){let{getQueryParams:t=u.zM}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=t=>Object.entries(t).reduce(((t,e)=>{let[n,r]=e;if(!(0===n.indexOf(d)))return t;const i=n.replace(d,"");return[...t,[i,r]]}),[]);return(0,a.zG)(o.Y3((()=>(0,a.zG)(t(),e,(t=>(0,c.m8)(...t)),f,(t=>h({queryConfig:t})))),(t=>`Failed to parse query params. Got ${(0,r.w)(t).message}`)))},h=t=>{let{queryConfig:e}=t;const n=(0,a.zG)(s.Y3((()=>window.sessionStorage.getItem(l))),s.tS(s.ij),s.tS((0,a.ls)(i.A,s.ij)),s.fS((()=>({}))));return(0,c.PM)(n,e)},g=(t,e)=>{var n;const r=null!==(n=t.environment&&m[t.environment])&&void 0!==n?n:{};return(0,c.PM)(m.default,r,t,e)}},4564:(t,e,n)=>{n.d(e,{NY:()=>g,vk:()=>f,qA:()=>m});var r=n(7582),i=n(2688),o=n(365),s=n(3735),a=n(6934),c=n(8259),u=n(1410),d=n(2851);var l=n(30);const m=()=>({opt_in:!0,token:u.L}),f=()=>({opt_in:!1,token:""}),p=t=>{return(0,s.ls)((e=t,t=>(0,s.zG)((0,l.J)(e.consentRequired,t),(t=>{let{consentData:n,isValid:r}=t;return e.consentDatabase.put(n,u.L),r}))),(t=>{let{logger:e,messages:n}=t;return t=>{const r=t?"given":"revoked";return e.log("Consent has been",r),n.emit(`permutive:consent:${r}`),t}})(t));var e},h=t=>(e,n)=>{t.on("permutive:consent:revoked",e),t.on("permutive:consent:given",n)},g=t=>(0,r.mG)(void 0,void 0,void 0,(function*(){const{logger:e,namespace:n,consentRequired:r,messages:m}=t,f=new c.oP(window.localStorage,n),g=(0,l.J)(r,yield f.get(u.L)),v=yield(0,s.zG)(a.Y3((()=>f.put(g.consentData,u.L)),(t=>new Error(`LocalStorage access is required. ${(0,i.w)(t).message}`))),(t=>t()));if(o.nM(v))return v;const{consentRef:_,giveConsent:b,revokeConsent:y,isRevoked:w,isGiven:k}=function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const[e,n]=d.Ue(t),r=()=>!0===e.current;return{consentRef:e,revokeConsent:()=>(n(!1),e.current),giveConsent:()=>(n(!0),e.current),isRevoked:()=>!r(),isGiven:r}}(g.isValid),E={consentRef:_,isGiven:k,isRevoked:w,listenForConsent:h(m)};E.listenForConsent(y,b);const S=p({consentDatabase:f,consentRequired:r,logger:e,messages:m});return o.F2({consentTracking:E,consentValidation:S,consentDatabase:f})}))},1410:(t,e,n)=>{n.d(e,{L:()=>r});const r="permutive-consent"},7708:(t,e,n)=>{n.d(e,{D:()=>l});var r=n(1500),i=n(365),o=n(3735),s=n(6567),a=n(7407),c=n(4922),u=n(1410),d=n(30);const l=t=>{const{partialTagWithKey:e}=t,n=e.key;var l;window[n].consent=(l=t,(0,o.ls)(l.consentModule.consentValidation,s.DT(Boolean),s.UI((0,c.H)(l)),o.Q1));const m=(0,s.EQ)((()=>{return e={consentDatabase:t.consentModule.consentDatabase,consentRequired:t.tag.config.consentRequired},(0,o.zG)((0,o.a9)(e.consentDatabase.get(u.L)),(0,a.UI)((t=>(0,d.J)(e.consentRequired,t).isValid)));var e}),a.of);return(0,o.zG)((0,o.zG)((t=>{let{consentModule:e,tag:n}=t;const i=(0,r.Ew)((function(t){return"consent"===t.functionName}))(n.q);return(0,s.UI)((t=>e.consentValidation(t.arguments[0])))(i)})(t),m),(0,a.UI)((t=>t?(0,i.F2)(!0):(0,i.t$)("No consent to run on the page"))))}},4769:(t,e,n)=>{n.d(e,{v:()=>r});const r=(t,e,n)=>function(){const r=n()?e:t;return r(...arguments)}},30:(t,e,n)=>{n.d(e,{J:()=>s});var r=n(3735),i=n(6567),o=n(4564);const s=(t,e)=>(0,r.zG)((0,i.ij)(e),(e=>!1===t&&(0,i.Wi)(e)?{isValid:!0,consentData:(0,o.qA)()}:(t=>(0,i.pC)(t)&&(t=>null!==t&&"object"==typeof t)(t.value)&&(t=>{var e;return!0===t.opt_in&&"string"==typeof t.token&&(null===(e=t.token)||void 0===e?void 0:e.length)>0})(t.value))(e)?{isValid:!0,consentData:e.value}:{isValid:!1,consentData:(0,o.vk)()}))},3298:(t,e,n)=>{n.d(e,{S:()=>_});var r=n(3735),i=n(7582),o=n(6567),s=n(1500),a=n(2851),c=n(8612),u=n(2497),d=n(5165),l=n(3992);var m=n(2652);class f{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.wait_prev=e.wait_prev||!1,this.block_next=e.block_next||!1,this.started=!1,this.complete=!1,this.task=t}waits(){return this.wait_prev}blocks(){return this.block_next}execute(t){this.started=!0,this.task((()=>{this.complete=!0,t()}))}}var p=n(5057);class h{constructor(t,e,n,r,i,o,s,a,c,u,d,l,m,f,p,h,g,v,_,b,y,w,k,E,S,P,I,D){this.logger=t,this.api=e,this.activationManager=n,this.sessionManager=r,this.metrics=i,this.viewId=o,this.userId=s,this.network=a,this.enrichers=c,this.clientContext=u,this.unprocessedEvents=d,this.queryManager=l,this.taskQueue=m,this.identities=f,this.permutiveReset=p,this.messages=h,this.addons=g,this.trace=v,this.permutiveRealtime=_,this.state=b,this.customProperties=y,this.config=w,this.permutiveData=k,this.externalData=E,this.cookies=S,this.identitiesIngestor=P,this.global=I,this.nextGen=D,this.initialisedAddons=[],this.triggerListeners=[]}identify(t){const e="[Identify]";this.logger.debug("<call> identify",t);const n=(0,m.b2)(),a=this.identities.parseCustomerDefinedIdentities(t),u=Object.assign(Object.assign({},this.identities.getIdentitiesMap()),a.reduce(((t,e)=>{let{tag:n,id:r,priority:i,expiry:o}=e;return Object.assign(Object.assign({},t),{[n]:Object.assign(Object.assign({id:r},void 0!==i?{priority:i}:{}),void 0!==o?{expiry:o}:{})})}),{})),d=(0,r.zG)(Object.values(u),s.DZ((t=>o.ij(t.id)))),l=this.identities.getPrioritizedIdentities(u);if("string"==typeof t&&(0,c.Bt)("67cbf6c5-d926-407b-a684-a0606570ff08","67cbf6c5-d926-407b-a684-a0606570ff08",d,window.location.hostname,this.userId.get()))return n.resolve(),n.promise;const h=()=>(0,i.mG)(this,void 0,void 0,(function*(){this.nextGen.refreshThirdPartyData()})),g=t=>(0,i.mG)(this,void 0,void 0,(function*(){yield(0,p.Yj)({clientContext:this.clientContext,global:this.global,identities:this.identities,logger:this.logger,nextGen:this.nextGen,reset:this.permutiveReset,userId:this.userId},t.user_id)}));return this.taskQueue.add(new f((t=>(0,i.mG)(this,void 0,void 0,(function*(){this.logger.debug("<task> identify",a);const r=()=>(0,i.mG)(this,void 0,void 0,(function*(){this.logger.log(e,"request identity");const t=yield this.api.identify(this.metrics,this.userId,l);this.userId.isEqual(t.user_id)?(this.metrics.track({name:"sdk_identity_remained_total",value:1,labels:{identify_reason:"identify_call"}}),yield h()):(this.metrics.track({name:"sdk_identity_changed_total",value:1,labels:{identify_reason:"identify_call"}}),yield g(t))}));this.identities.setIdentities(a).identifyRequestRequired()?yield r():this.logger.log(e,"skip request"),this.logger.debug("<done> identify",a),t(),n.resolve(),yield this.identitiesIngestor.ingestIfEligible(a).catch((t=>this.api.reportError(`Couldn't ingest identities, got ${t}`,this.userId.get())))}))),{wait_prev:!0,block_next:!0})),n.promise}on(t,e){return this.nextGen.eventCollection.on(t,e)}once(t,e){return this.nextGen.eventCollection.once(t,e)}track(){var t,e,n;const[r,i,o]=[arguments.length<=0?void 0:arguments[0],(arguments.length<=1?void 0:arguments[1])||{},(arguments.length<=2?void 0:arguments[2])||{}],s=this.trace.startSpan("track_event");this.logger.log("<call> track",r);const a=(0,m.b2)(),c=null!==(t=o.unprocessedData)&&void 0!==t?t:{},u=null!==(e=c.sessionId)&&void 0!==e?e:this.sessionManager.getSessionId(),d=null!==(n=c.viewId)&&void 0!==n?n:this.viewId.get(),l={success:o.success||(t=>{}),error:o.error||((t,e)=>{})};return this.taskQueue.add(new f((t=>{this.logger.log("<task> track",r);return(c.client?Promise.resolve(c.client):this.clientContext.getClient()).then((e=>{var n;const c={name:r,properties:i,session_id:u,view_id:d,time:new Date};return this.nextGen.eventCollection.track({client:i.client?(0,m.PM)(e,i.client):e,event:c,requestOptions:l,useBeacon:null!==(n=o.useBeacon)&&void 0!==n&&n}).then((e=>{this.logger.log("<done> track",c.name),a.resolve(c),t(),s.finish()})).catch((t=>{var e;null===(e=l.error)||void 0===e||e.call(l,t),this.api.reportError(t,this.userId.get()),a.reject(t)}))}))}))),a.promise}trigger(t,e,n){const r=(0,m.b2)();this.logger.log("<call> trigger",t),this.triggerListeners=this.triggerListeners||[];return this.taskQueue.add(new f((e=>{this.logger.log("<task> trigger",t);const i=this.messages.on("permutive:query:changed",(function(e){e.queryCode===t&&(n(e.result),r.resolve(e.result))}));this.triggerListeners.push(i),this.logger.log("<done> trigger",t),e()}))),r.promise}query(){return Promise.resolve({result:!1})}segment(t,e){const n=(0,m.b2)();this.logger.log("<call> segment",t);return this.taskQueue.add(new f((r=>{var i;this.logger.log("<task> segment",t);const o=this.queryManager.stateMap.value[t];e((null===(i=null==o?void 0:o.result)||void 0===i?void 0:i.result)||!1),n.resolve(),this.logger.log("<done> segment",t),r()}))),n.promise}segments(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";const n=(0,m.b2)();this.logger.log("<call> segments");return this.taskQueue.add(new f((r=>{this.logger.log("<task> segments ("+e+")");const i=i=>{t(i),n.resolve(i),this.logger.log("<done> segments ("+e+")"),r()};"dfp"===e?this.messages.once("permutive:dfp:ready",(()=>{this.addons.dfp&&i([...this.addons.dfp.segments.liveSegments])})):i([...this.nextGen.queryLanguageCohorts.all.current])}))),n.promise}reset(){return Promise.all([this.api.reset(this.metrics),this.identities.reset(),this.permutiveReset.reset(),this.unprocessedEvents.PageviewComplete.reset(),this.nextGen.resetQL({downloadState:!1,preserveEventsFromCurrentView:!1})]).then((t=>{let[e]=t;this.userId.set(e.id)})).then((()=>{this.messages.emit("permutive:reset")})).catch((t=>{this.api.reportError(`Error resetting internals. Got ${t}`)}))}addon(t,e){const s=Object.assign(Object.assign({},e),{permutive:this,api:this.api,activationManager:this.activationManager,network:this.network,clientContext:this.clientContext,logger:this.logger,unprocessedEvents:this.unprocessedEvents,metrics:this.metrics,state:this.state,queryManager:this.queryManager,messages:this.messages,userId:this.userId,viewId:this.viewId,customProperties:this.customProperties,config:this.config,permutiveData:this.permutiveData,sessionManager:this.sessionManager,addons:this.addons,enrichers:this.enrichers,externalData:this.externalData,cookies:this.cookies,nextGenOutput:this.nextGen}),c=(0,r.zG)(this.nextGen.pbjsPair,a.UI(o.UI((0,m.vg)("pbjs"))));if(-1===this.initialisedAddons.indexOf(t))switch(this.initialisedAddons.push(t),this.messages.emit("permutive:addon:preinit",t),t){case"web":Promise.resolve().then(n.bind(n,4400)).then((t=>this.addons.web=new t.WebAddon(s))).then((()=>this.messages.emit("permutive:web:ready")));break;case"publishers":case"nativo":case"freewheel":case"eyeota_pixel":case"rubicon":case"pinterest_pixel":case"local_storage":case"appnexus_adserver":case"classification_models":case"gam_log":case"smart":case"tradedesk":case"ddp":case"dbm":case"ctv":0;break;case"overlays":Promise.resolve().then(n.bind(n,8087)).then((t=>this.addons.overlays=new t.OverlaysAddon(s)));break;case"scriptrunner":Promise.resolve().then(n.bind(n,7416)).then((t=>this.addons.scriptrunner=new t.ScriptRunnerAddon(s)));break;case"dfp":Promise.resolve().then(n.bind(n,9658)).then((t=>(0,i.mG)(this,void 0,void 0,(function*(){return this.addons.dfp=yield t.createAddon(s)}))));break;case"facebook_pixel_v2":Promise.resolve().then(n.bind(n,4519)).then((t=>this.addons.facebook_pixel_v2=new t.FacebookV2Pixel(s)));break;case"rubicon_ssp":Promise.resolve().then(n.bind(n,8563)).then((t=>this.addons.rubicon_ssp=new t.RubiconSspAddon(s)));break;case"tracking_pixel":Promise.resolve().then(n.bind(n,3792)).then((t=>this.addons.tracking_pixel=new t.PixelAddon(s)));break;case"twitter_pixel":Promise.resolve().then(n.bind(n,926)).then((t=>this.addons.twitter_pixel=new t.TwitterAddon(s)));break;case"prebid":Promise.resolve().then(n.bind(n,9581)).then((t=>this.addons.prebid=new t.PrebidAddon(Object.assign(Object.assign({},s),{pbjs:c}))));break;case"clean_room":Promise.resolve().then(n.bind(n,5912)).then((t=>this.addons.clean_room=new t.CleanRoomAddon(Object.assign(Object.assign({},s),{pbjs:c,prebidIdentifiers:this.nextGen.prebidIdentifiers}))));break;case"appnexus":Promise.resolve().then(n.bind(n,3994)).then((t=>this.addonIfTCFConsent({Addon:t.AppnexusPixel,key:"appnexus"},s)));break;case"pubmatic":Promise.resolve().then(n.bind(n,1840)).then((t=>this.addonIfTCFConsent({Addon:t.PubMaticAddon,key:"pubmatic"},s)));break;case"ssp":Promise.resolve().then(n.bind(n,9557)).then((t=>this.addons.ssp=new t.SspAddon(s)))}else"web"===t&&!0!==e.auto_init?((t,e,n,r)=>new Promise(((i,s)=>{var a;const c=(0,o.Y3)(t);if((0,o.pC)(c))return i(c.value);n.once(e,(()=>(0,o.g_)((()=>s(new Error(`Error after waiting for event ${e}`))),i)((0,o.Y3)(t))));const u=null!==(a=null==r?void 0:r.timeout)&&void 0!==a?a:1e4;(0,l.HJ)((()=>s(new Error(`Event ${e} was not received within the timeout period ${u}ms`))),u)})))((()=>{if(!this.addons.web)throw new Error('"web" addon not ready');return this.addons.web.reset(e)}),"permutive:web:ready",this.messages).catch((t=>{this.api.reportError(`Got error while trying to reset web. Got ${t.message}`,this.state.userId.get())})):"ctv"===t&&(null==e||e.auto_init)}addonIfTCFConsent(t,e){const n=()=>{switch(t.key){case"tradedesk":this.addons.tradedesk=new t.Addon(e);break;case"ddp":this.addons.ddp=new t.Addon(e);break;case"appnexus":this.addons.appnexus=new t.Addon(e);break;case"pubmatic":this.addons.pubmatic=new t.Addon(e)}},i=e=>e[d.D[t.key]]?n():(0,r.Q1)();return(0,u._8)(window).then((t=>{switch(t.type){case"missing":return n();case"aborted":return(0,r.Q1)();case"loaded":return(0,r.zG)((0,u.Ec)(t.data),(0,o.g_)(n,i))}}))}ready(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"initialised";const n=(0,m.b2)(),r=()=>{t(),n.resolve()};switch(e){case"initialised":this.permutiveRealtime.isReady()?r():this.messages.on("permutive:ready",r);break;case"realtime":this.permutiveRealtime.isRealtime()?r():this.messages.once("permutive:realtime",r)}return n.promise}}var g=n(4769);const v=t=>{const{logger:e,consentTracking:n}=t,o=function(){return e.debug("Methods[track]: Cannot track as consent is revoked"),Promise.resolve(null)};return t=>class extends t{constructor(){super(...arguments),this.track=(0,g.v)(super.track.bind(this),o,n.isRevoked),n.isRevoked()&&this.consentRevoked(),n.listenForConsent((()=>this.consentRevoked()),r.Q1)}consentRevoked(){return(0,i.mG)(this,void 0,void 0,(function*(){return yield this.sessionManager.reset(),this.reset()}))}}},_=(t,e,n,i,o,s,a,c,u,d,l,m,f,p,g,_,b,y,w,k,E,S,P,I,D,O,T,M,x)=>new((0,r.zG)(h,v({consentTracking:M,logger:t})))(t,e,n,i,o,s,a,c,u,d,l,m,f,p,g,_,b,y,w,k,E,S,P,I,D,O,T,x)},6416:(t,e,n)=>{n.d(e,{O:()=>c});var r=n(1828),i=n(365),o=n(3735);const s=t=>(0,o.zG)((t=>"function"==typeof t.Map?(0,i.F2)(new t.Map([["a",1]])):(0,i.t$)("Maps not supported"))(t),i.tS((t=>1===t.size?(0,i.F2)(null):(0,i.t$)("Iterable Maps not supported")))),a=t=>(0,o.zG)((t=>"function"==typeof t.Set?(0,i.F2)(new t.Set([1,2])):(0,i.t$)("Sets not supported"))(t),i.tS((t=>2===t.size?(0,i.F2)(null):(0,i.t$)("Iterable Sets not supported")))),c=t=>(0,o.zG)((0,r.gz)(i.G5)(s(t),a(t),(t=>t.Worker&&t.Blob?(0,i.F2)(null):(0,i.t$)("WebWorkers not supported"))(t)),(t=>(0,i.UI)(o.Q1)(t)))},5057:(t,e,n)=>{n.d(e,{Yj:()=>rt,TZ:()=>et});var r=n(7582),i=n(2688),o=n(7407),s=n(3735),a=n(7341),c=n(6567),u=n(4870);function d(t,e){return function(n){return t.map(n,e.compact)}}function l(t,e,n){var r=d(t,e),i=(0,a.UI)(t,n);return function(t){return u.s4(r((0,s.zG)(t,i(c.IS))),r((0,s.zG)(t,i(c.EK))))}}var m=n(6017);function f(t,e){return function(n){return function(r){return t.map(r,(function(t){return e.filter(t,n)}))}}}function p(t,e){return function(n){return function(r){return t.map(r,(function(t){return e.filterMap(t,n)}))}}}function h(t,e){var n=f(t,e);return function(t){var e=n((0,m.ff)(t)),r=n(t);return function(t){return(0,u.s4)(e(t),r(t))}}}function g(t,e){var n=p(t,e);return function(t){return function(e){return(0,u.s4)((0,s.zG)(e,n((function(e){return(0,c.IS)(t(e))}))),(0,s.zG)(e,n((function(e){return(0,c.EK)(t(e))}))))}}}var v=n(9679),_=n(9384),b=n(1828);function y(t){return(0,s.ls)(c.G,t.of)}function w(t){return(0,s.a9)(t.of(c.YP))}function k(t){return function(e){return t.map(e,c.G)}}function E(t){return(0,s.ls)(c.ij,t.of)}function S(t){var e=E(t);return function(t){return(0,s.ls)(t,e)}}function P(t){var e=U(t),n=S(t);return function(t){return e(n(t))}}function I(t){return function(e){return(0,s.ls)(e,t.of)}}function D(t){var e=U(t),n=I(t);return function(t){return e(n(t))}}function O(t){return function(e){return function(n){return t.of(c.DT(e)(n))}}}function T(t){return(0,s.ls)(c.Uo,t.of)}function M(t){return function(e,n){return function(r){return t.map(r,c.EQ(e,n))}}}function x(t){return function(e,n){return function(r){return t.chain(r,c.EQ(e,n))}}}function C(t){return function(e){return function(n){return t.chain(n,c.EQ(e,t.of))}}}function q(t){return(0,a.UI)(t,c.dO)}function A(t){return(0,b.ap)(t,c.G5)}function U(t){var e=w(t);return function(n){return function(r){return t.chain(r,c.EQ((function(){return e()}),n))}}}function G(t){var e=y(t);return function(n){return function(r){return t.chain(r,c.EQ(n,e))}}}var j=y(o.PM),z=(o.PM,o.of,o.PM,function(t){return R(o.tD(t))}),R=k(o.dO),L=(c.Uo,M(o.dO)),B=(o.qo,o.UA,o.PM,o.PM,o.UA,o.PM,o.UA,q(o.dO)),K=A(o.Hi),$=j,W=U(o.UA),N=(o.UA,o.PM,o.dO,c.Ri,o.dO,c.Ri,c.dO,o.dO,c.xu,o.dO,c.xu,o.dO,c.xu,o.dO,c.xu,function(t,e){return(0,s.zG)(t,B(e))}),F=function(t,e){return(0,s.zG)(t,K(e))},Y=function(t,e){return(0,s.zG)(t,W(e))},Q="TaskOption",H={URI:Q,map:N,ap:F,chain:Y},V={URI:Q,fromIO:z,fromTask:R},J=(0,v.oU)(V,H),X=(_.F4,_.Xl,n(2652));var Z=n(8612);const tt=t=>(0,r.mG)(void 0,void 0,void 0,(function*(){yield t.identities.thirdParty,yield function(t,e){return(0,Z.Bt)("67cbf6c5-d926-407b-a684-a0606570ff08","67cbf6c5-d926-407b-a684-a0606570ff08",t.identities.getPrioritizedIdentities(t.identities.getIdentitiesMap()).map((t=>t.id)),window.location.hostname,t.userId.get())?e.reset():Promise.resolve()}(t,t.permutiveMethods);const e=yield function(t){const e=t.trace.startSpan("identify");0;return(t=>(0,r.mG)(void 0,void 0,void 0,(function*(){const e="[Identify Init]",{logger:n,api:r,userId:i,identities:o,metrics:s,identitiesIngestor:a,messages:c,sessionManager:u}=t,d=yield o.thirdParty,l=o.extractIdentifyFromQueue(t),m=o.getIdentitiesMap(),f=l.reduce(((t,e)=>{let{tag:n,id:r,priority:i,expiry:o}=e;return Object.assign(Object.assign({},t),{[n]:Object.assign(Object.assign({id:r},o?{expiry:o}:{}),void 0!==i?{priority:i}:{})})}),{}),p=Object.assign(Object.assign({},m),f),h=o.setIdentities(Object.entries(p).map((t=>{let[e,{id:n,priority:r,expiry:i}]=t;return Object.assign(Object.assign({tag:e,id:n},i?{expiry:i}:{}),void 0!==r?{priority:r}:{})}))),g=o.getPrioritizedIdentities(p);n.log("Begin identification");const v=t.sessionCount>1&&u.sessionHasChanged()||d.identifyRequestRequired()||h.identifyRequestRequired()?yield(n.debug(e,"request identity"),r.identify(s,i,g).then((t=>{const r=t.user_id;return i.isEqual(r)?{identityChanged:!1}:(n.debug(e,"fetch received new user id",r),{identityChanged:!0,userId:r})})).catch((t=>(r.reportError(`${e} Fetch failed. Got ${t}`,i.get()),{identityChanged:!1}))).then((0,X.bw)((e=>t.metrics.track({name:`sdk_identity_${e.identityChanged?"changed":"remained"}_total`,value:1,labels:{identify_reason:"sdk_init"}}))))):(n.debug(e,"skip request"),{identityChanged:!1});return a.ingestIfEligible(g).catch((t=>r.reportError(`Couldn't ingest identities, got ${t}`,v.identityChanged?v.userId:i.get()))),c.emit("permutive:user:ready"),n.debug(e,"result",v),v})))(t).catch((e=>(t.api.reportError(`Failed to identify. Got ${(0,i.w)(e)}`),{identityChanged:!1}))).then((t=>(e.finish(),t)))}(t);return e.identityChanged?yield rt(t,e.userId):(t.logger.log("Identity has not changed"),t.nextGen.refreshThirdPartyData()),e})),et=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t=>{};return(0,r.mG)(void 0,void 0,void 0,(function*(){tt(t).then(e),yield nt(t.logger,t.trace,t.permutiveMethods,t.unprocessedEvents,t.queryManager,t.eventCollection,t.metrics)(),it(t.global,t.clientContext)}))};function nt(t,e,n,i,a,c,u){t.log("Assuming identity hasn't changed");const d=a.hasNewOrModifiedQueries,l=d?(0,s.zG)((()=>c.allEvents()),o.tS((t=>a.bootstrap(t)))):a.bootstrap([]),m=(0,s.zG)((()=>i.PageviewComplete.getIfPresent()),(0,X.bw)(L((()=>t.debug("No unprocessed PVC data detected")),(e=>t.debug("Unprocessed PVC data detected",e)))),J((t=>{var{props:e}=t,s=(0,r._T)(t,["props"]);return b.gz(o.oE)((()=>n.track("PageviewComplete",e,{unprocessedData:s})),(()=>i.PageviewComplete.reset()))})),o.UI((()=>{})));return(0,s.zG)(b.gz(o.oE)((()=>(0,r.mG)(this,void 0,void 0,(function*(){return e.startSpan(`qm_bootstrap_${d}`)}))),l,m),o.UI((t=>{let[e]=t;return e.finish()})))}function rt(t,e){return(0,r.mG)(this,void 0,void 0,(function*(){t.logger.log("Identity has changed"),yield t.reset.reset(),t.userId.set(e),it(t.global,t.clientContext),t.nextGen.refreshThirdPartyData(),t.identities.setIdentities([]),yield t.nextGen.resetQL({downloadState:!0,preserveEventsFromCurrentView:!0})}))}function it(t,e){return t.context=e.getContext()}},5919:(t,e,n)=>{function r(t,e,n,r,i){i.debug("set SDK as ready"),t.setAsReady(),e.emit("permutive:api:ready"),n.track({name:"sdk_local_storage_byte_total",value:r.getStateSizeInBytes(),labels:{}}),n.track({name:"sdk_query_states_byte_total",value:t.getStateSizeInBytes(),labels:{}})}n.d(e,{R:()=>r})},7985:(t,e,n)=>{n.d(e,{$o:()=>s,je:()=>a});var r=n(365),i=n(3735),o=n(6640);const s=t=>{var e,n;const o="67cbf6c5-d926-407b-a684-a0606570ff08",s=void 0!==(null===(e=t[o])||void 0===e?void 0:e.q)&&void 0!==(null===(n=t[o])||void 0===n?void 0:n.config)?o:"permutive";return(0,i.zG)(t[s],(0,r.ij)("Can't find permutive tag on the page"),(0,r.UI)((t=>({tag:t,key:s}))))},a=(t,e)=>{let{tag:n,key:r}=t;return Object.assign(Object.assign({},n),{config:(0,o.ti)(Object.assign(Object.assign({},n.config),{windowKey:r}),e)})}},7078:(t,e,n)=>{n.d(e,{LA:()=>a});var r=n(1500),i=n(7209),o=n(2652);const s=(t,e,n)=>{let{api:r,state:i}=n;r.reportError(`Function "permutive.${e.functionName}" caused an error: ${t.message}`,i.userId.get())};function a(t,e,n,r,i,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:l;const u=c(t),d=o.startSpan("queued_methods"),m={api:i,state:e},f=t=>{if(t.functionName in n){n[t.functionName].apply(r,t.arguments)}else s(new Error("Does not exist."),t,m)},p=t=>!a.includes(t);u.forEach((t=>{try{p(t.functionName)&&f(t)}catch(e){const n=e instanceof Error?e:new Error("Unknown error.");s(n,t,m)}})),d.finish()}function c(t){const e=(0,r.uK)((t=>-1!==d.indexOf(t.functionName)))(t),n=e.right,s=e.left.filter((t=>"consent"!==t.functionName)),a=(0,i.Zt)(((t,e)=>u(t)&&u(e)?(0,o.lW)(m).compare(t.arguments[0],e.arguments[0]):(0,o.lW)(d).compare(t.functionName,e.functionName)));return(0,r.DY)(a)(n).concat(s)}const u=t=>"addon"===t.functionName,d=["identify","trigger","addon","track"],l=["identify"],m=["dfp","appnexus_adserver","web"]},4922:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>initialiseWebSDK,f:()=>initialisationSequence});var tslib__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(7582),_permutive_permutive_utils_ts_error__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(2688),fp_ts_Either__WEBPACK_IMPORTED_MODULE_49__=__webpack_require__(365),fp_ts_function__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(3735),fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(6934),_framework_ref__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2851),_identity_legacy_NeustarFabrickIdentitiesIngestor__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6967),_identity_legacy_PermutiveIdentities__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8612),_identity_legacy_PermutiveIdentitiesIngestorNoOp__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(7658),_sdkql_blockers__WEBPACK_IMPORTED_MODULE_50__=__webpack_require__(122),_sdkql_query_language_queryWorkerInit__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8318),_core_activations_PermutiveActivationManagerWeb__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(8975),_core_activations_PermutiveAddons__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(9853),_core_context_PermutiveClientContextWeb__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(2836),_sdkql_event_collection_events_cache_store_crypto_HashcodeDigest__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(6197),_sdkql_event_collection_PermutiveEventCustomProps__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__(7748),_core_events_unprocessed_UnprocessedPageviewComplete__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(389),_core_events_unprocessed_UnprocessedPrebidAuctions__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(5865),_core_internals_CookiesWeb__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(5461),_core_internals_ExternalDataWeb__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(9773),_core_internals_PermutiveLogger__WEBPACK_IMPORTED_MODULE_55__=__webpack_require__(342),_core_internals_SDKMessages__WEBPACK_IMPORTED_MODULE_58__=__webpack_require__(8491),_core_metrics_MetricReporter__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(7594),_core_metrics_Metrics__WEBPACK_IMPORTED_MODULE_59__=__webpack_require__(4074),_sdkql_query_language_query_manager_QueryManagerWeb__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(1628),_core_session_SessionManager__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(8317),_core_state_PermutiveDataStoreWeb__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(4026),_sdkql_state_sync_PermutiveEventSourceId__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(3622),_core_state_PermutiveNamespace__WEBPACK_IMPORTED_MODULE_57__=__webpack_require__(569),_core_state_PermutiveRealtime__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(7575),_core_state_PermutiveReset__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__(7256),_sdkql_state_sync_PermutiveStateSyncWeb__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(1229),_core_state_PermutiveStateWeb__WEBPACK_IMPORTED_MODULE_48__=__webpack_require__(7274),_core_state_PermutiveUserId__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(9117),_core_state_PermutiveViewId__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(9880),_core_store_LocalStorage__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(7554),_core_store_SessionStorage__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(9332),_core_tcf_TCF__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(2497),_dynamic_addons_LoadAddons__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(6037),_sdkql_event_collection_enrichment_Enrichers_GlobalEnricher__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(7200),_sdkql_event_collection_enrichment_RegisterEnrichers__WEBPACK_IMPORTED_MODULE_52__=__webpack_require__(6341),_dynamic_messages_PermutiveMessages__WEBPACK_IMPORTED_MODULE_51__=__webpack_require__(9078),_http_PermutiveApi__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(7423),_http_PermutiveNetwork__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(4586),_http_PermutiveUrls__WEBPACK_IMPORTED_MODULE_56__=__webpack_require__(310),_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(2652),_utils_task_queue_PermutiveTaskQueue__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__(4996),_utils_Trace__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(6574),_utils_urls_UrlHelpers__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(3030),_Config__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(6640),_Consent_Consent__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(4564),_Consent_InitialisationCheckWeb__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(7708),_initialisation_browserFeatures__WEBPACK_IMPORTED_MODULE_54__=__webpack_require__(6416),_initialisation_identity__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(5057),_initialisation_initialisationLifecycle__WEBPACK_IMPORTED_MODULE_53__=__webpack_require__(5919),_initialisation_permutiveTag__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(7985),_initialisation_queuedMethods__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(7078),_PermutiveMethodsWeb__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(3298),_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__(3992),fp_ts_Task__WEBPACK_IMPORTED_MODULE_47__=__webpack_require__(7407);const prefix="[Initialisation Web]",sdkInitTimestamp=window.performance.now(),initialiseWebSDK=_ref=>{let{consentModule,logger,messages,metrics,namespace,network,partialTagWithKey,permutiveData,queryWorker,tag,sessionStorage,configFromQueryParams,urls}=_ref;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.Y3)((()=>(0,tslib__WEBPACK_IMPORTED_MODULE_30__.mG)(void 0,void 0,void 0,(function*(){const windowKey=partialTagWithKey.key,permutiveGlobal=window[windowKey],config=tag.config,viewId=new _core_state_PermutiveViewId__WEBPACK_IMPORTED_MODULE_15__.W(config),trace=new _utils_Trace__WEBPACK_IMPORTED_MODULE_31__.l(config),sdkReadySpan=trace.startSpan("sdk_ready"),{consentTracking,consentValidation}=consentModule;(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_32__.zG)(consentTracking.consentRef,_framework_ref__WEBPACK_IMPORTED_MODULE_0__.YP((t=>{t?sessionStorage.put(configFromQueryParams,_Config__WEBPACK_IMPORTED_MODULE_22__.iq).then(fp_ts_function__WEBPACK_IMPORTED_MODULE_32__.Q1,(t=>{logger.warn(prefix,`Failed to cache "${_Config__WEBPACK_IMPORTED_MODULE_22__.iq}".`,(0,_permutive_permutive_utils_ts_error__WEBPACK_IMPORTED_MODULE_33__.w)(t))})):sessionStorage.delete(_Config__WEBPACK_IMPORTED_MODULE_22__.iq)}))),window[windowKey].consent=consentValidation;const context=(0,_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_21__.PM)(tag.context||{},{path:window.location.pathname,url:(0,_utils_urls_UrlHelpers__WEBPACK_IMPORTED_MODULE_34__.bk)(window.location.href),referrer:(0,_utils_urls_UrlHelpers__WEBPACK_IMPORTED_MODULE_34__.bk)(document.referrer),view_id:viewId.get()}),createInternalsSpan=trace.startSpan("internals"),cookieStore=(0,_core_internals_CookiesWeb__WEBPACK_IMPORTED_MODULE_7__.S)(namespace,config,logger,consentTracking),localStorage=(0,_core_store_LocalStorage__WEBPACK_IMPORTED_MODULE_35__.E)(namespace,logger,consentTracking),externalData=(0,_core_internals_ExternalDataWeb__WEBPACK_IMPORTED_MODULE_36__.S)(namespace,logger,consentTracking),clientContext=new _core_context_PermutiveClientContextWeb__WEBPACK_IMPORTED_MODULE_37__.z(context);(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_32__.zG)(viewId.ref,_framework_ref__WEBPACK_IMPORTED_MODULE_0__.YP((t=>clientContext.updateContext(["view_id",t]))));const userId=new _core_state_PermutiveUserId__WEBPACK_IMPORTED_MODULE_14__.M(config,clientContext,cookieStore,externalData),eventSourceId=new _sdkql_state_sync_PermutiveEventSourceId__WEBPACK_IMPORTED_MODULE_12__.$(permutiveData),enrichers=new _sdkql_event_collection_enrichment_Enrichers_GlobalEnricher__WEBPACK_IMPORTED_MODULE_38__.J,api=new _http_PermutiveApi__WEBPACK_IMPORTED_MODULE_19__.F(urls,config,network,metrics,logger),identityProviderEnv={permutive:permutiveGlobal,network,api,userId,metrics,permutiveData,messages,config,cookies:cookieStore,logger},identities=new _identity_legacy_PermutiveIdentities__WEBPACK_IMPORTED_MODULE_2__.lg(metrics,trace,permutiveData,identityProviderEnv,logger),identitiesIngestor=new _identity_legacy_PermutiveIdentitiesIngestorNoOp__WEBPACK_IMPORTED_MODULE_39__.z,permutiveRealtime=new _core_state_PermutiveRealtime__WEBPACK_IMPORTED_MODULE_40__.u(metrics,messages),sessionManager=yield _core_session_SessionManager__WEBPACK_IMPORTED_MODULE_10__.S.initialise(cookieStore,localStorage,logger),unprocessedArgs={consentTracking,logger,namespace},unprocessedEvents={PageviewComplete:new _core_events_unprocessed_UnprocessedPageviewComplete__WEBPACK_IMPORTED_MODULE_41__.p(unprocessedArgs),PrebidAuctions:new _core_events_unprocessed_UnprocessedPrebidAuctions__WEBPACK_IMPORTED_MODULE_42__.J(unprocessedArgs)},customProperties=new _sdkql_event_collection_PermutiveEventCustomProps__WEBPACK_IMPORTED_MODULE_43__.X,queryManagerTransitionDebounceTime=1e3,queryManagerTransitionMaxDebounceTime=1e4,queryManager=new _sdkql_query_language_query_manager_QueryManagerWeb__WEBPACK_IMPORTED_MODULE_9__.c({customProperties,externalData,logger,messages,api,permutive:permutiveGlobal,permutiveData,queryWorker,realtime:permutiveRealtime,sessionManager,transitionDebounceMaxTime:queryManagerTransitionMaxDebounceTime,transitionDebounceTime:queryManagerTransitionDebounceTime,userId,viewId,metrics}),permutiveReset=new _core_state_PermutiveReset__WEBPACK_IMPORTED_MODULE_44__.a(config,localStorage,logger,permutiveData,eventSourceId,cookieStore,externalData),taskQueue=new _utils_task_queue_PermutiveTaskQueue__WEBPACK_IMPORTED_MODULE_45__.i(messages),stateSync=new _sdkql_state_sync_PermutiveStateSyncWeb__WEBPACK_IMPORTED_MODULE_13__.N(api,network,sessionManager,permutiveData,queryManager,metrics,userId,eventSourceId,(0,_sdkql_state_sync_PermutiveStateSyncWeb__WEBPACK_IMPORTED_MODULE_13__.e)()),activationManager=new _core_activations_PermutiveActivationManagerWeb__WEBPACK_IMPORTED_MODULE_4__.v(logger,permutiveGlobal,clientContext),[addonsLoadedRef,setAddonsLoaded]=_framework_ref__WEBPACK_IMPORTED_MODULE_0__.Ue(!1),nextGen=yield(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_32__.zG)((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,2271))),_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_46__.SF,fp_ts_Task__WEBPACK_IMPORTED_MODULE_47__.UI((t=>{let{runNextGenFeaturesWeb:e}=t;return e({activationManager,addonsLoaded:addonsLoadedRef,api,config,consentTracking,enrichers,externalData,identities:identities.ref,logger,messages,metrics,namespace,network,permutiveData,queryManager,realtime:permutiveRealtime,sessionManager,stateSync,trace,track:function(){return permutiveGlobal.track(...arguments)},unprocessedPVC:unprocessedEvents.PageviewComplete,urls,userId,viewId})})))();(0,_core_metrics_MetricReporter__WEBPACK_IMPORTED_MODULE_8__.p)({api,context:nextGen.metricContext,enrichers,logger,messages,metrics});const state=new _core_state_PermutiveStateWeb__WEBPACK_IMPORTED_MODULE_48__.u(permutiveData,permutiveReset,userId,viewId,nextGen.eventCollection),addons={},permutiveMethods=(0,_PermutiveMethodsWeb__WEBPACK_IMPORTED_MODULE_28__.S)(logger,api,activationManager,sessionManager,metrics,viewId,userId,network,enrichers,clientContext,unprocessedEvents,queryManager,taskQueue,identities,permutiveReset,messages,addons,trace,permutiveRealtime,state,customProperties,config,permutiveData,externalData,cookieStore,identitiesIngestor,permutiveGlobal,consentTracking,nextGen);createInternalsSpan.finish(),[].forEach((s=>{fp_ts_Either__WEBPACK_IMPORTED_MODULE_49__.Y3((()=>eval(s)),(t=>{api.reportError(Object.assign(Object.assign({},t),{message:`Error running custom script ${s}`}),userId.get())}))}));const blockers=(0,_sdkql_blockers__WEBPACK_IMPORTED_MODULE_50__.X)({logger,messages});blockers.addBlocker("permutive:queries:initialised"),messages.on("permutive:user:ready",(()=>{permutiveGlobal.identify=permutiveMethods.identify.bind(permutiveMethods);const t=identities.extractIdentifyFromQueue({global:permutiveGlobal});t.length>0&&permutiveGlobal.identify(t)})),messages.on("permutive:blockers:empty",(()=>{permutiveGlobal.on=permutiveMethods.on.bind(permutiveMethods),permutiveGlobal.once=permutiveMethods.once.bind(permutiveMethods),permutiveGlobal.track=permutiveMethods.track.bind(permutiveMethods),permutiveGlobal.trigger=permutiveMethods.trigger.bind(permutiveMethods),permutiveGlobal.query=permutiveMethods.query.bind(permutiveMethods),permutiveGlobal.segment=permutiveMethods.segment.bind(permutiveMethods),permutiveGlobal.segments=permutiveMethods.segments.bind(permutiveMethods),permutiveGlobal.reset=permutiveMethods.reset.bind(permutiveMethods),permutiveGlobal.ready=permutiveMethods.ready.bind(permutiveMethods),permutiveGlobal.addon=permutiveMethods.addon.bind(permutiveMethods),permutiveGlobal.context=clientContext.getContext(),permutiveGlobal.addons=addons,permutiveGlobal.config=config,permutiveRealtime.setAsReady(),(0,_initialisation_queuedMethods__WEBPACK_IMPORTED_MODULE_27__.LA)(permutiveGlobal.q,state,permutiveGlobal,permutiveMethods,api,trace),setAddonsLoaded(!0)}));const loadAddonsSpan=trace.startSpan("load_addons");(0,_dynamic_addons_LoadAddons__WEBPACK_IMPORTED_MODULE_18__.C)({extMessages:new _dynamic_messages_PermutiveMessages__WEBPACK_IMPORTED_MODULE_51__.a(messages),nextGen,messages,viewId,state,sessionManager,api,clientContext,externalData,logger,metrics,network,permutive:permutiveGlobal,q:permutiveGlobal.q,userId}),loadAddonsSpan.finish();const loadEnrichersSpan=trace.startSpan("load_enrichers"),enricherEnv={api,config,clientContext,logger,permutiveData,metrics,sessionManager,enrichers,network},loadEnrichersPromise=(0,_sdkql_event_collection_enrichment_RegisterEnrichers__WEBPACK_IMPORTED_MODULE_52__.H)(enricherEnv)();loadEnrichersPromise.then((()=>{loadEnrichersSpan.finish()})),yield(0,_initialisation_identity__WEBPACK_IMPORTED_MODULE_25__.TZ)({api,clientContext,eventCollection:nextGen.eventCollection,externalData,global:permutiveGlobal,identities,identitiesIngestor,logger,messages,metrics,network,nextGen,permutiveMethods,queryManager,reset:permutiveReset,stateSync,trace,unprocessedEvents,userId,sessionManager,sessionCount:nextGen.metricContext.current.session_count}),yield loadEnrichersPromise,(0,_initialisation_initialisationLifecycle__WEBPACK_IMPORTED_MODULE_53__.R)(queryManager,messages,metrics,state,logger),sdkReadySpan.finish()}))),(t=>`Exception during initialisation. Got ${t}`))},initialisationSequence=(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_32__.zG)(fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.Do,(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("support",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.Uo)((0,_initialisation_browserFeatures__WEBPACK_IMPORTED_MODULE_54__.O)(globalThis)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("queryWorker",(()=>_sdkql_query_language_queryWorkerInit__WEBPACK_IMPORTED_MODULE_3__.F)),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("partialTagWithKey",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.Uo)((0,_initialisation_permutiveTag__WEBPACK_IMPORTED_MODULE_26__.$o)(window)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("configFromQueryParams",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.Uo)((0,_Config__WEBPACK_IMPORTED_MODULE_22__.B9)()))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("tag",(t=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)((0,_initialisation_permutiveTag__WEBPACK_IMPORTED_MODULE_26__.je)(t.partialTagWithKey,t.configFromQueryParams)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("logger",(t=>{let{tag:e}=t;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)((0,_core_internals_PermutiveLogger__WEBPACK_IMPORTED_MODULE_55__.SX)(e.config))})),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("urls",(t=>{let{tag:e}=t;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)(new _http_PermutiveUrls__WEBPACK_IMPORTED_MODULE_56__.s(e.config))})),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("network",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)(new _http_PermutiveNetwork__WEBPACK_IMPORTED_MODULE_20__.E))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("namespace",(t=>{let{tag:e}=t;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)(new _core_state_PermutiveNamespace__WEBPACK_IMPORTED_MODULE_57__.L(e.config))})),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("messages",(t=>{let{logger:e}=t;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)(new _core_internals_SDKMessages__WEBPACK_IMPORTED_MODULE_58__.Q(e))})),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("consentModule",(t=>(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_32__.zG)((()=>(0,_Consent_Consent__WEBPACK_IMPORTED_MODULE_23__.NY)(Object.assign(Object.assign({},t),{consentRequired:t.tag.config.consentRequired}))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.Vn)((t=>t.message))))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("sessionStorage",(t=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)((0,_core_store_SessionStorage__WEBPACK_IMPORTED_MODULE_16__.u)(t.namespace,t.logger,t.consentModule.consentTracking)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("permutiveData",(t=>{let{tag:e,namespace:n,logger:r,consentModule:i}=t;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)((0,_core_state_PermutiveDataStoreWeb__WEBPACK_IMPORTED_MODULE_11__.S)(e.config,n,r,i.consentTracking))})),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("metrics",(t=>{let{tag:e,messages:n,logger:r,permutiveData:i}=t;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)((0,_core_metrics_Metrics__WEBPACK_IMPORTED_MODULE_59__.g)(sdkInitTimestamp,e.config,i,n,r))})),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("consent",(t=>(0,_Consent_InitialisationCheckWeb__WEBPACK_IMPORTED_MODULE_24__.D)(t))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.tS)((t=>initialiseWebSDK(t))))},333:(t,e,n)=>{n.r(e);var r=n(365),i=n(3735),o=n(6341),s=n(7927),a=n(2197),c=n(6567),u=n(4673),d=n(1500),l=n(2652),m=n(6308);class f{constructor(t,e){this.config=t,this.logger=e,this.defaultReplacementMap=this.filterReplacementMap(this.config.defaultMap),this.replacementMap=this.setReplacementMap(this.config.replacementMap)}get getReplacementMap(){return this.replacementMap}setReplacementMap(t){return this.replacementMap=Object.assign(Object.assign({},this.defaultReplacementMap),this.filterReplacementMap(t)),this.logger.debug(`enrichers[${this.config.name}]: replacement map updated`,this.getReplacementMap),this.getReplacementMap}}class p extends f{filterReplacementMap(t){return(0,i.zG)(t,l.qh,(0,d.DZ)((t=>{const[,e]=t;return(0,m.t)(e)?c.YP:(0,c.G)(t)})),(0,d.u4)({},((t,e)=>{let[n,r]=e;return void 0===r||(t[n]=r),t})))}}class h extends f{filterReplacementMap(t){return t}}const g="geoip",v="enricher:geoip",_={},b={include_geo:(null==_?void 0:_.include_geo)||!0,include_isp:(null==_?void 0:_.include_isp)||!0,include_ip_hash:(null==_?void 0:_.include_ip_hash)||!0,include_ip:(null==_?void 0:_.include_ip)||!1},y=(t,e)=>{var n;const{$ip_geo_info_continent:r,$ip_address:o,$ip_address_hash:c}=u.U,d={$ip_geo_info_continent:r,$ip_address:o,$ip_geo_info:{city:u.U.$ip_geo_info_city,continent:u.U.$ip_geo_info_continent,country:u.U.$ip_geo_info_country,postal_code:u.U.$ip_geo_info_postal_code,province:u.U.$ip_geo_info_province},$ip_address_hash:c,$ip_isp_info:{autonomous_system_number:0,isp:u.U.$ip_isp_info_isp,autonomous_system_organization:u.U.$ip_isp_info_autonomous_system_organization,organization:u.U.$ip_isp_info_organization}},l=(0,i.zG)({$ip_geo_info:null==t?void 0:t.geo_info,$ip_geo_info_continent:null===(n=null==t?void 0:t.geo_info)||void 0===n?void 0:n.continent,$ip_isp_info:null==t?void 0:t.isp_info,$ip_address:null==t?void 0:t.ip,$ip_address_hash:null==t?void 0:t.ip_hash},s.hX(a.ff((t=>void 0===t))));return new h({name:g,defaultMap:d,replacementMap:l},e)},w=t=>{let{clientContext:e,api:n,permutiveData:r,metrics:i,sessionManager:o,enrichers:s,network:a,logger:c,config:u}=t;const d=t=>{t.isp_info&&e.updateContext(["isp",t.isp_info.isp],["organization",t.isp_info.organization],["autonomous_system_number",t.isp_info.autonomous_system_number],["autonomous_system_organization",t.isp_info.autonomous_system_organization]),t.geo_info&&e.updateContext(["continent",t.geo_info.continent],["country",t.geo_info.country],["city",t.geo_info.city],["province",t.geo_info.province],["postal_code",t.geo_info.postal_code])},l=r.getData(v);return l&&l.session_id===o.getSessionId()?(d(l.data),s.register(y(l.data,c)),Promise.resolve()):(c.debug("enrichers[geoip]: start HTTP request"),k(n,i,u,b).then((t=>(c.debug("enrichers[geoip]: end HTTP request"),d(t),r.setData(v,{session_id:o.getSessionId(),data:t}),t))).catch((t=>(n.reportError(`Error while registering the geoip enricher: got ${t}`),null))).then((t=>{s.register(y(t,c))})))},k=(t,e,n,r)=>{const i=[];return r.include_geo&&i.push(["include","geo"]),r.include_isp&&i.push(["include","isp"]),r.include_ip&&i.push(["include","ip"]),r.include_ip_hash&&i.push(["include","ip_hash"]),t.reqWithMetrics(e,"sdk_http_geoip_seconds",{url:t.urls.getEndpointUrl("/geoip",(0,c.G)(n.apiVersion),i),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!1})},E=()=>(0,o.B)({load:w});var S=n(7582),P=n(2751);const I="watson";function D(t){if(!t)return[];const e=(0,d.xH)(t.filter(Boolean).map((t=>(t=>{const e=t.split("/").filter((t=>t));return e.map(((t,n)=>"/"+e.slice(0,n+1).join("/")))})(t.label))));return(0,d.jj)(P.Eq)(e)}const O=t=>{let{api:e,clientContext:n,config:r,enrichers:i,logger:o,metrics:s}=t;o.debug("enrichers[watson]: is enabled",r.watson.enabled);const a=r.watson.enabled?()=>(0,S.mG)(void 0,void 0,void 0,(function*(){const t=yield n.getClient();o.debug("enrichers[watson]: start HTTP request");const i=yield T(e,s,r,t.url);return o.debug("enrichers[watson]: end HTTP request",i),i})):()=>(0,S.mG)(void 0,void 0,void 0,(function*(){return o.debug("enrichers[watson]: stubbing response"),null})),c=a().then((t=>{n.updateContext([I,t||void 0]),i.register(((t,e)=>{var n,r,i,o;const s={$alchemy_concepts:null==t?void 0:t.concepts,$alchemy_document_emotion:null===(r=null===(n=null==t?void 0:t.emotion)||void 0===n?void 0:n.document)||void 0===r?void 0:r.emotion,$alchemy_document_sentiment:null===(i=null==t?void 0:t.sentiment)||void 0===i?void 0:i.document,$alchemy_entities:null==t?void 0:t.entities,$alchemy_entity_names:null===(o=null==t?void 0:t.entities)||void 0===o?void 0:o.map((t=>t.text)),$alchemy_keywords:null==t?void 0:t.keywords,$alchemy_taxonomy:null==t?void 0:t.taxonomy,$alchemy_taxonomy_labels:D(null==t?void 0:t.taxonomy),$taxonomy_labels:D(null==t?void 0:t.taxonomy)};return new p({name:I,defaultMap:{$alchemy_concepts:[],$alchemy_document_emotion:null,$alchemy_document_sentiment:null,$alchemy_entities:[],$alchemy_entity_names:[],$alchemy_keywords:[],$alchemy_taxonomy:[],$alchemy_taxonomy_labels:[],$taxonomy_labels:[]},replacementMap:s},e)})(t,o))}));return c.catch((t=>{o.error(`Error while registering the watson enricher: got ${t}`),s.track({name:"sdk_watson_classification_fail_count",value:1,labels:{}})})),c},T=(t,e,n,r)=>t.reqWithMetrics(e,"sdk_http_watson_seconds",{url:t.urls.getEndpointUrl("/watson",(0,c.G)(n.apiVersion)),method:"POST",contentType:"text/plain",dataType:"json",withCredentials:!1,payload:{url:r,classify:!0}}),M=()=>(0,o.B)({load:O});var x,C=n(4922);x=C.f,E(),M(),x().then((0,r.g_)((t=>console.warn(`Permutive was not initialized. ${t}`)),i.Q1))},2652:(t,e,n)=>{n.d(e,{Bf:()=>b,G6:()=>I,Gz:()=>w,HP:()=>q,Or:()=>T,PM:()=>l,PQ:()=>D,SL:()=>f,Z_:()=>x,a4:()=>h,aT:()=>_,b0:()=>k,b2:()=>p,bw:()=>U,cO:()=>O,eu:()=>g,fl:()=>S,k$:()=>y,lW:()=>M,lo:()=>G,m8:()=>E,qh:()=>d,rH:()=>z,rO:()=>A,vg:()=>C,vp:()=>m});var r=n(1500),i=n(3735),o=n(6567),s=n(7209),a=n(6017),c=n(2751),u=n(3992);const d=t=>Object.entries(t);function l(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce(((t,e)=>Object.assign(Object.assign({},t),e)),{})}function m(t){let e=0;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e&=e;return e}function f(t){return e=>{let n=0;for(let r of e){n=n+t(r)|0}return n}}a.ff(c.xb);function p(){let t,e;return{promise:new Promise(((n,r)=>{t=n,e=r})),reject:e,resolve:t}}function h(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r={waitTimeInMs:50,exponentialBackOff:!1,maxAttempts:20},{waitTimeInMs:s,exponentialBackOff:a,maxAttempts:c}=l(r,n);let d=0;const m=n=>new Promise((r=>Promise.resolve(e()).then((e=>e?Promise.resolve(t()).then((t=>r((0,o.G)(t)))):(0,i.zG)(d++,(t=>t<c?(0,u.HJ)((()=>r(m(n*(a?2:1)))),n):r(o.YP)))))));return m(s)}function g(t,e){const n=Object.create(null);for(const r of e)n[r]=t[r];return n}let v=[];function _(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:navigator.userAgent;if(v.unshift(t),v.length>1)return;const n=["beforeunload","pagehide"],r=n.concat(["visibilitychange"]),i=t=>{if(!o&&t){o=!0;const t=v;v=[],t.forEach((t=>{try{t()}catch(t){}}))}};let o=!1;r.forEach((t=>{window.addEventListener(t,(()=>{const n=("visibilitychange"!==t||document.hidden)&&P(e);i(n)}))})),n.forEach((t=>{window.addEventListener(t,(()=>i(!0)))}))}function b(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object.assign({capture:!0},e);const n=["visibilitychange","pagehide"];n.forEach((n=>window.addEventListener(n,(()=>o.Y3((()=>{"pagehide"!==n&&"hidden"!==document.visibilityState||t()}))),{capture:e.capture})))}function y(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(t=>(t^(globalThis.crypto||globalThis.msCrypto).getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)))}function w(t){return 36===t.length&&/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i.test(t)}function k(t,e){const n=Object.keys(t),r=n.length,i={};for(let s=0;s<r;s++){const r=n[s],a=e(r,t[r]);(0,o.pC)(a)&&(i[r]=a.value)}return i}function E(){const t={},e=arguments.length;for(let n=0;n<e;n++){const[e,r]=n<0||arguments.length<=n?void 0:arguments[n];t[e]=r}return t}function S(t,e){return k(t,((t,n)=>e(t)?(0,o.G)(n):o.YP))}function P(t){return/Mobi|Android/i.test(t)}function I(t){return/^((?!chrome|android).)*safari/i.test(t)}function D(t,e){return new Promise((n=>{var r;(0,u.HJ)((()=>{Promise.resolve(t()).then(n)}),null!==(r=null==e?void 0:e.timeout)&&void 0!==r?r:0)}))}function O(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}const T=()=>({equals:(t,e)=>Object.is(t,e)});function M(t){return(0,s.Zt)(((e,n)=>{const r=t.indexOf(e),i=t.indexOf(n);switch(!0){case-1===r&&-1===i:return 0;case-1!==r&&-1===i:return-1;case-1===r&&-1!==i:return 1;default:return r<=i?-1:1}}))}function x(t,e,n){return function(){try{return n(...arguments)}catch(n){t.reportError(n,e.get())}}}function C(t){return e=>null!=e&&t in e?e[t]:void 0}function q(t){let e=o.YP;const n=(0,o.fS)((()=>{const n=t();return e=(0,o.G)(n),n}));return()=>n(e)}const A=t=>e=>{var n;const r=Object.assign({},e);for(const i in t)r[i]=null===(n=t[i])||void 0===n?void 0:n.call(t,e[i]);return r};function U(t){return e=>(t(e),e)}const G=t=>e=>{const n=t.slice(0,-1),s=t.slice(-1)[0];return(0,i.zG)(n,r.f2((t=>{let[n,r]=t;return(0,i.zG)(e,o.DT(n),o.UI(r))})),o.fS((()=>s(e))))},j=t=>e=>{if("number"==typeof e)return e;if("string"==typeof e){const n=t(e);return Number.isNaN(n)?void 0:n}},z=j(parseInt);j(parseFloat)},6574:(t,e,n)=>{n.d(e,{l:()=>r});class r{constructor(t){var e;this.config=t,this.shouldUsePerformanceMark=!1,this.placeholderSpan={spanId:null,finish:()=>({})},this.shouldUsePerformanceMark=(null===(e=null===window||void 0===window?void 0:window.performance)||void 0===e?void 0:e.mark)&&this.config.tracingEnabled}startSpan(t){var e;if(this.shouldUsePerformanceMark){const n=this.generateId(),r=`permutive_${t}`,i=`${r}${n}_start`;return null===(e=null===window||void 0===window?void 0:window.performance)||void 0===e||e.mark(i),{spanId:i,finish:()=>{var t,e;null===(e=null===(t=null===window||void 0===window?void 0:window.performance)||void 0===t?void 0:t.measure)||void 0===e||e.call(t,r,i)}}}return this.placeholderSpan}generateId(){return"_"+Math.random().toString(36).substr(2,9)}}},4730:(t,e,n)=>{n.d(e,{b:()=>o});var r=n(2652),i=n(3992);class o{constructor(t,e){this.timeoutDurationInMilliseconds=t,this.maxTimeOutDurationInMilliseconds=e}schedule(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeoutDurationInMilliseconds,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.maxTimeOutDurationInMilliseconds;return this.debounce(t,e,n)}scheduleAccumulated(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeoutDurationInMilliseconds,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.maxTimeOutDurationInMilliseconds;return this.debounce(t,n,r,e)}scheduleForPageUnload(t){return(0,r.aT)(t)}debounce(t,e,n,o){let s,a,c,u=[];return d=>{o&&(c=o.concat(null!=c?c:o.empty,d));const l=(0,r.b2)();u.push(l);return null==s||s(),s=(0,i.HJ)((()=>{null==a||a(),a=void 0;const e=t(c||d);u.forEach((t=>t.resolve(e))),c=null==o?void 0:o.empty,u=[]}),e),a||(a=(0,i.HJ)((()=>{null==s||s(),a=void 0;const e=t(c||d);u.forEach((t=>t.resolve(e))),c=null==o?void 0:o.empty,u=[]}),n)),l.promise}}}},4996:(t,e,n)=>{n.d(e,{i:()=>i});var r=n(3992);class i{constructor(t){this.messages=t,this.queue=[],this.nextNotify=null,t.on("permutive:taskQueue:update",(()=>{this.execute()}))}add(t){this.queue.push(t),this.notify()}notify(){const t=()=>{this.messages.emit("permutive:taskQueue:update")},e=(new Date).getTime();null===this.nextNotify||this.nextNotify<e-50?(this.nextNotify=e,t()):this.nextNotify<=e&&(this.nextNotify=e+50,(0,r.HJ)(t,50))}execute(){if(0===this.queue.length)return;let t=!1,e=!1,n=0;for(let r=0;r<this.queue.length;r++){const i=this.queue[r];if(i.complete)n+=1;else if(i.started)e=!0,t=t||i.blocks();else{if(i.waits()&&e)break;t||(e=!0,t=t||i.blocks(),i.execute((()=>{this.notify()})))}}this.queue.splice(0,n)}size(){return this.queue.length}}},3030:(t,e,n)=>{n.d(e,{_Y:()=>s,bk:()=>o,zM:()=>i});var r=n(3735);const i=()=>{var t,e;const n=null===(e=null===(t=window.location.href.split("?")[1])||void 0===t?void 0:t.split("#")[0])||void 0===e?void 0:e.split("&");return void 0===n?{}:n.reduce(((t,e)=>{const[n,r]=e.split("=");return Object.assign(Object.assign({},t),{[n]:r})}),{})},o=t=>{if(!t)return"";return(0,r.zG)(t,(t=>{const e=t.length-1;return"/"===t[e]?t.slice(0,e):t}))};function s(t){const e=t.match(/\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b/),n=t.match(/[a-z0-9][a-z0-9-]+\.[a-z.]{2,24}$/i),r=t.match(/localhost/);if(n&&n.length>0){const e=t.split(".").reverse();return e.length>=3&&e[1].match(/^(com|edu|gov|net|mil|org|nom|co|ac|name|info|biz)$/i)?e[2]+"."+e[1]+"."+e[0]:e[1]+"."+e[0]}return e&&(null==e?void 0:e.length)>0?e[0]:r&&(null==r?void 0:r.length)>0?"localhost":""}},7826:(t,e,n)=>{n.d(e,{$7:()=>g,Cg:()=>f,Qd:()=>h,cs:()=>p,dN:()=>l,zi:()=>m});var r=n(365),i=n(3735),o=n(6567),s=n(3328),a=n(2116),c=n(2851),u=n(2652);const d="[PrebidJS]";function l(t){const e=(()=>{const t=["pbjs",...window._pbjsGlobals||[]];return[...new Set(t)]})();t.logger.debug(d,"Found keys",e);return a.K4((()=>(0,i.zG)(e,s.UI((0,i.ls)((t=>(t=>{const e={maxAttempts:100,waitTimeInMs:50};let n;return{windowPropertyKey:t,pbjs:(0,u.a4)((()=>n),(()=>{const e=(0,i.zG)(window,(0,u.vg)(t));return!(!(null==e?void 0:e.que)||"function"!=typeof(null==e?void 0:e.getEvents)||(n=e,0))}),e)}})(t)),(e=>(0,i.zG)(c.p4(e.pbjs),c.UI((n=>{const s=r.pF((n=>(n.message=`Failed to resolve key "${e.windowPropertyKey}". ${n.message}`,t.reportError(`${d} ${n.toString()}`),o.YP)));return(0,i.zG)(n,(0,u.bw)(o.UI((n=>t.logger.debug(d,`Completed check for key "${e.windowPropertyKey}"`,{result:n})))),o.UI(s),o.UI(o.UI((t=>({windowPropertyKey:e.windowPropertyKey,pbjs:t})))))})))))),(t=>c.vP(...t)),c.UI((t=>({completedChecks:t.every(o.pC),pbjsKeyPairs:t.map(o.xH)}))),c.UI((t=>{let{pbjsKeyPairs:e,completedChecks:n}=t;const r=e.filter(o.pC),[a,...c]=r;return{completedChecks:n,mainPair:null!=a?a:o.YP,otherPairs:(0,i.zG)(c,s.DZ(i.yR))}})))))}const m=t=>"function"==typeof t.readConfig?t.readConfig():t.getConfig();function f(t){var e;const n=null===(e=t.meta)||void 0===e?void 0:e.advertiserDomains;if("string"==typeof n)return[n];if(Array.isArray(n)){const t=n.filter((t=>"string"==typeof t));return t.length>0?t:void 0}}const p=t=>{var e;const n=t.appnexus&&"object"==typeof t.appnexus&&"buyerMemberId"in t.appnexus&&t.appnexus.buyerMemberId,r=t.rubicon&&"object"==typeof t.rubicon&&"networkId"in t.rubicon&&t.rubicon.networkId,i=n||r||(null===(e=null==t?void 0:t.meta)||void 0===e?void 0:e.networkId);return i?`${i}`:void 0},h=t=>{var e;const n=t=>isNaN(t)?void 0:t;try{return"number"==typeof t.cpm?n(t.cpm):(0,i.zG)(null!==(e=t.cpm)&&void 0!==e?e:"",parseFloat,n)}catch(t){return}},g=t=>t.dealId?`${t.dealId}`:void 0},122:(t,e,n)=>{n.d(e,{X:()=>r});const r=t=>{let e=!0;const n=[];return{addBlocker:r=>{n.push(r),t.logger.log("<blockers> added blocker "+r),t.messages.on(r,(()=>{if(e){const i=n.indexOf(r);i>=0&&(n.splice(i,1),t.logger.log("<blockers> removed blocker "+r)),0===n.length&&(e=!1,t.messages.emit("permutive:blockers:empty"),t.logger.log("<blockers> complete"))}}))}}}},7748:(t,e,n)=>{n.d(e,{X:()=>r});class r{constructor(){this.properties={}}overrideCustomProps(t){this.properties=t}getCustomProps(){return this.properties}}},7200:(t,e,n)=>{n.d(e,{J:()=>i});var r=n(6308);class i{constructor(){this.replacementMap={}}register(t){this.replacementMap=Object.assign(Object.assign({},this.replacementMap),t.getReplacementMap)}enrich(t,e){return this.enrichRecursive(t,e)}enrichRecursive(t,e){const n={output:{},isFullyEnriched:!0},i=Object.keys(t);for(let o=0;o<i.length;o++){const s=i[o],a=t[s];switch(!0){case(0,r.t)(a):const[t,i]=this.isPropertyReplaceable(a);n.output[s]=t?i:a,this.replacementMap.hasOwnProperty(a)&&i===a&&e&&delete n.output[s],n.isFullyEnriched=!!t&&n.isFullyEnriched;break;case null!==a&&"object"==typeof a&&a.constructor===Object:const o=this.enrichRecursive(a,e);n.output[s]=o.output,n.isFullyEnriched=n.isFullyEnriched&&o.isFullyEnriched;break;default:n.output[s]=a}}return n}isPropertyReplaceable(t){const e=this.replacementMap[t];return[this.replacementMap.hasOwnProperty(t)&&e!==t,e]}}},6341:(t,e,n)=>{n.d(e,{B:()=>a,H:()=>c});var r=n(3735),i=n(7407),o=n(6934);const s=[],a=t=>{s.push(t)},c=t=>{const e=s.map((e=>(0,o.Y3)((()=>e.load(t)),(e=>{t.api.reportError(e)}))));return(0,r.zG)((0,i.RD)(e),(0,i.UI)(r.Q1))}},6308:(t,e,n)=>{n.d(e,{t:()=>r});const r=t=>"string"==typeof t&&"$"===t[0]},2546:(t,e,n)=>{n.r(e),n.d(e,{make:()=>A});var r=n(3735),i=n(7582);let o,s;const a=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,l=new WeakMap;let m={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return c.get(t);if("objectStoreNames"===e)return t.objectStoreNames||u.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return h(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function f(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(s||(s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(g(this),e),h(a.get(this))}:function(...e){return h(t.apply(g(this),e))}:function(e,...n){const r=t.call(g(this),e,...n);return u.set(r,e.sort?e.sort():[e]),h(r)}}function p(t){return"function"==typeof t?f(t):(t instanceof IDBTransaction&&function(t){if(c.has(t))return;const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{e(),r()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)}));c.set(t,e)}(t),e=t,(o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((t=>e instanceof t))?new Proxy(t,m):t);var e}function h(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{e(h(t.result)),r()},o=()=>{n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)}));return e.then((e=>{e instanceof IDBCursor&&a.set(e,t)})).catch((()=>{})),l.set(e,t),e}(t);if(d.has(t))return d.get(t);const e=p(t);return e!==t&&(d.set(t,e),l.set(e,t)),e}const g=t=>l.get(t);const v=["get","getKey","getAll","getAllKeys","count"],_=["put","add","delete","clear"],b=new Map;function y(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(b.get(e))return b.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=_.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!v.includes(n))return;const o=async function(t,...e){const o=this.transaction(t,i?"readwrite":"readonly");let s=o.store;return r&&(s=s.index(e.shift())),(await Promise.all([s[n](...e),i&&o.done]))[0]};return b.set(e,o),o}m=(t=>({...t,get:(e,n,r)=>y(e,n)||t.get(e,n,r),has:(e,n)=>!!y(e,n)||t.has(e,n)}))(m);var w=n(2688),k=n(365),E=n(7407),S=n(6934),P=n(2652);function I(t){return"development"===t.environment?window.isSecureContext:"https:"===window.location.protocol}var D=n(3992);const O="[IDB]",T=(t,e,n,o,s,a)=>(0,r.zG)((0,E.of)(t.getNamespacedStorageKey(s)),(0,E.tS)((t=>(0,S.Y3)((()=>(0,i.mG)(void 0,void 0,void 0,(function*(){return n.put(o,a,t)}))),w.w))),(0,E.UI)((0,k.g_)((t=>{throw e.error(O,`Failed to store crypto key to ${o} due to unexpected error,\n`,t),t}),(()=>a))),(t=>t()));class M{constructor(t,e,n,r,i,o,s,a){this.namespace=t,this.logger=e,this.cryptoAlg=n,this.idb=r,this.mainObjectStore=i,this.keyObjectStore=o,this.keyObjectKey=s,this.cryptoKey=a,this.MAX_CONSECUTIVE_PUTS=30,this.puts=1,this.hasForcedCompaction=!1,this.logDebug("Created",this.idb)}static initialise(t,e,n,o,s,a,c,u,d,l){const m=(0,P.G6)(navigator.userAgent)&&!1,f=[I(t),s.isAvailable(),!m].every((t=>!0===t)),p=(t,n,a)=>(0,i.mG)(this,void 0,void 0,(function*(){return(0,r.zG)(yield t.get(a,e.getNamespacedStorageKey(n)),(t=>(0,i.mG)(this,void 0,void 0,(function*(){return null!=t?t:s.generateKey(!1)}))),(n=>(0,i.mG)(this,void 0,void 0,(function*(){return T(e,o,t,u,d,yield n)})))).catch((t=>{const e=(0,w.w)(t);throw o.error(O,"Get crypto key failed. Got\n",e),e}))})),h=(t,e,n)=>e.includes(n)?(0,r.Q1)():t.createObjectStore(n),g=f?(0,k.Y3)((()=>function(t){if(!(0,P.G6)(navigator.userAgent)||!indexedDB.databases)return Promise.resolve();let e=()=>{},n=0;return new Promise((t=>{const r=()=>(n++,indexedDB.databases().finally((0,D.GL)(t)));e=(0,D.UM)(r,100),r()})).finally((()=>{e(),t.track({name:"sdk_idb_conn_attempt_safari_count",value:n,labels:{}})}))}(n).then((()=>x(a,l,{upgrade:t=>{const e=[...t.objectStoreNames];h(t,e,c),h(t,e,u)}})))),String):(0,k.t$)("Connection not attempted. Default to localStorage");return(0,k.g_)((t=>(0,S.t$)(t)),(t=>(0,r.zG)((0,S.Y3)((()=>t.then((t=>(0,i.mG)(this,void 0,void 0,(function*(){return{db:t,cryptoKey:yield p(t,d,u)}}))))),String),(0,S.UI)((t=>{let{db:n,cryptoKey:r}=t;return new M(e,o,s,n,c,u,d,r)})))))(g)}put(t,e){return(0,i.mG)(this,void 0,void 0,(function*(){return(0,r.zG)((()=>(0,i.mG)(this,void 0,void 0,(function*(){return(0,r.bc)(JSON.stringify(t),this.cryptoKey)}))),(0,E.tS)((t=>{let[e,n]=t;return(0,E.of)(this.cryptoAlg.encrypt(n,e))})),(0,E.tS)((t=>()=>(0,i.mG)(this,void 0,void 0,(function*(){return yield this.resetIfRequired(this.puts++),t})))),(0,E.tS)((t=>(0,S.Y3)((()=>this.idb.put(this.mainObjectStore,t,this.namespace.getNamespacedStorageKey(String(e)))),w.w))),(0,E.UI)((0,k.g_)((n=>{throw this.logError(`Failed to put "${e.toString()}" value`,t,". Got \n",n),"QuotaExceededError"===n.name&&this.forceCompaction(),n}),(()=>e))),(t=>t()))}))}get(t){return(0,r.zG)(this.namespace.getNamespacedStorageKey(String(t)),(e=>this.idb.get(this.mainObjectStore,e).then((t=>(0,i.mG)(this,void 0,void 0,(function*(){return t?JSON.parse(yield this.cryptoAlg.decrypt(this.cryptoKey,t)):null})))).catch((e=>{const n=(0,w.w)(e);throw this.logError(`Get ${t.toString()} failed. Got`,n),n}))))}delete(t){return(0,r.zG)(this.namespace.getNamespacedStorageKey(String(t)),(t=>this.idb.delete(this.mainObjectStore,t)))}deleteStore(){return this.logDebug("Deleting",this.idb),this.idb.close(),C(this.idb.name)}forceCompaction(){if(this.hasForcedCompaction)return null;this.hasForcedCompaction=!0,this.logDebug("Attempting to force compaction");const t=`__${this.mainObjectStore}`;return x(t).then((e=>(e.close(),C(t))))}resetIfRequired(t){return(0,P.G6)(navigator.userAgent)&&t%this.MAX_CONSECUTIVE_PUTS==0?this.reset():Promise.resolve()}reset(){return(0,i.mG)(this,void 0,void 0,(function*(){const t=this.idb.name,e=this.idb.version;yield this.deleteStore(),this.idb=yield x(t,e),this.idb.createObjectStore(this.mainObjectStore),this.idb.createObjectStore(this.keyObjectStore),yield T(this.namespace,this.logger,this.idb,this.keyObjectStore,this.keyObjectKey,this.cryptoKey),this.logDebug("Reset to",this.idb)}))}logDebug(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.logger.debug(O,...e)}logError(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.logger.error(O,...e)}}const x=(0,r.ls)((function(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=h(s);return r&&s.addEventListener("upgradeneeded",(t=>{r(h(s.result),t.oldVersion,t.newVersion,h(s.transaction))})),n&&s.addEventListener("blocked",(()=>n())),a.then((t=>{o&&t.addEventListener("close",(()=>o())),i&&t.addEventListener("versionchange",(()=>i()))})).catch((()=>{})),a}),D.t_,(t=>t.then((t=>({close:t.close.bind(t),createObjectStore:(0,r.ls)(t.createObjectStore.bind(t),r.Q1),delete:(0,r.ls)(t.delete.bind(t),D.t_),get:(0,r.ls)(t.get.bind(t),D.t_),get name(){return t.name},put:(0,r.ls)(t.put.bind(t),D.t_),get version(){return t.version}}))))),C=(0,r.ls)((function(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",(()=>e())),h(n).then((()=>{}))}),D.t_);var q=n(8259);const A=(t,e,n,i,o,s,a,c,u,d,l)=>(0,r.zG)(M,(0,q._z)({logger:d,consentTracking:l,prefix:O})).initialise(t,e,n,d,i,o,s,a,c,u)},6197:(t,e,n)=>{n(2652)},9581:(t,e,n)=>{n.r(e),n.d(e,{PrebidAddon:()=>y,load:()=>b});var r=n(9853),i=n(7582),o=n(1500),s=n(365),a=n(3735),c=n(6567),u=n(2851),d=n(2652),l=n(7826);const m="prebidAddonLoadingtime",f="prebidAddonInitStart",p="prebidAddonInitEnd",h=(0,r.Hn)("prebid")("revenue_insights_enabled",!1);class g{constructor(t){this.trackedBids=[],this.logger=t.logger,this.permutive=t.permutive,this.options=t,this.startRevenueInsights()}startRevenueInsights(){return(0,i.mG)(this,void 0,void 0,(function*(){if(this.logger.debug("[Revenue Insights]","revenue insights enabled",h),!1===h)return;performance.mark(f);const t={maxAttempts:200,waitTimeInMs:50};(0,a.zG)(this.options.pbjs,u.UI(c.UI((e=>(0,d.a4)((()=>this.runRevenueInsights(e)),(()=>{var t;return!!(null===(t=window.googletag)||void 0===t?void 0:t.pubads)}),t)))))}))}runRevenueInsights(t){this.trackMetrics();const e=()=>{t.getAllWinningBids().forEach((t=>n(t,!0))),t.onEvent("bidWon",(t=>n(t,!0)))},n=(t,e)=>(0,s.Y3)((()=>u(t,e)),(t=>{})),r=t=>{var e,n,r,i,o,s;const a=(null===(e=null==t?void 0:t.meta)||void 0===e?void 0:e.brandName)||(null===(n=null==t?void 0:t.meta)||void 0===n?void 0:n.clickUrl)||(null===(r=null==t?void 0:t.adomain)||void 0===r?void 0:r[0])||(null===(i=null==t?void 0:t.meta)||void 0===i?void 0:i.advertiserName)||(null!==(o=(0,l.Cg)(t))&&void 0!==o?o:[])[0]||(null===(s=null==t?void 0:t.adserverTargeting)||void 0===s?void 0:s.hb_adomain);return a?`${a}`:void 0},i=t=>{var e,n,r;const i=t.rubicon&&"object"==typeof t.rubicon&&"advertiserId"in t.rubicon&&t.rubicon.advertiserId||(null===(e=null==t?void 0:t.meta)||void 0===e?void 0:e.brandId)||(null===(n=null==t?void 0:t.meta)||void 0===n?void 0:n.buyerId)||(null===(r=null==t?void 0:t.meta)||void 0===r?void 0:r.advertiserId);return i?`${i}`:void 0},a={equals:(t,e)=>t.ad_unit_code===e.ad_unit_code&&t.ad_id===e.ad_id&&t.auction_id===e.auction_id&&t.winning_bid===e.winning_bid},c=t=>!(0,o.t9)(a)(t,this.trackedBids),u=(e,n)=>{const o=(0,l.zi)(t),s=((t,e,n)=>{var o,s;return{ad_id:null!==(o=t.adId)&&void 0!==o?o:"",ad_unit_code:null!==(s=t.adUnitCode)&&void 0!==s?s:"",bidder:t.bidder,bidder_timeout:n,deal_id:(0,l.$7)(t),cpm:(0,l.Qd)(t),hb_pb:t.adserverTargeting&&t.adserverTargeting.hb_pb,height:(0,d.rH)(t.height),width:(0,d.rH)(t.width),time_to_respond:t.timeToRespond,bid_available:"string"==typeof t.statusMessage&&t.statusMessage.indexOf("empty")<0,winning_bid:e,advertiser_id:i(t),advertiser_name:r(t),dsp_id:(0,l.cs)(t),auction_id:t.auctionId}})(e,n,(0,d.rH)(o.bidderTimeout));c(s)&&(s.cpm&&s.cpm>0&&n&&this.permutive.track("PrebidBid",s),this.updateTrackedBids(s))};t.que.push((()=>{window.googletag.cmd.push(e)}))}trackMetrics(){performance.mark(p),performance.measure(m,f,p);const t=performance.getEntriesByName(m)[0].duration;this.options.metrics.track({name:"sdk_addon_init_duration_seconds",value:t,labels:{addon:"prebid"}})}updateTrackedBids(t){const e=this.trackedBids.findIndex((e=>t.ad_id===e.ad_id&&t.winning_bid!==e.winning_bid));e>-1?this.trackedBids[e]=Object.assign(Object.assign({},this.trackedBids[e]),t):this.trackedBids.push(t)}}const v="prebid",_=(0,r.Hn)("prebid")("data_provider_config",{ac_bidders:[]}),b=t=>{(0,r.Hn)(v)("auto_init",!1)&&t.q.push({functionName:"addon",arguments:[v,{}]})};class y extends g{constructor(t){super(t),this.dataProviderParamsFromIntegrationConfig={},this.logger=t.logger,this.externalData=t.externalData,this.parsePrebidConfig()}getPermutiveRtdConfig(){return this.logDebug("RTD config retrieved",this.dataProviderParamsFromIntegrationConfig),this.dataProviderParamsFromIntegrationConfig}storeAndSetPermutiveRtdConfig(t){this.externalData.setExternalJsonData("permutive-prebid-rtd",t),this.dataProviderParamsFromIntegrationConfig=t}parsePrebidConfig(){this.logDebug("data provider config",_);const{ac_bidders:t}=_;this.storeAndSetPermutiveRtdConfig({acBidders:t})}logDebug(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.logger.log("[prebid]",...e)}}},8036:(t,e,n)=>{n.d(e,{AG:()=>a,UC:()=>o,Yh:()=>s});var r=n(6567),i=n(2652);const o=(t,e,n)=>t in e||(()=>{const e="number"==typeof t?t:parseInt(t);return!1===isNaN(e)&&n.has(e)})(),s=t=>(0,i.b0)(t,((t,e)=>e.state?(0,r.G)({[e.checksum]:e.state}):r.YP));function a(t){var e;return["SegmentEntry","SegmentExit"].includes(t.name)&&void 0!==(null===(e=t.properties)||void 0===e?void 0:e.segment_number)}},1628:(t,e,n)=>{n.d(e,{c:()=>$t,e:()=>Bt});var r=n(7183),i=n(2688),o=n(3735),s=n(6934);const a=()=>({kind:"null",value:null}),c=t=>({kind:"string",value:t}),u=t=>({kind:"number",value:t}),d=t=>({kind:"array",value:t}),l=t=>({kind:"object",value:t}),m=t=>t,f=()=>({kind:"bottom"}),p=t=>({kind:"inner",a:t}),h=t=>({kind:"top",error:t}),g=t=>({kind:"unbounded",group:t}),v=(t,e)=>({kind:"windowed",key:e,group:t}),_=(t,e,n)=>({kind:"countLimit",n,limit:e,group:t}),b=(t,e,n)=>({kind:"uniqueLimit",n,limit:e,group:t}),y=t=>({kind:"numberGroup",group:t}),w=t=>({kind:"stringGroup",group:t}),k=t=>({kind:"tuple",tuple:t}),E=t=>({state:t}),S=(t,e)=>({commands:t,payload:e});var P=n(7209),I=n(2751);const D=(t,e)=>{switch(t.kind){case"bottom":return{kind:"bottom"};case"inner":return p(e(t.a));case"top":return h(t.error)}},O=t=>(0,P.Zt)(((e,n)=>{if("bottom"===e.kind&&"bottom"===n.kind)return 0;if("bottom"===e.kind)return-1;if("bottom"===n.kind)return 1;if("top"===e.kind&&"top"===n.kind)return I.Df.compare(e.error,n.error);if("top"===e.kind)return 1;if("top"===n.kind)return-1;if("inner"===e.kind&&"inner"===n.kind)return t.compare(e.a,n.a);throw new Error("Non exhaustive match in extendedAlgebraOrd")}));var T=n(6567),M=n(1885),x=n(1500),C=n(365),q=function(t){return-1===t?1:1===t?-1:0};function A(t,e){return(0,x.oA)(t.map(e))}function U(t,e,n,r){const i=(t,e)=>{if(0===t.length)return(0,x.oA)(e.map((t=>(0,T.G)({1:t[1],2:n(T.YP,(0,T.G)(t[2]))}))));if(0===e.length)return(0,x.oA)(t.map((t=>(0,T.G)({1:t[1],2:n((0,T.G)(t[2]),T.YP)}))));if(t.length>0&&e.length>0&&(0,P.lt)(r)(t[0][1],e[0][1])){const[r,...o]=t,s=r[1],a=r[2];return(0,x.Ce)({1:s,2:n((0,T.G)(a),T.YP)})(i(o,e))}if(t.length>0&&e.length>0&&(0,P.gt)(r)(t[0][1],e[0][1])){const[r,...o]=e,s=r[1],a=r[2];return(0,x.Ce)({1:s,2:n(T.YP,(0,T.G)(a))})(i(t,o))}if(t.length>0&&e.length>0){const[r,...o]=t,[s,...a]=e,c=r[1],u=r[2],d=s[2];return(0,x.Ce)({1:c,2:n((0,T.G)(u),(0,T.G)(d))})(i(o,a))}throw new Error("Non exhaustive match in mapOption2")},o=(0,P.Uz)((t=>t[1]))(r),s=(t=>{const e=A(t,(t=>(0,T.pC)(t[2])?(0,T.G)({1:t[1],2:t[2].value}):T.YP));return 0===e.length?T.YP:(0,T.G)(e)})(i((0,x.DY)(o)([...t].map((t=>({1:t[0],2:t[1]})))),(0,x.DY)(o)([...e].map((t=>({1:t[0],2:t[1]}))))));return(0,T.UI)((t=>new Map(t.map((t=>[t[1],t[2]])))))(s)}function G(t,e,n,r){const i=(0,P.Uz)((t=>t[0]))(r),o=(0,x.DY)(i)([...e]).reduceRight(((t,e)=>{if((0,C.nM)(t)){const r=n(e[1],t.left);return(0,T.pC)(r)?(0,C.t$)(r.value):(0,C.F2)(e[0])}return t}),(0,C.t$)(t));return(0,T.Uo)(o)}function j(t,e){return new Map([...t].map(e))}function z(t,e){return new Map([...t].filter(e))}var R=n(4268),L=n(4011);function B(t){return JSON.stringify(K(t))}function K(t){switch(t.kind){case"null":return N.encode(t);case"string":return F.encode(t);case"number":return Y.encode(t);case"array":return Q.encode(t);case"object":return H.encode(t)}}function $(t){return null===t?N.decode(t):"number"==typeof t?Y.decode(t):"string"==typeof t?F.decode(t):Array.isArray(t)?Q.decode(t):H.decode(t)}const W=(t,e)=>(0,C.t$)(`Failed to decode. Input was ${JSON.stringify(t)}. Codec type was ${e}`),N={encode:t=>null,decode:t=>null===t?(0,C.F2)({kind:"null",value:null}):W(t,"SimpleNull")},F={encode:t=>t.value,decode:t=>"string"==typeof t?(0,C.F2)(c(t)):W(t,"SimpleString")},Y={encode:t=>t.value,decode:t=>"number"==typeof t?(0,C.F2)(u(t)):W(t,"SimpleNumber")},Q={encode:t=>t.value.map(K),decode:t=>{if(Array.isArray(t)){const e=(0,x.fw)(C.g1)($)(t);return(0,C.UI)(d)(e)}return W(t,"SimpleArray")}},H={encode:t=>{const e=[...t.value.entries()];return Object.assign({},...Array.from(e,(([t,e])=>({[t]:K(e)}))))},decode:t=>{if(t&&t.constructor===Object){const e=(0,x.fw)(C.g1)((([t,e])=>(0,o.zG)($(e),(0,C.UI)((e=>(0,o.bc)(t,e))))))(Object.entries(t));return(0,C.UI)((t=>l(new Map([...t]))))(e)}return W(t,"SimpleObject")}};function V(t){return(0,o.zG)(t,X,(0,T.UI)(B),(0,T.fS)((()=>"<encode error>")))}function J(t){return(0,T.UI)(it)(function(t){switch(t.state.kind){case"top":return(0,T.G)(c(t.state.error));case"bottom":return T.YP;case"inner":return X(t.state.a)}}(t))}function X(t){return function(t){switch(t.kind){case"numberGroup":case"stringGroup":return Z(t.group);case"tuple":return t.tuple.length>0}}(t.payload)?(0,T.G)(d(function(t,e){const n=(0,T.UI)((t=>(0,x.Ce)(t)(e)))(t);return(0,T.fS)((()=>e))(n)}((0,T.UI)((t=>c(function(t){const e=t=>(0,T.EQ)((()=>""),(t=>"b"+JSON.stringify(t)))(t.bound),n=t=>{switch(t.operation){case"add":return"p";case"mul":return"m";case"max":return"v";case"min":return"n"}},r=t=>{const r=e(t[1])+n(t[1]);return 1===t[2]?r:r+JSON.stringify(t[2])};return t.map(r).join("")}(t))))(t.commands),function(t){const e=t=>{switch(t.kind){case"bottom":return{kind:"null",value:null};case"top":return c(t.error);case"inner":return u(t.a)}},n=t=>A([tt,et,t=>(0,o.zG)(t,rt,l,T.G)],(e=>e(t))),r=t=>A([tt,nt,t=>(0,o.zG)(t,rt,(t=>j(t,(([t,e])=>[JSON.stringify(t),e]))),l,T.G)],(e=>e(t)));switch(t.kind){case"tuple":return t.tuple.map(e);case"stringGroup":return n(t.group);case"numberGroup":return r(t.group)}}(t.payload)))):T.YP}function Z(t){switch(t.kind){case"unbounded":return t.group.size>0;case"windowed":return t.group.size>0||(0,T.pC)(t.key);case"countLimit":case"uniqueLimit":return t.group.size>0||(0,T.pC)(t.limit)}}function tt(t){switch(t.kind){case"unbounded":return T.YP;case"windowed":return(0,T.G)(c("w"));case"countLimit":return(0,T.G)(c(1===t.n?"x":`x${t.n}`));case"uniqueLimit":return(0,T.G)(c(1===t.n?"u":`u${t.n}`))}}function et(t){switch(t.kind){case"unbounded":return T.YP;case"windowed":return(0,T.G)(c((0,T.pC)(t.key)?t.key.value:""));case"countLimit":case"uniqueLimit":return(0,T.G)(c((0,T.pC)(t.limit)?t.limit.value:""))}}function nt(t){switch(t.kind){case"unbounded":return T.YP;case"windowed":return(0,T.pC)(t.key)?(0,T.G)(u(t.key.value)):(0,T.G)({kind:"null",value:null});case"countLimit":case"uniqueLimit":return(0,T.pC)(t.limit)?(0,T.G)(u(t.limit.value)):(0,T.G)({kind:"null",value:null})}}function rt(t){switch(t.kind){case"unbounded":case"windowed":case"countLimit":case"uniqueLimit":return t.group}}function it(t){switch(t.kind){case"array":return 0===t.value.length?{kind:"null",value:null}:1===t.value.length?it(t.value[0]):d(t.value.map(it));case"object":return(0,o.zG)(z(t.value,(([t,e])=>"null"!==e.kind)),(t=>j(t,(t=>[t[0],it(t[1])]))),l);default:return t}}function ot(t){const e=t=>{if(0===t.length)return{kind:"bottom"};const e=(t=>{if(4!==t.length)return T.YP;const[e,n,r,i]=t;if("string"===e.kind&&"string"===n.kind&&"object"===i.kind){const t=(0,T.DT)((t=>st(t[1].value)&&at(t[2].value)))({1:e,2:n});return(0,T.UI)((t=>({prim:t[1].value,grp:t[2].value,cutoff:r,m:i.value})))(t)}return T.YP})(t);if((0,T.pC)(e)){const{prim:t,grp:n,cutoff:r,m:i}=e.value,o=ct(r,i,ut(n));return"string"==typeof o?h(o):p(S(dt(t),o))}const n=(t=>{if(3!==t.length)return T.YP;const[e,n,r]=t;if("string"===e.kind&&"object"===r.kind){const t=(0,T.DT)((t=>at(t.value)))(e);return(0,T.UI)((t=>({grp:t.value,cutoff:n,m:r.value})))(t)}return T.YP})(t);if((0,T.pC)(n)){const{grp:t,cutoff:e,m:r}=n.value,i=ct(e,r,ut(t));return"string"==typeof i?h(i):p(S(T.YP,i))}const r=(t=>{if(2!==t.length)return T.YP;const[e,n]=t;if("string"===e.kind&&"object"===n.kind){const t=(0,T.DT)((t=>st(t.value)))(e);return(0,T.UI)((t=>({prim:t.value,m:n.value})))(t)}return T.YP})(t);if((0,T.pC)(r)){const{prim:t,m:e}=r.value;return p(S(dt(t),w(g(e))))}const i=(t=>{if(1!==t.length)return T.YP;const[e]=t;return"object"===e.kind?(0,T.G)({m:e.value}):T.YP})(t);if((0,T.pC)(i)){const{m:t}=i.value;return p(S(T.YP,w(g(t))))}const o=(t=>{if(t.length<1)return T.YP;const[e,...n]=t;if("string"===e.kind){const t=(0,T.DT)((t=>st(t.value)))(e);return(0,T.UI)((t=>({prim:t.value,rest:n})))(t)}return T.YP})(t);if((0,T.pC)(o)){const{prim:t,rest:e}=o.value;return p(S(dt(t),mt(e)))}return p(S(T.YP,mt(t)))},n=t=>"array"===t.kind?(0,x.tS)(n)(t.value):[t];return"null"===t.kind?E({kind:"bottom"}):E(e(n(t)))}function st(t){const e=t.split("");if(!0==(0===e.length))return!1;{const[t,...n]=e;return-1!=="bpmvn".indexOf(t)&&n.every((t=>-1!=="bpmvn0123456789.".indexOf(t)))}}function at(t){const e=t.split("");switch(!0){case 0===e.length:return!1;case"w"===e[0]&&void 0===e[1]:return!0;default:{const[t,...n]=e;return-1!=="ux".indexOf(t)&&-1===n.map((t=>!isNaN(parseInt(t)))).indexOf(!1)}}}function ct(t,e,n){switch(t.kind){case"string":return w(n({1:(0,T.G)(t.value),2:e}));case"number":case"null":return y(n({1:"null"===t.kind?T.YP:(0,T.G)(t.value),2:z(j(e,(([t,e])=>[Number(t),e])),(t=>!isNaN(t[0])))}));default:return"{bad cutoff}"}}function ut(t){const e=t=>e=>b(e[2],e[1],t),n=t=>e=>_(e[2],e[1],t),r=t.split("");switch(!0){case"w"===r[0]&&void 0===r[1]:return t=>v(t[2],t[1]);case"u"===r[0]&&void 0===r[1]:return e(1);case"u"===r[0]&&void 0!==r[1]:return e(parseInt(r.slice(1).join("")));case"x"===r[0]&&void 0===r[1]:return n(1);case"x"===r[0]&&void 0!==r[1]:return n(parseInt(r.slice(1).join("")));default:throw new Error("This should never happen if you use isGroupCommand")}}function dt(t){const e=t=>(0,T.Wi)(t.bound)||"add"===t.operation||"mul"===t.operation?(0,T.G)(t):T.YP,n=(t,n,r)=>{const i=((t,n)=>(0,o.zG)(t,(t=>{switch(t){case"p":return(0,T.G)("add");case"m":return(0,T.G)("mul");case"v":return(0,T.G)("max");case"n":return(0,T.G)("min");default:return T.YP}}),T.UI((t=>({operation:t,bound:n}))),T.tS(e)))(t,r);return(0,T.UI)((t=>{const{init:e,rest:r}=(0,x.zT)((t=>{return"number"==typeof(e=parseInt(t))&&isFinite(e)&&Math.floor(e)===e;var e}))(n);return{1:{1:t,2:0===e.length?1:parseInt(e.join(""))},2:r.join("")}}))(i)};return(0,T.UI)(m)((0,M.nI)(lt(t,(t=>{const e=t.split("");if(0===e.length)return T.YP;const[r,...i]=e;if("b"===r){const{init:t,rest:e}=(0,o.zG)(i,(0,x.zT)((t=>-1!=="1234567890.".indexOf(t))));if(0===t.length||0===e.length)return T.YP;const r=parseFloat(t.join("")),[s,...a]=e;return n(s,a,(0,T.G)(r))}return n(r,i,T.YP)}))))}function lt(t,e){const n=e(t);return(0,T.fS)((()=>[]))((0,T.UI)((t=>[t[1]].concat(lt(t[2],e))))(n))}function mt(t){return k(t.map(ft))}function ft(t){switch(t.kind){case"number":return p(t.value);case"string":return h(t.value);case"null":return{kind:"bottom"};case"object":return h("{object}");case"array":return h("{array}")}}var pt=n(1828);const ht={strategy:(t,e,n)=>r=>{if((0,T.Wi)(n))return e;if("delta"===t&&(0,T.Wi)(e))return T.YP;if((0,T.Wi)(e))return n;if((0,T.pC)(e)&&(0,T.pC)(n))return r(e.value,n.value);throw new Error("Non exhaustive match in combineCommand.strategy")},operation:(t,e,n,r,i,s)=>{const a=(0,x.pR)(O(s)),c=(0,o.zG)(e.bound,T.EQ((()=>o.yR),(t=>e=>(0,P.VV)(s)(i.fromNumber(t),e))));if("append"===t&&"add"===e.operation)return(0,x.yL)(n,r,kt("append",(0,o.ls)(i.plus,c)));if("append"===t&&"mul"===e.operation)return(0,x.yL)(n,r,kt("append",(0,o.ls)(i.times,c)));if("append"===t&&"max"===e.operation)return(0,P.Fp)(a)(n,r);if("join"===t&&"add"===e.operation)return(0,x.yL)(n,r,kt("join",(0,P.Fp)(s)));if("join"===t&&"mul"===e.operation)return(0,x.yL)(n,r,kt("join",(0,P.Fp)(s)));if("join"===t&&"max"===e.operation)return(0,P.Fp)(a)(n,r);if("min"===e.operation)return ht.operation(t,{operation:"max",bound:e.bound},n,r,i,function(t){return(0,P.Zt)(((e,n)=>q(t.compare(e,n))))}(s));if("delta"===t&&"max"===e.operation)return(0,P.gt)(a)(n,r)?n:r.map(f);if("delta"===t)return(0,x.yL)(n,r,((t,e)=>(0,P.gt)(O(s))(t,e)?D(t,c):{kind:"bottom"}));throw new Error("Non exhaustive match in combineCommand.operation")},extend:(t,e,n,r)=>{if("delta"===t&&"top"===n.kind&&"top"===r.kind)return(0,P.gt)(I.Df)(n.error,r.error)?h(n.error):{kind:"bottom"};if("delta"===t&&"bottom"===r.kind)return n;if("delta"===t&&"bottom"===n.kind)return{kind:"bottom"};if("top"===n.kind&&"top"===r.kind)return h((0,P.Fp)(I.Df)(n.error,r.error));if("top"===n.kind)return n;if("top"===r.kind)return r;if("inner"===n.kind&&"inner"===r.kind)return e(n.a,r.a);if("bottom"===n.kind)return r;if("bottom"===r.kind)return n;throw new Error("Non exhaustive match in extend")}},gt={fromNumber:o.yR,plus:(t,e)=>t+e,times:(t,e)=>t*e};function vt(t,e,n,r){if("unbounded"===t.kind&&"unbounded"===e.kind){const i=t.group,o=e.group;return(0,T.fS)(f)((0,T.UI)((t=>p(g(t))))(U(i,o,n,r)))}if("windowed"===t.kind&&"windowed"===e.kind){const i=t.key,o=t.group,s=e.key,a=e.group,c=(0,P.Fp)((0,T.pR)(r))(i,s);return(0,T.fS)(f)((0,T.UI)((t=>p(v(t,c))))(U(o,a,n,r)))}if("countLimit"===t.kind&&"countLimit"===e.kind){const i=t.n,o=e.n;if(i===o){const o=t.limit,s=t.group,a=e.limit,c=e.group,u=(0,P.Fp)((0,T.pR)(r))(o,a);return(0,T.fS)(f)((0,T.UI)((t=>p(_(t,u,i))))(U(s,c,n,r)))}return h("Non matching counts")}if("uniqueLimit"===t.kind&&"uniqueLimit"===e.kind){const i=t.n,o=e.n;if(i===o){const o=t.limit,s=t.group,a=e.limit,c=e.group,u=(0,P.Fp)((0,T.pR)(r))(o,a);return(0,T.fS)(f)((0,T.UI)((t=>p(b(t,u,i))))(U(s,c,n,r)))}return h("Non matching counts")}return h("Non matching group types")}function _t(t,e,n){return(0,T.fS)(a)(bt(t,T.YP)(e,n))}function bt(t,e){const n=e=>(n,r)=>ht.strategy(t,n,r)(bt(t,e)),r=(e,r,i)=>{if("stringGroup"===r.kind&&"stringGroup"===i.kind){const t=vt(r.group,i.group,n(e),I.Df);return D(t,(t=>w(wt(t,I.Df))))}if("numberGroup"===r.kind&&"numberGroup"===i.kind){const t=vt(r.group,i.group,n(e),L.Df);return D(t,(t=>y(wt(t,L.Df))))}if("tuple"===r.kind&&"tuple"===i.kind){const n=(0,T.pC)(e)?e.value:[];return p(k(function(t,e,n,r,i,o){const s=(t,e)=>({1:(0,x.ke)(t)(e).concat((0,x.KB)(Math.max(0,t-e.length),f)),2:(0,x.md)(t)(e)}),a=(e,n,r)=>{if(0===e.length)return ht.operation(t,{operation:"max",bound:T.YP},n,r,i,o);if(e.length>0){const[c,...u]=e,d=s(c[2],n),l=d[1],m=d[2],f=s(c[2],r),p=f[1],h=f[2];return ht.operation(t,c[1],l,p,i,o).concat(a(u,m,h))}throw new Error("Non exhaustive match in recurse")};return(0,x.GY)((0,x.Qp)((t=>"bottom"===t.kind))((0,x.GY)(a(e,n,r))))}(t,n,r.tuple,i.tuple,gt,L.Df)))}throw new Error(`Non matching payload. Got ${r.kind} and ${i.kind}`)},i=(t,n)=>{if((0,T.Eh)((0,M.Eh)((0,R.n_)({1:(0,R.n_)({operation:I.Eq,bound:(0,T.Eh)(L.Eq)}),2:L.Eq}))).equals(t.commands,n.commands)){const i=(0,T.Wi)(t.commands)?e:t.commands,o=r(i,t.payload,n.payload);return D(o,(e=>S(t.commands,e)))}if(i=t.commands,s=n.commands,(0,T.Eh)((0,M.Eh)((0,R.n_)({1:(0,R.n_)({operation:I.Eq}),2:L.Eq}))).equals(i,s)){const i=(0,o.zG)(((t,e)=>(0,o.zG)((0,pt.gz)(T.G5)(t,e),(0,T.UI)((([t,e])=>M.yL(t,e,((t,e)=>({1:{operation:t[1].operation,bound:(0,o.zG)((0,pt.gz)(T.G5)(t[1].bound,e[1].bound),T.UI((([t,e])=>Math.min(t,e))),T.wp((()=>t[1].bound)),T.wp((()=>e[1].bound)))},2:t[2]})))))))(t.commands,n.commands),T.wp((()=>e))),s=r(i,t.payload,n.payload);return D(s,(t=>S(i,t)))}throw new Error(`Non matching primitive strings. Got ${V(t)} and ${V(n)}`);var i,s};return(e,n)=>J(E(ht.extend(t,i,ot(e).state,ot(n).state)))}function yt(t,e,n){const r=(0,T.UI)((e=>z(t,(([t,r])=>(0,P.gf)(n)(t,e)))))(e);return(0,T.fS)((()=>t))(r)}function wt(t,e){switch(t.kind){case"unbounded":return t;case"windowed":return(0,T.Wi)(t.key)?t:v(yt(t.group,t.key,e),t.key);case"countLimit":{const n=t.limit,r=t.n,i=t.group,o=G(r,i,((t,e)=>e<=1?T.YP:(0,T.G)(e-1)),e),s=(0,P.Fp)((0,T.pR)(e))(n,o);return _(yt(i,s,e),s,r)}case"uniqueLimit":{const n=t.limit,r=t.n,i=t.group,o=(t,e)=>{if("object"===t.kind){const n=[...t.value.keys(),...e.keys()],i=new Set(n);return i.size>=r?T.YP:(0,T.G)(i)}return T.YP},s=G(new Set,i,o,e),a=(0,P.Fp)((0,T.pR)(e))(n,s);return b(yt(i,a,e),a,r)}}}function kt(t,e){return(n,r)=>ht.extend(t,((t,n)=>p(e(t,n))),n,r)}var Et=n(7407),St=n(922),Pt=n(2652),It=n(4730),Dt=n(8036);class Ot{constructor(t,e,n){this.externalData=t,this.localQueries=e,this.externalQueries=n,this.queryCodesAsList=[],this.queryCodesAsMap={};const r=this.externalData.getExternalJsonData(St.mL)||[],i=(0,o.zG)((0,T.Y3)((()=>r.filter((t=>(0,Dt.UC)(t,this.localQueries,this.externalQueries))))),(0,T.fS)((()=>[])));this.add(i)}add(t){return(0,o.zG)(t.forEach((t=>this.queryCodesAsMap[t]=!0)),(t=>this.updateSegmentsList()))}remove(t){return(0,o.zG)(t.forEach((t=>delete this.queryCodesAsMap[t])),(t=>this.updateSegmentsList()))}getAllAsList(){return this.queryCodesAsList}getAllAsMap(){return this.queryCodesAsMap}getUpdates(t){const e=[],n=[];return Object.entries(t).forEach((t=>{let[r,i]=t;const o=parseInt(r),s=(null==i?void 0:i.result)||{result:!1},a=!0===(null==s?void 0:s.result)&&!(o in this.queryCodesAsMap),c=!1===(null==s?void 0:s.result)&&o in this.queryCodesAsMap;a?e.push(o):c&&n.push(o)})),{entered:e,exited:n}}flush(){this.externalData.setExternalJsonData(St.mL,this.getAllAsList())}reset(){this.externalData.removeExternalData(St.mL),this.queryCodesAsList=[],this.queryCodesAsMap={}}updateSegmentsList(){this.queryCodesAsList=Object.keys(this.queryCodesAsMap).map((t=>parseInt(t)))}}const Tt="bootstrap",Mt="process",xt="processTransitions",Ct="updateExternalState",qt="updateLAL",At="updateTPD";var Ut=n(2851);const Gt="permutive:query:changed",jt="internal_query_states",zt="external_query_states",Rt=t=>class extends t{constructor(){super(...arguments),this.prefix="[Query Manager]",this.isWorkerReady=!1,this.stateMap={value:{},promise:Promise.resolve({})},this.extStateMap={},this.userSegments=new Ot(this.externalData,this.queryMetadata,this.externalQueries),this.segmentEntryQueryCodes=new Set,this.segmentExitQueryCodes=new Set,this.cohortEntryQueryCodes=new Set,this.cohortExitQueryCodes=new Set,this.hasNewOrModifiedQueries=!1,this.scheduler=new It.b(this.transitionDebounceTime,this.transitionDebounceMaxTime),this.debouncedProcessTransitions=this.makeDebouncedProcessTransitions(),this.registerListenersOnlyOnce=(0,Pt.HP)((()=>{this.lalRef.onChange(T.UI((t=>this.postMessage(qt,[t])()))),this.tpdRef.onChange(T.UI((t=>this.postMessage(At,[t])())))}));const[t,e]=Ut.Ue(this.userSegments.getAllAsList());this.queryCodesRef=t,this.queryCodesRefUpdate=e;const[n,r]=Ut.Ue(Ut.a9(T.YP));this.setLalRef=r,this.lalRef=Ut.xH(n);const[i,o]=Ut.Ue(Ut.a9(T.YP));this.setTpdRef=o,this.tpdRef=Ut.xH(i)}get queryCodesAsRef(){return this.queryCodesRef}makeStateMaps(){const t=this.permutiveData.getData(jt)||{},e=this.permutiveData.getData(zt)||{};for(const e in t)if("activations"in t[e]){const n=t[e].activations;for(const t in n)n[t]=[...new Set(n[t])]}this.logDebug("Cached state maps",{internal:t,external:e});const n=Object.keys(this.queryMetadata),r=Object.keys(t);this.hasNewOrModifiedQueries=n.length!==r.length||n.filter((e=>{var n;return this.queryMetadata[e]!==(null===(n=t[e])||void 0===n?void 0:n.checksum)})).length>0,this.logDebug("has new or modified queries",this.hasNewOrModifiedQueries);const i=this.hasNewOrModifiedQueries?(0,Pt.fl)(t,(e=>{var n;const r=null===(n=t[e])||void 0===n?void 0:n.checksum,i=r===this.queryMetadata[e];return i||this.logDebug(`Dropping state for query ${e}, mismatched checksum`,{cachedChecksum:r,checksum:this.queryMetadata[e]}),i})):t;this.extStateMap=this.hasNewOrModifiedQueries?this.dropExternalStateMissingFromStateMap(e,i):e,this.stateMap={value:i,promise:Promise.resolve(i)},this.logDebug("Initialised state maps",{internal:this.stateMap.value,external:this.extStateMap,metadata:this.queryMetadata});this.permutiveData.getData("query_states")&&this.permutiveData.deleteKey("query_states")}dropExternalStateMissingFromStateMap(t,e){const n=(0,Pt.fl)(t,(t=>t in e));return this.permutiveData.setData(zt,n),n}makeDebouncedProcessTransitions(){return this.scheduler.scheduleAccumulated((t=>this.processTransitions(t)()),{concat:(t,e)=>t.concat(e),empty:[]})}makeMessage(t,e,n){return{type:t,payload:(0,o.bc)(this.queryMetadata,this.extStateMap,...e),stateMap:n,userId:this.userId.get()}}trackTransition(t,e){const n=St.ED?this.customProperties.getCustomProps():{},r=Object.assign(Object.assign(Object.assign({},n),{segment_number:e}),{});t?(this.segmentEntryQueryCodes.add(e),this.cohortEntryQueryCodes.add(e.toString())):(this.segmentExitQueryCodes.add(e),this.cohortExitQueryCodes.add(e.toString())),this.permutive.track(t?"SegmentEntry":"SegmentExit",r)}trackSegmentsTransition(t,e){t.forEach((t=>{this.trackTransition(!0,t),this.messages.emit(Gt,{queryCode:t,result:{result:!0}})})),e.forEach((t=>{this.trackTransition(!1,t),this.messages.emit(Gt,{queryCode:t,result:{result:!1}})}))}updateUserSegments(t,e){t.length>0&&this.userSegments.add(t),e.length>0&&this.userSegments.remove(e),(t.length>0||e.length>0)&&(this.userSegments.flush(),this.queryCodesRefUpdate(this.userSegments.getAllAsList()))}onStateChangeReady(t){const{entered:e,exited:n}=this.userSegments.getUpdates(t);this.trackSegmentsTransition(e,n),this.updateUserSegments(e,n),this.logDebug("Updating query state",{updatedStateMap:t}),this.permutiveData.setData(jt,t);return(e.length>0||n.length>0)&&(this.logDebug("Updated cohorts",{entered:e,exited:n}),this.messages.emit("permutive:segments:updated")),{segmentsEntered:new Set(e),segmentsExited:new Set(n),cohortsEntered:new Set(e.map(String)),cohortsExited:new Set(n.map(String))}}postMessage(t,e){const n=()=>({segmentsEntered:new Set,segmentsExited:new Set,cohortsEntered:new Set,cohortsExited:new Set});return(0,o.ls)((()=>(0,o.a9)(this.stateMap.promise)),Et.UI((n=>this.makeMessage(t,e,n))),Et.tS((t=>this.processMessage(t))),s.UI((t=>this.userId.get()===t.userId?t:{diff:{},errors:[]})),s.UI((0,Pt.bw)((t=>{t.errors.length>0&&this.api.reportError(`QL error(s). Got ${t.errors.join("; ")}`,this.userId.get())}))),s.UI((t=>{let{diff:e,externalStateToDrop:r}=t;if(r){const t=(0,Pt.fl)(this.stateMap.value,(t=>!(t in r)));this.extStateMap=this.dropExternalStateMissingFromStateMap(this.extStateMap,t)}this.stateMap.value=Object.assign(Object.assign({},this.stateMap.value),e);const i=this.isWorkerReady?this.onStateChangeReady(this.stateMap.value):n();return{updatedStateMap:this.stateMap.value,result:(0,o.bc)(e,i)}})),s.fS((t=>(this.api.reportError(`Error during query execution. Got ${t}`,this.userId.get()),Et.of({updatedStateMap:this.stateMap.value,result:(0,o.bc)({},n())})))),(t=>t()),(t=>(this.stateMap.promise=t.then((t=>t.updatedStateMap)),t.then((t=>t.result)))))}processTransitions(t){return this.postMessage(xt,[t])}bootstrap(t){return(0,o.zG)(pt.gz(Et.oE)(this.postMessage(Tt,[{segments:{"1p":this.userSegments.getAllAsMap()},sessionId:this.sessionManager.getSessionId(),viewId:this.viewId.get(),lookalikeModels:this.lalRef.current,thirdPartydata:this.tpdRef.current},t]),(()=>Promise.resolve(this.registerListenersOnlyOnce()))),Et.UI((t=>{let[e]=t;return e})))}process(t,e){return(0,Dt.AG)(t)?()=>this.debouncedProcessTransitions([t]):this.processStandard([t],e)}processStandard(t,e){return(0,o.zG)(this.postMessage(Mt,[t]),Et.UI((0,Pt.bw)((()=>{e&&this.setAsRealTimeifNeeded(t)}))))}updateExternalState(t){return(0,o.zG)((()=>{const e=(0,Pt.b0)(t,((t,e)=>{const n=this.queryMetadata[t];return n&&e[n]?(0,T.Uo)($(e[n])):T.YP})),n=(0,Pt.b0)(this.extStateMap,((t,e)=>(0,T.Uo)($(e)))),r=(t,e,n)=>(0,o.zG)((0,T.Y3)((()=>(this.logDebug("Joining external state",{newExtState:t,currentExtState:e}),_t("join",t,e)))),(0,T.fS)((()=>(this.api.reportError(`Failed to join external state for query: ${n}. Had ${B(e)}, received ${B(t)}}`,this.userId.get()),t)))),i=(0,Pt.b0)(Object.assign(Object.assign({},n),e),((t,e)=>n[t]?(0,T.G)(K(r(e,n[t],t))):(0,T.G)(K(e))));return this.permutiveData.setData(zt,i),this.extStateMap=i,Promise.resolve()}),Et.tS((()=>this.postMessage(Ct,[]))))}reset(){this.userSegments.reset(),this.permutiveData.setData(jt,{}),this.permutiveData.setData(zt,{}),this.stateMap={value:{},promise:Promise.resolve({})},this.extStateMap={}}setAsReady(){this.isWorkerReady=!0,this.onStateChangeReady(this.stateMap.value),this.messages.emit("permutive:queries:initialised")}getStateSizeInBytes(){return 2*JSON.stringify(this.stateMap.value).length}setAsRealTimeifNeeded(t){return!this.realtime.isRealtime()&&t.filter((t=>"Pageview"===t.name)).length>0?this.realtime.setAsRealtime(this.userSegments.getAllAsList().length):void 0}logDebug(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.logger.debug(this.prefix,...e)}};var Lt=n(3992);function Bt(){{const t=n(4386).Z;return(0,r.h)(new t)}}class Kt{constructor(t){this.queryMetadata={7809:"0c8b70cdb7",7827:"c4c50cfd83",7834:"095a09fc44",7835:"fa2431b29f",7836:"34e76686ef",7843:"0abf02cfc7",7844:"a99645eeb8",7878:"1ca929a26c",7880:"0270f6a111",7881:"77b68bf9c8",7925:"bdfbeff430",7981:"e305a8f88a",8015:"c4810a6b7c",8301:"0c69eb38e0",8500:"5bb1b8f8ca",8501:"c1702e60ed",8502:"e069b5f125",8679:"424c9c287a",9697:"56b0f5bcf0",9702:"2667800a7e",9704:"be6b302818",9705:"41258bad6d",9812:"7c39f06541",9831:"e8d96d95ff",9837:"690a07d9c5",10116:"1bc53f4cd6",10179:"573c37ae98",10339:"4b09f316ef",10428:"5f67debed9",10463:"8a7939a97b",10622:"582169f0f2",10790:"1940b5d682",10854:"83436be25c",10855:"b21a1328f2",10856:"a48dbb517d",10857:"4c9bea17f0",10858:"0bc6c0f5bb",10859:"aae15174fd",10860:"39fd3182ff",10861:"ff4141612d",10862:"cd3d474bb9",10863:"eaea8d4150",10864:"91c56521ed",10865:"67027d49f5",10866:"3c9f503b5b",10867:"8cc466146b",10868:"9d132cac28",10869:"b17b71daa7",10870:"0338020d5e",11122:"bcd36340ef",12381:"83436be25c",12475:"375820f9b4",12668:"871294e9be",13108:"c303063a0a",13183:"df3175455d",13444:"a0b1e4511f",13445:"25b32e17c9",13446:"b9295c640a",13520:"22215388a0",13640:"ebfb32ebb4",13769:"9e28027d6a",13825:"d56f7a5456",13826:"072c7bb173",13827:"c2efc62eaf",13828:"3f2a906cd4",13829:"796a56ec6a",13830:"d785351b40",13831:"19a730d5f2",13852:"5896247a5e",13855:"8d661148fc",13856:"caab8a7dbd",13857:"6e98532ec3",14282:"65011f1c1e",14371:"0f5797071e",14577:"5fe1d4a7d0",14748:"2321bc3d67",14808:"43da464482",14812:"8573db81f8",14816:"3f3d74f0c1",14823:"abd941c6d7",14830:"4b0f6b7964",14831:"9b4aae01c6",14848:"d19868d715",14851:"02aa0d96d3",14853:"93922b6649",14858:"a6d50496a6",14919:"b4da15298e",14921:"e272154bf4",14922:"5a78eb5c2a",14923:"d9b65faecb",16243:"a85266c7ef",18570:"a1a701452c",21542:"07b348f420",21794:"4bca7eab5d",23694:"ce5a97a7b6",27457:"0277837843",28391:"8479311e32",28538:"0c1e978936",28540:"f129216e83",29195:"346fe6107f",29219:"64c33c497b",29567:"c74aa15543",29568:"5801f7dead",29569:"c98e94b49e",29571:"6b0620432f",29572:"79fff59697",29573:"a9e1e18313",29574:"b6e0993561",29575:"9906eff264",29576:"cffc835354",29581:"565cc1c977",29582:"200f02b472",29585:"2c728e1a6b",29590:"9452c351cd",29591:"d146710f38",29592:"fe59168a81",29593:"c352970d3d",29594:"34a2a2c2e7",29595:"7913ef5244",29596:"5f229a5b1d",29598:"3abf365d43",29599:"0c73fcaf7d",32319:"1e1cb0d8c0",32321:"ca60f440d5",32324:"cff8b92df5",32333:"cbe14ba5f3",32334:"ba68239c20",32336:"f2f864fdba",32338:"e36d6dfd31",32339:"d2a8cf4bb1",32340:"b644c33b71",32341:"62e74bb3eb",32347:"43e170c24d",32348:"c12e9150f0",32627:"e0a8b88dbb",62273:"930c1628c8",62592:"02e1a76e03",71852:"0b545e011f",73622:"79718aab3d",74544:"e923eb67b9",75203:"0efc0451d3",88397:"8fbeab35bc",97745:"a657ccf9c9",103289:"7bbb305a2b",103566:"ed1ff52928",103641:"9b740ad87d",107543:"d580648309",109495:"b7cdbaa82a",110608:"ca9bf10f31",110776:"e0a5ec0397",114753:"10fb3359d9",114754:"3c3e0602e5",114755:"dbfaaab6e4",119318:"f14ced786f",121925:"d4cec7a91c",127958:"facc21a44c",128331:"adeb4ecb1e",128826:"96155e21dc",130054:"51d93d801b",130057:"61b5ff4f9e",130832:"459b047914",135588:"3048c6f648",138028:"58a8912ab0",138029:"0748875a8d",138030:"1e9cd3321f",138031:"50956dcee5",138032:"4f05e764a0",138040:"55315e1c74",138041:"6def04ff7a",139146:"64e831d3b8",139331:"a87118d8bc",139702:"0ad02d6668",141239:"a7cbba4201",141505:"fdfb244bbd",141823:"fab68dae5a",141910:"3039dbcb77",141912:"5c6cb1af03",142486:"7306cbfcf9",142561:"fccd647668",142764:"29246cc71b",143231:"0f8dba53dd",143570:"6b2e8bc5be",144047:"fafa383db0",144062:"411f478d59",146711:"5e7f5a5527",146858:"121572ecfa",146861:"52ce70acb5",147055:"17d82967b5",147455:"94b25ad19e",147871:"3133bd1d4b",148197:"dc9ff05226",148572:"d7a6b08b16",148689:"d114a4eb65",148896:"524bbb0c6d",150934:"52af9835fc",150976:"2a6351f0c2",150978:"06e5e360fd",151041:"72bab086ad",153448:"cc15b8521d",153449:"bac4c32190",154701:"a3509fd2e2",155324:"4ed4d26443",155688:"a0a906d1a9",155850:"886ef0a3a5",157140:"38c16359cd",158433:"0d01922556",158784:"47bf388841",161949:"790b2f0b39",162071:"14f25e9e6f",162072:"d7b52bf104",162169:"c0a33d429a",162903:"b2d951d45b",162919:"be0fbaf29f",163175:"219f190228",163462:"1e4de651e4",164476:"489fb9ccc0",166265:"00eb6c5b71",166342:"db0f3c91ab",166733:"467a6265d0",166778:"1252f6baa3",167632:"9ea4684b49",167908:"e41e29cda1",167942:"2c21db1bc3",167943:"90ed3570f5",172212:"819ab353b8",172841:"e73b5a5a68",173444:"e11a78189a",173767:"a986c8b693",175669:"aa4f700251",1e7:"ab2a79b4e1",10000001:"ea7eca3b49",10000002:"7a0b76bb2f",10000003:"49e502122c",10000004:"f1c67fac3c",10000005:"377db020e8",10000006:"547879da4e",10000007:"ca176545c8",10000008:"1a9d700b97",10000010:"a4cefa7f58",10000011:"aa7075e35b",10000012:"1ae8bddb93",10000013:"1e8886ad72",10000014:"f516ad362e",10000015:"787c19bee4",10000016:"d6475b75d5",10000017:"38ea08fad7",10000018:"5fab00fa2c",10000019:"e109f9b360",10000020:"90a178ea71",10000021:"bd128fcfed",10000022:"cd3face523",10000023:"c2f26784d1",10000024:"eb85193dfd",10000025:"9674e8f207",10000026:"6d37ba6b9a",10000035:"b0aca14cab",10000036:"d36ef645a5",10000037:"adf0bd9d7d",10000038:"0a8427037a",10000039:"9b0eb48861",10000040:"de880ed625",10000041:"82f6856d68",10000042:"98ff38947b",10000043:"3cde49fc7f",10000044:"204ea1bd83",10000045:"87b257dec6",10000046:"5579a14726",10000047:"aca78f9e2e",10000048:"fa2ea1e2fa",10000049:"673bfae6e5",10000050:"6f4e13e789",10000051:"d7f4837226",10000052:"53669c17cf",10000053:"cd9d4baf1b",10000054:"36a6a1b8ac",10000055:"61fbd3f45d",10000056:"36169adc34",10000057:"4dcf4dc5ea",10000058:"91ed3d5df9",10000059:"9975f2d18a",10000060:"291bb4c201",10000061:"835df65992",10000062:"8af22f787c",10000063:"13625d9512",10000064:"865b534730",10000065:"711a803835",10000066:"3f5a01518e",10000067:"a90790be86",10000068:"840b4c697a",10000069:"5b811cacf3",10000070:"26f90895bf",10000071:"ecfb5c1cab",10000072:"49ab120d1d",10000073:"8816deadae",10000074:"5c7a1ac24a",10000075:"0dc58fe713",10000076:"c791f64ecd",10000077:"fb2601505c",10000078:"ec0d63e687",10000079:"9f1a1f7510",10000080:"e51622030c",10000081:"c7a8cae6d0",10000082:"8ce761d02d",10000083:"7b6a42ef76",10000084:"479977505c",10000085:"930fdc5c22",10000086:"39e47fa144",10000087:"08cf53e104",10000088:"a2e20ffb1f",10000089:"68f37c2880",10000090:"be04a0b54e",10000324:"1ccab119ee",10000325:"1f783b581b",10000327:"21c25a4900",10000328:"482cefaa5d",10000329:"8ea8e0687e",10000330:"7f88a52c7e",10000687:"8cfe8cac9d",10000688:"6e4f7fa14e",10000689:"52ef8e630f",10000690:"e072687254",10000691:"3fe53e0c18",10000692:"9d30d89615",10000693:"d7956f1d3d",10000694:"05129d3c08",10000695:"74ef454681",10000696:"7ae9936d9c",10000697:"26fc0f70c4",10000698:"ae27296fe1",10000699:"d5f5b0f0cd",10000700:"eb8125a768",10000701:"3bea66735c",10000702:"16ae6df770",10000703:"761e431f4d",10000704:"063893f005",10000705:"55d48462e7",10000706:"5c3875edd3",10000707:"8968e719ff",10000708:"c517d35d9c",10000709:"5a2afc0cd9",10000710:"3e7a4e35f2",10000711:"44912da274",10000712:"e4ce60c3dd",10000713:"f18696c094",10000714:"017f28f8bb",10000715:"55116c14c3",10000716:"0f4395c2c4",10000717:"f3450f1ac2",10000718:"d1bc7ccfce",10000719:"88d3e1a480",10000720:"8eda205ac0",10000721:"f384ae2fa0",10000722:"4a3d1ff840",10000723:"68fd2589c4",10000724:"bae84a23bd",10000725:"d0f5458a4e",10000726:"6676d3d9a9",10000727:"aae1e1dcd7",10000728:"91ed3d5df9",10000729:"8f0eb3e289",10000730:"f1cea45a0b",10000731:"9351a7c7b0",10000732:"8ff05a8c34",10000733:"03f2821968",10000734:"7e89a633cb",10000735:"5f368efb3a",10000736:"5f368efb3a",10000737:"5bb87220bd",10000738:"6254881159",10000739:"1e02537eb0",10000740:"39270e0a06",10000741:"012978eb27",10000742:"d04b907379",10000743:"7070b1a14e",10000744:"6fc892f976",10000745:"8669619b19",10000746:"8b94534036",10000747:"7a40512ab1",10000748:"38d2e91fcf",10000749:"257cd6d50c",10000750:"3aa7ebea4f",10000751:"7e89a633cb",10000752:"a5abec86a6",10000753:"abafd1fcfc",10000754:"26fe7dbd61",10000755:"66d80d09bc",10000756:"08faf112c3",10000757:"05fedf88fd",10000758:"7680d4aba9",10000759:"f634153f8a",10000760:"46657a12ff",10000761:"64531a69c2",10000762:"904c2afaa9",10000763:"a3a3991956",10000764:"603cbf8d13",10000765:"78b12b1080",10000766:"211483a594",10000767:"07a0d69300",10000768:"183297f1ac",10000769:"e1c66b1569",10000770:"66b9851322",10000771:"fea86fbb59",10000772:"79a6fb7d55",10000773:"17f646de43",10000774:"468b27f1e6",10000775:"dab0ea43a2",10000776:"c3dc556a6d",10000777:"5b4df291a5",10000778:"17f4fcfd36",10000779:"47f71b40c3",10000780:"5c22398d33",10000781:"be5e562f33",10000782:"8b1de71fa0",10000783:"fdad521149",10000784:"d9dd4fd30f",10000785:"78e513e696",10000786:"5d44629314",10000787:"a5ab24f97d",10000788:"fb921aed0e",10000789:"d7f4f9500b",10000790:"8e63833564",10000791:"e3f4d88317",10000792:"533d5822ba",10000793:"4b226ceeb1",10000794:"a479c5c4c7",10000795:"df7301c3d9",10000796:"54fc95930e",10000797:"0c10dbde30",10000798:"b91b525b50",10000799:"6a4d2d099e",10000800:"0adbbddcf3",10000801:"38c747aefd",10000802:"f33b4f3f34",10000803:"a2d275785b"},this.externalQueries=new Set([]),this.customProperties=t.customProperties,this.externalData=t.externalData,this.logger=t.logger,this.messages=t.messages,this.api=t.api,this.permutive=t.permutive,this.permutiveData=t.permutiveData,this.queryWorker=t.queryWorker,this.realtime=t.realtime,this.sessionManager=t.sessionManager,this.transitionDebounceMaxTime=t.transitionDebounceMaxTime,this.transitionDebounceTime=t.transitionDebounceTime,this.userId=t.userId,this.viewId=t.viewId,this.metrics=t.metrics}processMessage(t){return s.Y3((()=>(0,Lt.t_)(this.queryWorker.postMessage(Object.assign({engine:"QLE"},t)))),i.w)}}class $t extends((()=>(0,o.zG)(Kt,Rt))()){constructor(t){super(t),this.makeStateMaps()}}},8318:(t,e,n)=>{n.d(e,{F:()=>s});var r=n(6934),i=n(1628),o=n(3992);const s=(0,r.Y3)((()=>{const t=(0,i.e)();return(0,o.t_)(t.postMessage(Object.assign({engine:"QLE",type:"noop",userId:""},{}))),Promise.resolve(t)}),(t=>`Failed to start QueryWorker. Got ${t}`))},3622:(t,e,n)=>{n.d(e,{$:()=>i});var r=n(2652);class i{constructor(t){this.permutiveData=t,this.eventSourceId=t.getData("event-source-id")||this.generateAndStoreEventSourceId()}get(){return this.eventSourceId}generateAndSet(){this.eventSourceId=this.generateAndStoreEventSourceId()}generateAndStoreEventSourceId(){const t=(0,r.k$)();return this.permutiveData.setData("event-source-id",t),t}}},1229:(t,e,n)=>{n.d(e,{N:()=>f,e:()=>l});var r=n(7582),i=n(2688),o=n(7183),s=n(365),a=n(3735),c=n(4730),u=n(8036),d=n(3992);function l(){{const t=n(4386).Z;return(0,o.h)(new t)}}const m={concat:(t,e)=>Object.assign(Object.assign({},t),e),empty:{}};class f{constructor(t,e,n,r,i,o,s,a,l){this.api=t,this.network=e,this.sessionManager=n,this.permutiveData=r,this.queryManager=i,this.metrics=o,this.userId=s,this.eventSourceId=a,this.stateWorker=l,this.DEBOUNCE_TIME=1e3,this.MAX_DEBOUNCE_TIME=5e3,this.fetchUnseenState=!0,this.scheduler=new c.b(this.DEBOUNCE_TIME,this.MAX_DEBOUNCE_TIME),this.debouncedSyncIfNotEmpty=this.scheduler.scheduleAccumulated((t=>this.syncIfNotEmpty.bind(this)("standard",t)),m),this.fetchUnseenState=!!p.includes("67cbf6c5-d926-407b-a684-a0606570ff08")||this.sessionManager.sessionHasChanged(),this.stateOffset=this.permutiveData.getData("state_offset")||0,this.lastSentStateMapWithChecksum=(0,u.Yh)(this.permutiveData.getData("internal_query_states")||{}),(0,d.t_)(this.stateWorker.postMessage({engine:"SSE",type:"noop"}))}sync(t){return(0,a.zG)(this.debouncedSyncIfNotEmpty(t),(t=>Promise.resolve()))}syncWithUnseen(){return this.syncIfNotEmpty("unseen",{}).then(a.Q1)}syncIfNotEmpty(t,e){const[n,r,o]="standard"===t?[this.stateOffset,e,this.fetchUnseenState]:"unseen"===t?[this.stateOffset,this.queryManager.stateMap.value,!0]:[0,{},!0],s=this.metrics.startTimer("sdk_compute_delta_seconds",{}),c={type:"delta",stateMap:r,lastSentStateMapWithChecksum:this.lastSentStateMapWithChecksum},u=(0,a.zG)(this.stateWorker.postMessage(Object.assign({engine:"SSE"},c)),d.t_,(t=>t.then((t=>(this.metrics.stopTimer("sdk_compute_delta_seconds",s),t))))),l=t=>{this.fetchUnseenState=!1;const e=(0,a.ls)((t=>this.api.reportError(`Error sending state delta. Got ${(0,i.w)(t)}`,this.userId.get())),(t=>({})));return this.api.state(this.metrics,this.userId.get(),this.eventSourceId.get(),t,n,o).then((t=>function(t){return!!t}(t)?this.onStateResponse(t):{})).then((e=>(this.lastSentStateMapWithChecksum=t,e))).catch(e)};return u.then((t=>o||Object.keys(t).length>0?l(t):Promise.resolve({})))}resetSync(){return(0,r.mG)(this,void 0,void 0,(function*(){this.reset(),yield this.syncIfNotEmpty("reset",{})}))}reset(){this.lastSentStateMapWithChecksum={}}onStateResponse(t){const e=(0,s.Y3)((()=>JSON.parse(t.state)),(t=>this.api.reportError(`Failed to parse State API response, got ${t}`,this.userId.get()))),n=t=>t?this.queryManager.updateExternalState(t)():(0,a.Q1)();return(0,s.tO)(e)?(0,a.zG)(t.state_offset,(t=>this.stateOffset=t),(t=>this.permutiveData.setData("state_offset",t)),(t=>n(e.right)),(t=>e.right)):{}}}const p=["fe68d1f7-c9f4-45b3-8905-7cda73d3fd74"]},926:(t,e,n)=>{n.r(e),n.d(e,{TWITTER_PIXEL_LS_KEY:()=>m,TwitterAddon:()=>v,load:()=>g,realService:()=>h,stubService:()=>p,twitterPixelService:()=>f});var r=n(6567),i=n(3328),o=n(4011),s=n(3735),a=n(9853),c=n(2116),u=n(2851),d=n(2652);const l="twitter_pixel",m="addon:twitter_pixel",f=h;function p(t){return c.K4((()=>{}))}function h(t){const{activationManager:e,addonsLoaded:n,consent:a,initdAddons:f,queryLanguageCohorts:p,permutiveData:h,metrics:g}=t;return(0,s.zG)(u.vP({addonsLoaded:n,consent:a,addonInitd:u.UI((t=>t.has(l)),f)}),c.KD([[t=>{let{consent:e,addonsLoaded:n,addonInitd:r}=t;return!e||n&&!r},c.K4((()=>{}))],[t=>{let{addonsLoaded:e,addonInitd:n}=t;return!e&&!n},c.dQ((t=>{let{previousState:e}=t;return{value:void 0,state:u.a9(e)}}))],c.dQ((t=>{let{previousState:n}=t;const a=t=>{(new Image).src=`https://analytics.twitter.com/i/adsct?txn_id=${t.getConfig().audience_tag_id}&p_id=Twitter`,t.trackImpression()},c=e.getActivations(l),f=(0,s.zG)(c,(t=>t.map((t=>t.getSegmentCode()))),(t=>new Set(t)));return(0,s.zG)(p,u.UI(i.hX((t=>f.has(t)))),u.D8(i.Eh(o.Eq)),u.g_(_(n)?n:(0,s.zG)(h.getData(m),r.ij,r.UI((0,s.ls)(Object.keys,i.UI(Number),(0,d.bw)((()=>g.track({name:"sdk_legacy_addon_data_migrate_count",value:1,labels:{flag:"twitter_pixel"}}))))),r.fS((()=>[]))),((t,e)=>(0,s.zG)(e,i.hX((e=>!t.includes(e))),(0,d.bw)((0,s.ls)((t=>c.filter((e=>t.includes(e.getSegmentCode())))),(t=>t.forEach(a)))),(e=>[...t,...e])))),(t=>({value:void 0,state:t})))}))]),c.UI(s.Q1))}const g=t=>{(0,a.Hn)(l)("auto_init",!1)&&t.q.push({functionName:"addon",arguments:[l,{}]})};class v{constructor(t){}}const _=t=>Array.isArray(t)&&(0===t.length||t.some((t=>"number"==typeof t)))},1828:(t,e,n)=>{n.d(e,{ap:()=>o,gz:()=>u});var r=n(3735),i=n(9384);function o(t,e){return function(n){return function(r){return t.ap(t.map(r,(function(t){return function(n){return e.ap(t,n)}})),n)}}}function s(t,e,n){return function(r){for(var i=Array(n.length+1),o=0;o<n.length;o++)i[o]=n[o];return i[n.length]=r,0===e?t.apply(null,i):s(t,e-1,i)}}var a={1:function(t){return[t]},2:function(t){return function(e){return[t,e]}},3:function(t){return function(e){return function(n){return[t,e,n]}}},4:function(t){return function(e){return function(n){return function(r){return[t,e,n,r]}}}},5:function(t){return function(e){return function(n){return function(r){return function(i){return[t,e,n,r,i]}}}}}};function c(t){return i.e$.call(a,t)||(a[t]=s(r.bc,t-1,[])),a[t]}function u(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=e.length,i=c(r),o=t.map(e[0],i),s=1;s<r;s++)o=t.ap(o,e[s]);return o}}},1500:(t,e,n)=>{n.d(e,{Ce:()=>d,DY:()=>E,DZ:()=>q,Ew:()=>b,GY:()=>k,KB:()=>m,Qp:()=>_,f2:()=>y,fw:()=>R,jV:()=>O,jj:()=>I,ke:()=>p,md:()=>v,oA:()=>A,pR:()=>B,t9:()=>P,tS:()=>M,u4:()=>j,uK:()=>U,xH:()=>x,yL:()=>S,zT:()=>g});var r=n(3735),i=(n(7341),n(9384)),o=n(1885),s=n(3328),a=n(4870),c=(n(5605),function(t){return 0===t.length}),u=o.Od,d=o.Ce,l=(o.ws,o.R3),m=(o.Im,function(t,e){return t<=0?[]:o.KB(e)(t)});var f=o.dC,p=(s.P5,s.YM,s.Z$,function(t){return function(e){return f(t,e)?w(e):e.slice(0,t)}});var h=function(t,e){for(var n=t.length,r=0;r<n&&e(t[r]);r++);return r};function g(t){return function(e){var n=D(h(e,t))(e);return{init:n[0],rest:n[1]}}}var v=function(t){return function(e){return t<=0||c(e)?w(e):t>=e.length?[]:e.slice(t,e.length)}};function _(t){return function(e){return e.slice(h(e,t))}}s.cx;function b(t){return s.Ew(t)}var y=s.f2;s.JO,s.qr;var w=function(t){return t.slice()},k=function(t){return c(t)?[]:t.slice().reverse()},E=function(t){return function(e){return e.length<=1?w(e):e.slice().sort(t.compare)}},S=function(t,e,n){for(var r=[],i=Math.min(t.length,e.length),o=0;o<i;o++)r[o]=n(t[o],e[o]);return r};var P=s.t9,I=function(t){var e=o.jj(t);return function(t){return u(t)?e(t):w(t)}},D=function(t){return function(e){return t>=1&&u(e)?o.lx(t)(e):c(e)?[w(e),[]]:[[],w(e)]}};function O(t){var e=P(t);return function(n,r){if(void 0===r){var i=O(t);return function(t){return i(t,n)}}return n.filter((function(t){return e(t,r)}))}}s.kp,s.Eq;var T=o.of,M=function(t){return function(e){return(0,r.zG)(e,function(t){return function(e){for(var n=[],r=0;r<e.length;r++)n.push.apply(n,t(r,e[r]));return n}}((function(e,n){return t(n)})))}},x=M(r.yR),C=function(t){return function(e){for(var n=[],r=0;r<e.length;r++){var o=t(r,e[r]);i.pC(o)&&n.push(o.value)}return n}},q=function(t){return C((function(e,n){return t(n)}))},A=q(r.yR),U=function(t){return G((function(e,n){return t(n)}))},G=function(t){return function(e){for(var n=[],r=[],i=0;i<e.length;i++){var o=e[i];t(i,o)?r.push(o):n.push(o)}return(0,a.s4)(n,r)}},j=(s.Lx,s.xP,s.u4),z=s.OE,R=(s.nq,s.iw,function(t){var e=L(t);return function(t){return e((function(e,n){return t(n)}))}}),L=function(t){return function(e){return z(t.of([]),(function(n,i,o){return t.ap(t.map(i,(function(t){return function(e){return(0,r.zG)(t,l(e))}})),e(n,o))}))}},B=(s.ZN,s.Eh,s.pR);s.pJ,s.oR,o.oo,s.yW,s.j0,i.F4,o.w6,o.QI,o.Ss},6862:(t,e,n)=>{function r(t){return function(e){return function(n){return t.chain(n,(function(n){return t.map(e(n),(function(){return n}))}))}}}function i(t){return function(e,n){return function(r){return t.chain(r,(function(r){return t.map(n(r),(function(t){var n;return Object.assign({},r,((n={})[e]=t,n))}))}))}}}n.d(e,{a:()=>i,m:()=>r})},365:(t,e,n)=>{n.d(e,{g1:()=>_,G5:()=>v,dO:()=>p,Pd:()=>k,ak:()=>R,tS:()=>y,g_:()=>x,ij:()=>G,Yo:()=>I,DT:()=>P,fS:()=>q,pF:()=>C,nM:()=>D,tO:()=>O,t$:()=>a,UI:()=>f,Vn:()=>E,EQ:()=>M,vx:()=>U,F2:()=>c,LF:()=>A,i$:()=>z,Y3:()=>j});var r=n(6862),i=n(2690),o=n(3735),s=(n(7341),n(9384)),a=s.t$,c=s.F2,u=function(t,e){return(0,o.zG)(t,f(e))},d=function(t,e){return(0,o.zG)(t,g(e))},l=function(t,e){return(0,o.zG)(t,y(e))},m="Either",f=function(t){return function(e){return D(e)?e:c(t(e.right))}},p={URI:m,map:u},h=c,g=function(t){return function(e){return D(e)?e:D(t)?t:c(e.right(t.right))}},v={URI:m,map:u,ap:d},_={URI:m,map:u,ap:d,of:h},b=function(t){return function(e){return D(e)?e:t(e.right)}},y=b,w={URI:m,map:u,ap:d,chain:l},k=function(t,e){return function(n){return D(n)?a(t(n.left)):c(e(n.right))}},E=function(t){return function(e){return D(e)?a(t(e.left)):e}},S={URI:m,fromEither:o.yR},P=(0,i.DT)(S),I=(0,i.Yo)(S),D=s.nM,O=s.tO,T=function(t,e){return function(n){return D(n)?t(n.left):e(n.right)}},M=T,x=M,C=function(t){return function(e){return D(e)?t(e.left):e.right}},q=C,A=function(t){return D(t)?c(t.left):a(t.right)},U=function(t){return function(e){return D(e)?t(e.left):e}},G=function(t){return function(e){return null==e?a(t):c(e)}},j=function(t,e){try{return c(t())}catch(t){return a(e(t))}},z=T(o.yR,o.yR);s.F4;var R=(0,r.a)(w);s.Xl},4268:(t,e,n)=>{n.d(e,{Uz:()=>o,f7:()=>r,n_:()=>i,w4:()=>s});n(3735);var r=function(t){return{equals:function(e,n){return e===n||t(e,n)}}},i=function(t){return r((function(e,n){for(var r in t)if(!t[r].equals(e[r],n[r]))return!1;return!0}))},o=function(t){return function(e){return r((function(n,r){return e.equals(t(n),t(r))}))}},s={equals:function(t,e){return t===e}};s.equals},2690:(t,e,n)=>{n.d(e,{DT:()=>s,Yo:()=>o,fX:()=>c});var r=n(3735),i=n(9384);function o(t){return function(e){return function(n){return t.fromEither(i.Wi(n)?i.t$(e()):i.F2(n.value))}}}function s(t){return function(e,n){return function(r){return t.fromEither(e(r)?i.F2(r):i.t$(n(r)))}}}function a(t){return function(e){return(0,r.ls)(e,t.fromEither)}}function c(t,e){var n=a(t);return function(t){return function(r){return e.chain(r,n(t))}}}},9679:(t,e,n)=>{n.d(e,{oU:()=>i});var r=n(3735);function i(t,e){return function(n){var i=(0,r.ls)(n,t.fromTask);return function(t){return e.chain(t,i)}}}},7341:(t,e,n)=>{function r(t,e){return function(n){return function(r){return t.map(r,(function(t){return e.map(t,n)}))}}}function i(t){return function(e){return function(n){return t.map(n,(function(t){var n;return(n={})[e]=t,n}))}}}function o(t){return function(e,n){return function(r){return t.map(r,(function(t){var r;return Object.assign({},t,((r={})[e]=n(t),r))}))}}}n.d(e,{Hr:()=>o,UI:()=>r,YO:()=>i})},1885:(t,e,n)=>{n.d(e,{Ce:()=>d,Eh:()=>E,Im:()=>l,KB:()=>v,Od:()=>a,QI:()=>I,R3:()=>m,Ss:()=>D,dC:()=>c,jj:()=>p,lx:()=>k,nI:()=>g,of:()=>y,oo:()=>f,w6:()=>_,ws:()=>u,yL:()=>w});var r=n(3735),i=(n(7341),n(9384)),o=n(7241),s=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},a=function(t){return t.length>0},c=function(t,e){return t<0||t>=e.length},u=function(t){return function(e){return s([t],e,!0)}},d=u,l=function(t){return function(e){return s(s([],e,!0),[t],!1)}},m=l,f=function(t,e,n){if(a(n)){var r=h(n);return r.splice(t,0,e),r}return[e]},p=function(t){return function(e){if(1===e.length)return b(e);for(var n=[S(e)],r=function(e){n.every((function(n){return!t.equals(n,e)}))&&n.push(e)},i=0,o=P(e);i<o.length;i++){r(o[i])}return n}},h=i.r1,g=function(t){return a(t)?i.G(t):i.YP},v=function(t){return function(e){for(var n=Math.max(0,Math.floor(e)),r=[t(0)],i=1;i<n;i++)r.push(t(i));return r}},_=function(t,e){return t<=e?v((function(e){return t+e}))(e-t+1):[t]};var b=h,y=function(t){return[t]},w=function(t,e,n){for(var r=[n(t[0],e[0])],i=Math.min(t.length,e.length),o=1;o<i;o++)r[o]=n(t[o],e[o]);return r};o.xP,o.Lx;var k=function(t){return function(e){var n=Math.max(1,t);return n>=e.length?[b(e),[]]:[(0,r.zG)(e.slice(1,n),d(S(e))),e.slice(n)]}},E=(o.u4,o.OE,o.nq,o.iw,o.YM,o.ZN,o.Eh),S=(i.F4,o.YM),P=function(t){return t.slice(1)};o.Z$,o.VV,o.Fp,o.j0;function I(t,e){return void 0===e?d(t):(0,r.zG)(e,d(t))}var D=function(t,e){return(0,r.zG)(t,m(e))};o.ur},6567:(t,e,n)=>{n.d(e,{DT:()=>d,DZ:()=>G,EK:()=>m,EQ:()=>W,Eh:()=>w,G:()=>u,G5:()=>D,IS:()=>l,KQ:()=>J,Ri:()=>A,UI:()=>E,Uo:()=>L,Wi:()=>K,Y3:()=>V,YP:()=>c,dO:()=>S,fS:()=>F,g_:()=>N,hX:()=>U,ij:()=>H,mU:()=>Q,pC:()=>B,pR:()=>k,tS:()=>O,wp:()=>M,xH:()=>Y,xu:()=>R});var r=n(6862),i=n(3735),o=(n(7341),n(9384)),s=n(6017),a=n(4870),c=(n(5605),o.YP),u=o.G;function d(t){return function(e){return t(e)?u(e):c}}var l=function(t){return"Right"===t._tag?c:u(t.left)},m=function(t){return"Left"===t._tag?c:u(t.right)},f=function(t,e){return(0,i.zG)(t,E(e))},p=function(t,e){return(0,i.zG)(t,I(e))},h=function(t,e){return(0,i.zG)(t,O(e))},g=function(t,e){return(0,i.zG)(t,U(e))},v=function(t,e){return(0,i.zG)(t,G(e))},_=function(t,e){return(0,i.zG)(t,j(e))},b=function(t,e){return(0,i.zG)(t,z(e))},y="Option",w=function(t){return{equals:function(e,n){return e===n||(K(e)?K(n):!K(n)&&t.equals(e.value,n.value))}}},k=function(t){return{equals:w(t).equals,compare:function(e,n){return e===n?0:B(e)?B(n)?t.compare(e.value,n.value):1:-1}}},E=function(t){return function(e){return K(e)?c:u(t(e.value))}},S={URI:y,map:f},P=u,I=function(t){return function(e){return K(e)||K(t)?c:u(e.value(t.value))}},D={URI:y,map:f,ap:p},O=function(t){return function(e){return K(e)?c:t(e.value)}},T={URI:y,map:f,ap:p,chain:h},M=function(t){return function(e){return K(e)?t():e}},x=O(i.yR),C=(0,a.s4)(c,c),q=function(t){return K(t)?C:(0,a.s4)(l(t.value),m(t.value))},A={URI:y,compact:x,separate:q},U=function(t){return function(e){return K(e)?c:t(e.value)?e:c}},G=function(t){return function(e){return K(e)?c:t(e.value)}},j=function(t){return function(e){return(0,a.s4)(g(e,(0,s.ff)(t)),g(e,t))}},z=function(t){return(0,i.ls)(E(t),q)},R={URI:y,map:f,compact:x,separate:q,filter:g,filterMap:v,partition:_,partitionMap:b},L=m,B=o.pC,K=function(t){return"None"===t._tag},$=function(t,e){return function(n){return K(n)?t():e(n.value)}},W=$,N=W,F=function(t){return function(e){return K(e)?t():e.value}},Y=x,Q=(0,r.m)(T),H=function(t){return null==t?c:u(t)},V=function(t){try{return u(t())}catch(t){return c}},J=function(t){return(0,i.ls)(t,H)};o.F4,o.Xl},7209:(t,e,n)=>{n.d(e,{Fp:()=>m,Uz:()=>a,VV:()=>l,Zt:()=>s,gf:()=>d,gt:()=>u,lt:()=>c,uZ:()=>f});var r=n(4268),i=n(3735),o=function(t){return function(e,n){return e===n||0===t(e,n)}},s=function(t){return{equals:o(t),compare:function(e,n){return e===n?0:t(e,n)}}},a=function(t){return function(e){return s((function(n,r){return e.compare(t(n),t(r))}))}},c=(i.W8,function(t){return function(e,n){return-1===t.compare(e,n)}}),u=function(t){return function(e,n){return 1===t.compare(e,n)}},d=function(t){return function(e,n){return-1!==t.compare(e,n)}},l=function(t){return function(e,n){return e===n||t.compare(e,n)<1?e:n}},m=function(t){return function(e,n){return e===n||t.compare(e,n)>-1?e:n}},f=function(t){var e=l(t),n=m(t);return function(t,r){return function(i){return n(e(i,r),t)}}};r.w4.equals},6017:(t,e,n)=>{n.d(e,{ff:()=>r,xD:()=>i});n(3735);var r=function(t){return function(e){return!t(e)}},i=function(t){return function(e){return function(n){return e(n)&&t(n)}}}},3328:(t,e,n)=>{n.d(e,{DZ:()=>z,Eh:()=>H,Eq:()=>T,Ew:()=>y,JO:()=>k,Lx:()=>$,OE:()=>W,Od:()=>m,P5:()=>g,Su:()=>U,UI:()=>A,YM:()=>v,Z$:()=>_,ZN:()=>Q,bj:()=>P,cx:()=>b,f2:()=>w,hX:()=>G,hp:()=>S,iw:()=>F,j0:()=>nt,kp:()=>O,nI:()=>Z,nq:()=>N,oR:()=>X,pJ:()=>J,pR:()=>V,qr:()=>E,t9:()=>I,u4:()=>K,uK:()=>R,vP:()=>Y,xH:()=>q,xP:()=>B,xb:()=>l,yW:()=>et});var r=n(4268),i=n(3735),o=(n(7341),n(9384)),s=n(4011),a=n(7209),c=n(7241),u=n(4870),d=(n(5605),function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}),l=function(t){return 0===t.length},m=c.Od,f=(c.Ce,c.ws,c.R3);c.Im;var p=function(t,e){return function(n){return m(n)?e(n):t()}},h=c.dC;function g(t,e){return void 0===e?function(e){return g(t,e)}:h(t,e)?o.YP:o.G(e[t])}var v=function(t){return m(t)?o.G(c.YM(t)):o.YP},_=function(t){return m(t)?o.G(c.Z$(t)):o.YP};var b=function(t){return function(e){for(var n=0;n<e.length;n++)if(t(e[n]))return o.G(n);return o.YP}};function y(t){return function(e){for(var n=0;n<e.length;n++)if(t(e[n]))return o.G(e[n]);return o.YP}}var w=function(t){return function(e){for(var n=0;n<e.length;n++){var r=t(e[n]);if(o.pC(r))return r}return o.YP}};var k=function(t){return function(e){for(var n=e.length-1;n>=0;n--){var r=t(e[n]);if(o.pC(r))return r}return o.YP}},E=function(t){return function(e){for(var n=e.length-1;n>=0;n--)if(t(e[n]))return o.G(n);return o.YP}},S=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];"Right"===r._tag&&e.push(r.right)}return e},P=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];"Left"===r._tag&&e.push(r.left)}return e};function I(t){return function(e,n){if(void 0===n){var r=I(t);return function(t){return r(e,t)}}for(var i,o=0;o<n.length;o++)if(i=n[o],t.equals(i,e))return!0;return!1}}var D=function(t,e,n){return(0,i.zG)(t,K(e,n))},O=function(t,e){return(0,i.zG)(t,J(e))},T=function(t,e){return(0,i.zG)(t,X(e))},M=c.of,x=function(){return tt},C=function(t){return function(e){return(0,i.zG)(e,function(t){return function(e){if(l(e))return tt;for(var n=[],r=0;r<e.length;r++)n.push.apply(n,t(r,e[r]));return n}}((function(e,n){return t(n)})))}},q=C(i.yR),A=function(t){return function(e){return e.map((function(e){return t(e)}))}},U=function(t){return function(e){return e.map((function(e,n){return t(n,e)}))}},G=function(t){return function(e){return e.filter(t)}},j=function(t){return function(e){for(var n=[],r=0;r<e.length;r++){var i=t(r,e[r]);o.pC(i)&&n.push(i.value)}return n}},z=function(t){return j((function(e,n){return t(n)}))},R=(i.yR,function(t){return L((function(e,n){return t(n)}))}),L=function(t){return function(e){for(var n=[],r=[],i=0;i<e.length;i++){var o=e[i];t(i,o)?r.push(o):n.push(o)}return(0,u.s4)(n,r)}},B=function(t){return function(e){return function(n){return n.reduce((function(n,r,i){return t.concat(n,e(i,r))}),t.empty)}}},K=function(t,e){return W(t,(function(t,n,r){return e(n,r)}))},$=function(t){var e=B(t);return function(t){return e((function(e,n){return t(n)}))}},W=function(t,e){return function(n){for(var r=n.length,i=t,o=0;o<r;o++)i=e(o,i,n[o]);return i}},N=function(t,e){return F(t,(function(t,n,r){return e(n,r)}))},F=function(t,e){return function(n){return n.reduceRight((function(t,n,r){return e(r,n,t)}),t)}},Y=function(t){return function(e){return D(e,t.of(x()),(function(e,n){return t.ap(t.map(e,(function(t){return function(e){return(0,i.zG)(t,f(e))}})),n)}))}},Q=function(t){return{show:function(e){return"[".concat(e.map(t.show).join(", "),"]")}}},H=function(t){return(0,r.f7)((function(e,n){return e.length===n.length&&e.every((function(e,r){return t.equals(e,n[r])}))}))},V=function(t){return(0,a.Zt)((function(e,n){for(var r=e.length,i=n.length,o=Math.min(r,i),a=0;a<o;a++){var c=t.compare(e[a],n[a]);if(0!==c)return c}return s.Df.compare(r,i)}))},J=function(t){return function(e){for(var n=d([],t(e),!0),r=[];n.length>0;){var i=n.shift();o.nM(i)?n.unshift.apply(n,t(i.left)):r.push(i.right)}return r}},X=function(t){return function(e){var n=t(e),r=[],i=[];function s(e){o.nM(e)?t(e.left).forEach((function(t){return r.push(t)})):i.push(e.right)}for(var a=0,c=n;a<c.length;a++){s(c[a])}for(;r.length>0;)s(r.shift());return i}},Z=(c.oo,function(t){return l(t)?tt:t.slice()}),tt=c.cS;function et(t){return function(e){return e.every(t)}}var nt=function(t){var e=c.j0(t);return function(n){return p((function(){return t.empty}),e(n))}};o.F4,c.w6,c.QI,c.Ss},7241:(t,e,n)=>{n.d(e,{R3:()=>v,Im:()=>g,ur:()=>K,QI:()=>W,cS:()=>l,Lx:()=>T,xP:()=>C,c2:()=>b,Eh:()=>G,ZN:()=>U,ru:()=>E,vM:()=>S,YM:()=>j,j0:()=>$,Od:()=>m,dC:()=>f,Z$:()=>R,Fp:()=>B,VV:()=>L,of:()=>D,Ce:()=>h,ws:()=>p,w6:()=>w,u4:()=>O,nq:()=>M,iw:()=>q,OE:()=>x,Ss:()=>N,oo:()=>_,Ri:()=>P});var r,i=n(4268),o=n(3735),s=(n(7341),n(9384)),a=n(7209),c=function(t){return{concat:a.VV(t)}},u=function(t){return{concat:a.Fp(t)}};r=void 0;var d=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},l=s.Xl,m=s.Od,f=function(t,e){return t<0||t>=e.length},p=function(t){return function(e){return d([t],e,!0)}},h=p,g=function(t){return function(e){return d(d([],e,!0),[t],!1)}},v=g,_=function(t,e,n){if(m(n)){var r=s.r1(n);return r.splice(t,0,e),r}return[e]},b=function(t){return m(t)?s.G(t):s.YP},y=function(t){return function(e){for(var n=Math.max(0,Math.floor(e)),r=[t(0)],i=1;i<n;i++)r.push(t(i));return r}},w=function(t,e){return t<=e?y((function(e){return t+e}))(e-t+1):[t]};function k(t,e){return e?t.concat(e):function(e){return e.concat(t)}}function E(t){return function(e){var n=e.length;if(0===n)return l;for(var r=[],i=e[0],o=[i],s=1;s<n;s++){var a=e[s];t.equals(a,i)?o.push(a):(r.push(o),o=[i=a])}return r.push(o),r}}var S=function(t){return function(e){for(var n={},r=0,i=e;r<i.length;r++){var o=i[r],a=t(o);s.e$.call(n,a)?n[a].push(o):n[a]=[o]}return n}};var P=function(t){for(var e=[t[0][0]],n=[t[0][1]],r=1;r<t.length;r++)e[r]=t[r][0],n[r]=t[r][1];return[e,n]},I=function(t){return function(e){for(var n=[t,e[0]],r=1;r<e.length;r++)n.push(t,e[r]);return n}},D=s.ri,O=function(t,e){return x(t,(function(t,n,r){return e(n,r)}))},T=function(t){return function(e){return function(n){return n.slice(1).reduce((function(n,r){return t.concat(n,e(r))}),e(n[0]))}}},M=function(t,e){return q(t,(function(t,n,r){return e(n,r)}))},x=function(t,e){return function(n){return n.reduce((function(t,n,r){return e(r,t,n)}),t)}},C=function(t){return function(e){return function(n){return n.slice(1).reduce((function(n,r,i){return t.concat(n,e(i+1,r))}),e(0,n[0]))}}},q=function(t,e){return function(n){return n.reduceRight((function(t,n,r){return e(r,n,t)}),t)}},A=s.YM,U=function(t){return{show:function(e){return"[".concat(e.map(t.show).join(", "),"]")}}},G=function(t){return(0,i.f7)((function(e,n){return e.length===n.length&&e.every((function(e,r){return t.equals(e,n[r])}))}))},j=(s.F4,A),z=s.Gb,R=function(t){return t[t.length-1]},L=function(t){var e=c(t);return function(t){return t.reduce(e.concat)}},B=function(t){var e=u(t);return function(t){return t.reduce(e.concat)}},K=function(t){return function(e){return e.reduce(t.concat)}},$=function(t){var e=K(t);return function(t){return(0,o.ls)(function(t){return function(e){var n=z(e);return m(n)?(0,o.zG)(n,I(t),h(j(e))):e}}(t),e)}};function W(t,e){return void 0===e?h(t):(0,o.zG)(e,h(t))}var N=function(t,e){return(0,o.zG)(t,k([e]))}},4923:(t,e,n)=>{n.d(e,{Bu:()=>g,CC:()=>z,DZ:()=>et,EW:()=>N,Eh:()=>dt,G:()=>q,HA:()=>U,I8:()=>L,P5:()=>v,RF:()=>R,RJ:()=>K,SW:()=>Y,Su:()=>b,UI:()=>y,Ub:()=>H,V_:()=>W,XP:()=>l,Yz:()=>M,_Y:()=>$,_r:()=>I,dp:()=>c,dx:()=>p,e$:()=>h,hX:()=>tt,jt:()=>O,kp:()=>j,mK:()=>X,mS:()=>B,nn:()=>G,nr:()=>mt,nu:()=>F,oA:()=>at,oh:()=>ct,qS:()=>J,ri:()=>S,sq:()=>x,t9:()=>A,tV:()=>rt,uK:()=>nt,uZ:()=>lt,vA:()=>V,vP:()=>P,xb:()=>u,yW:()=>C,z7:()=>T,zV:()=>Q});var r=n(4268),i=n(3735),o=n(9384),s=n(4870),a=n(2751),c=(n(5605),function(t){return Object.keys(t).length}),u=function(t){for(var e in t)if(o.e$.call(t,e))return!1;return!0},d=function(t){return function(e){return Object.keys(e).sort(t.compare)}},l=d(a.Df);function m(t){if("function"==typeof t)return m(a.Df)(t);var e=d(t);return function(t){return function(n){for(var r=[],i=0,o=e(n);i<o.length;i++){var s=o[i];r.push(t(s,n[s]))}return r}}}var f=m(a.Df)((function(t,e){return[t,e]}));var p=function(t,e){return function(n){if(o.e$.call(n,t)&&n[t]===e)return n;var r=Object.assign({},n);return r[t]=e,r}},h=function(t,e){return o.e$.call(e,t)};function g(t){return function(e,n){if(void 0===n){var r=g(t);return function(t){return r(t,e)}}for(var i in e)if(!o.e$.call(n,i)||!t.equals(e[i],n[i]))return!1;return!0}}function v(t,e){return void 0===e?function(e){return v(t,e)}:o.e$.call(e,t)?o.G(e[t]):o.YP}var _={};function b(t){return function(e){var n={};for(var r in e)o.e$.call(e,r)&&(n[r]=t(r,e[r]));return n}}function y(t){return b((function(e,n){return t(n)}))}function w(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(2===t.length)return w(a.Df).apply(void 0,t);var n=d(t[0]);return function(t,e){return function(r){for(var i=t,o=n(r),s=o.length,a=0;a<s;a++){var c=o[a];i=e(c,i,r[c])}return i}}}function k(t){if("compare"in t){var e=d(t);return function(t){return function(n){return function(r){for(var i=t.empty,o=e(r),s=o.length,a=0;a<s;a++){var c=o[a];i=t.concat(i,n(c,r[c]))}return i}}}}return k(a.Df)(t)}function E(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(2===t.length)return E(a.Df).apply(void 0,t);var n=d(t[0]);return function(t,e){return function(r){for(var i=t,o=n(r),s=o.length-1;s>=0;s--){var a=o[s];i=e(a,r[a],i)}return i}}}var S=function(t,e){var n;return(n={})[t]=e,n};function P(t){return X(a.Df)(t)}function I(t){return function(e){var n={},r={};for(var i in e)if(o.e$.call(e,i)){var a=t(i,e[i]);switch(a._tag){case"Left":n[i]=a.left;break;case"Right":r[i]=a.right}}return(0,s.s4)(n,r)}}function D(t){return function(e){var n={},r={};for(var i in e)if(o.e$.call(e,i)){var a=e[i];t(i,a)?r[i]=a:n[i]=a}return(0,s.s4)(n,r)}}function O(t){return function(e){var n={};for(var r in e)if(o.e$.call(e,r)){var i=t(r,e[r]);o.pC(i)&&(n[r]=i.value)}return n}}function T(t){return function(e){var n={},r=!1;for(var i in e)if(o.e$.call(e,i)){var s=e[i];t(i,s)?n[i]=s:r=!0}return r?n:e}}var M=f,x=function(t){for(var e={},n=0,r=t;n<r.length;n++){var i=r[n];e[i[0]]=i[1]}return e};function C(t){return function(e){for(var n in e)if(!t(e[n]))return!1;return!0}}function q(t){return function(e){for(var n in e)if(t(e[n]))return!0;return!1}}function A(t){return function(e,n){if(void 0===n){var r=A(t);return function(t){return r(e,t)}}for(var i in n)if(t.equals(n[i],e))return!0;return!1}}var U=function(t,e){return(0,i.zG)(t,y(e))},G=function(t,e){return(0,i.zG)(t,b(e))},j=function(t){var e=it(t);return function(t,n,r){return(0,i.zG)(t,e(n,r))}},z=function(t){return function(e){var n=ot(t)(e);return function(t,e){return(0,i.zG)(t,n(e))}}},R=function(t){var e=st(t);return function(t,n,r){return(0,i.zG)(t,e(n,r))}},L=function(t,e){return(0,i.zG)(t,tt(e))},B=function(t,e){return(0,i.zG)(t,et(e))},K=function(t,e){return(0,i.zG)(t,nt(e))},$=function(t,e){return(0,i.zG)(t,rt(e))},W=function(t){var e=w(t);return function(t,n,r){return(0,i.zG)(t,e(n,r))}},N=function(t){var e=k(t);return function(t){var n=e(t);return function(t,e){return(0,i.zG)(t,n(e))}}},F=function(t){var e=E(t);return function(t,n,r){return(0,i.zG)(t,e(n,r))}},Y=function(t,e){return(0,i.zG)(t,I(e))},Q=function(t,e){return(0,i.zG)(t,D(e))},H=function(t,e){return(0,i.zG)(t,O(e))},V=function(t,e){return(0,i.zG)(t,T(e))},J=function(t){var e=Z(t);return function(t){var n=e(t);return function(t,e){return n(t,(0,i.ls)(i.SK,e))}}},X=function(t){var e=J(t);return function(t){var n=e(t);return function(t){return n(t,i.yR)}}},Z=function(t){return function(e){var n=d(t);return function(t,r){var i=n(t);if(0===i.length)return e.of(_);for(var o=e.of({}),s=function(n){o=e.ap(e.map(o,(function(t){return function(e){var r;return Object.assign({},t,((r={})[n]=e,r))}})),r(n,t[n]))},a=0,c=i;a<c.length;a++){s(c[a])}return o}}},tt=function(t){return T((function(e,n){return t(n)}))},et=function(t){return O((function(e,n){return t(n)}))},nt=function(t){return D((function(e,n){return t(n)}))},rt=function(t){return I((function(e,n){return t(n)}))};function it(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){var n=w(t[0]);return function(t,e){return n(t,(function(t,n,r){return e(n,r)}))}}return it(a.Df).apply(void 0,t)}function ot(t){if("compare"in t){var e=k(t);return function(t){var n=e(t);return function(t){return n((function(e,n){return t(n)}))}}}return ot(a.Df)(t)}function st(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){var n=E(t[0]);return function(t,e){return n(t,(function(t,n,r){return e(n,r)}))}}return st(a.Df).apply(void 0,t)}var at=function(t){var e={};for(var n in t)if(o.e$.call(t,n)){var r=t[n];o.pC(r)&&(e[n]=r.value)}return e},ct=function(t){var e={},n={};for(var r in t)if(o.e$.call(t,r)){var i=t[r];o.nM(i)?e[r]=i.left:n[r]=i.right}return(0,s.s4)(e,n)},ut="ReadonlyRecord";function dt(t){var e=g(t);return(0,r.f7)((function(t,n){return e(t)(n)&&e(n)(t)}))}function lt(t){return{concat:function(e,n){if(u(e))return n;if(u(n))return e;var r=Object.assign({},e);for(var i in n)o.e$.call(n,i)&&(r[i]=o.e$.call(e,i)?t.concat(e[i],n[i]):n[i]);return r},empty:_}}a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df;function mt(t,e){return o.e$.call(void 0===e?this:e,t)}a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df},7927:(t,e,n)=>{n.d(e,{UI:()=>u,XP:()=>a,dx:()=>c,hX:()=>y,xb:()=>o});var r=n(4923),i=n(2751),o=(n(5605),r.dp,r.xb),s=function(t){return function(e){return Object.keys(e).sort(t.compare)}},a=s(i.Df);var c=r.dx;r.e$;r.Bu,r.P5,r.Su;var u=r.UI;r.ri;function d(t){return r.vP(t)}r._r;r.jt;r.yW,r.G,r.t9;var l=r.HA,m=(r.nn,r.kp),f=r.CC,p=r.RF,h=(r.I8,r.mS,r.RJ,r._Y,r.V_),g=r.EW,v=r.nu,_=(r.SW,r.zV,r.Ub,r.vA,r.qS),b=(r.mK,function(t){return function(e){var n=s(t);return function(t,r){var i=n(t);if(0===i.length)return e.of({});for(var o=e.of({}),s=function(n){o=e.ap(e.map(o,(function(t){return function(e){return t[n]=e,t}})),r(n,t[n]))},a=0,c=i;a<c.length;a++){s(c[a])}return o}}}),y=r.hX;r.DZ,r.uK,r.tV;r.oA,r.oh;var w="Record";r.Eh,r.uZ,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,r.nr,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df},2197:(t,e,n)=>{n.d(e,{ff:()=>r});var r=function(t){return function(e){return!t(e)}}},4870:(t,e,n)=>{n.d(e,{Pd:()=>i,s4:()=>r});n(3735);var r=function(t,e){return{left:t,right:e}},i=function(t,e){return function(n){return r(t(o(n)),e(s(n)))}},o=function(t){return t.left},s=function(t){return t.right}},7407:(t,e,n)=>{n.d(e,{qA:()=>y,Hi:()=>b,qo:()=>w,dO:()=>v,UA:()=>k,PM:()=>_,ak:()=>O,YO:()=>D,tS:()=>h,mU:()=>S,At:()=>I,tD:()=>c,UI:()=>m,of:()=>p,RD:()=>q,oE:()=>U,uU:()=>C,pE:()=>A});var r=n(6862),i=n(3735);function o(t,e){var n=(0,r.m)(e);return function(e){return n((0,i.ls)(e,t.fromIO))}}var s=n(7341),a=n(9384),c=function(t){return function(){return Promise.resolve().then(t)}};var u=function(t,e){return(0,i.zG)(t,m(e))},d=function(t,e){return(0,i.zG)(t,f(e))},l=function(t,e){return(0,i.zG)(t,h(e))},m=function(t){return function(e){return function(){return Promise.resolve().then(e).then(t)}}},f=function(t){return function(e){return function(){return Promise.all([Promise.resolve().then(e),Promise.resolve().then(t)]).then((function(t){return(0,t[0])(t[1])}))}}},p=function(t){return function(){return Promise.resolve(t)}},h=function(t){return function(e){return function(){return Promise.resolve().then(e).then((function(e){return t(e)()}))}}},g="Task";var v={URI:g,map:u},_={URI:g,of:p},b={URI:g,map:u,ap:d},y={URI:g,map:u,ap:d,of:p},w={URI:g,map:u,ap:d,chain:l},k={URI:g,map:u,of:p,ap:d,chain:l},E=i.yR,S=(0,r.m)(w),P={URI:g,fromIO:c},I=o(P,w),D=(a.F4,(0,s.YO)(v)),O=(0,r.a)(w),T=p(a.Xl),M=function(t){var e=function(t){return function(e){return function(){return Promise.all(e.map((function(e,n){return Promise.resolve().then((function(){return t(n,e)()}))})))}}}(t);return function(t){return a.Od(t)?e(t):T}},x=function(t){var e=function(t){return function(e){return function(){return a.Gb(e).reduce((function(e,n,r){return e.then((function(e){return Promise.resolve().then(t(r+1,n)).then((function(t){return e.push(t),e}))}))}),Promise.resolve().then(t(0,a.YM(e))).then(a.ri))}}}(t);return function(t){return a.Od(t)?e(t):T}},C=function(t){return M((function(e,n){return t(n)}))},q=C(i.yR),A=function(t){return x((function(e,n){return t(n)}))},U={URI:g,map:u,of:p,ap:d,chain:l,fromIO:c,fromTask:E}},6934:(t,e,n)=>{n.d(e,{Do:()=>ht,ak:()=>gt,tS:()=>it,fX:()=>mt,wE:()=>pt,Zl:()=>ot,Uo:()=>K,tD:()=>L,fF:()=>B,fS:()=>N,t$:()=>U,UI:()=>tt,Vn:()=>nt,EQ:()=>$,LV:()=>W,vx:()=>Y,F2:()=>G,Ij:()=>vt,Y3:()=>F});var r=n(6862),i=n(1828),o=n(365),s=n(3735),a=n(7341);function c(t){return(0,s.ls)(o.F2,t.of)}function u(t){return(0,s.ls)(o.t$,t.of)}function d(t){return function(e){return t.map(e,o.F2)}}function l(t){return function(e){return t.map(e,o.t$)}}function m(t){return function(e){return(0,s.ls)(o.ij(e),t.of)}}function f(t){var e=m(t);return function(t){var n=e(t);return function(t){return(0,s.ls)(t,n)}}}function p(t){var e=v(t),n=f(t);return function(t){var r=n(t);return function(t){return e(r(t))}}}function h(t){return(0,a.UI)(t,o.dO)}function g(t){return(0,i.ap)(t,o.G5)}function v(t){return function(e){return function(n){return t.chain(n,(function(n){return o.nM(n)?t.of(n):e(n.right)}))}}}function _(t){return function(e){return function(n){return t.chain(n,(function(n){return o.nM(n)?e():t.of(n)}))}}}function b(t){return function(e,n){return function(r){return t.map(r,o.Pd(e,n))}}}function y(t){return function(e){return function(n){return t.map(n,o.Vn(e))}}}function w(t){return function(e,n){return function(r){return t.map(r,o.EQ(e,n))}}}function k(t){return function(e,n){return function(r){return t.chain(r,o.EQ(e,n))}}}function E(t){return function(e){return function(n){return t.chain(n,o.EQ(e,t.of))}}}function S(t){return function(e){return function(n){return t.chain(n,(function(n){return o.nM(n)?e(n.left):t.of(n)}))}}}function P(t){var e=S(t);return function(n){return e((function(e){return t.map(n(e),(function(t){return o.nM(t)?t:o.t$(e)}))}))}}function I(t){return function(e){return function(n){return t.chain(n,o.EQ((function(n){return t.map(e(n),o.t$)}),(function(e){return t.of(o.F2(e))})))}}}function D(t){return function(e){return t.map(e,o.LF)}}function O(t){return function(e){return t.map(e,o.i$)}}var T=n(2690),M=n(9679),x=n(9384),C=n(7407),q=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{c(r.next(t))}catch(t){o(t)}}function a(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))},A=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},U=u(C.PM),G=c(C.PM),j=d(C.dO),z=l(C.dO),R=(0,s.ls)(C.tD,j),L=(C.tD,R),B=j,K=C.of,$=(C.tD,w(C.dO)),W=k(C.UA),N=E(C.UA),F=function(t,e){return function(){return q(void 0,void 0,void 0,(function(){var n;return A(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,t().then(x.F2)];case 1:return[2,r.sent()];case 2:return n=r.sent(),[2,x.t$(e(n))];case 3:return[2]}}))}))}},Y=(C.dO,C.PM,C.PM,C.UA,S(C.UA)),Q=(C.UA,C.UA,C.dO,function(t,e){return(0,s.zG)(t,tt(e))}),H=function(t,e){return(0,s.zG)(t,rt(e))},V=function(t,e){return(0,s.zG)(t,it(e))},J=function(t,e,n){return(0,s.zG)(t,et(e,n))},X=function(t,e){return(0,s.zG)(t,nt(e))},Z=function(t,e){return(0,s.zG)(t,st(e))},tt=h(C.dO),et=b(C.dO),nt=y(C.dO),rt=g(C.Hi),it=v(C.UA),ot=it,st=_(C.UA),at=G,ct=U,ut="TaskEither";var dt={URI:ut,map:Q,ap:H,chain:V},lt={URI:ut,fromEither:K},mt=(0,T.fX)(lt,dt),ft={URI:ut,fromIO:L,fromTask:B},pt=(0,M.oU)(ft,dt);var ht=at(x.F4),gt=(0,r.a)(dt),vt=(x.Xl,{URI:ut,bimap:J,mapLeft:X,map:Q,of:at,ap:H,chain:V,alt:Z,fromIO:L,fromTask:B,throwError:ct})},5605:(t,e,n)=>{function r(t,e){return function(n){var r=t.traverse(n);return function(t,i){return n.map(r(t,i),e.separate)}}}function i(t,e){return function(n){var r=t.traverse(n);return function(t,i){return n.map(r(t,i),e.compact)}}}n.d(e,{BL:()=>i,Fj:()=>r})},3735:(t,e,n)=>{n.d(e,{MZ:()=>i,Q1:()=>c,SK:()=>m,W8:()=>s,a9:()=>o,bc:()=>d,gn:()=>a,ls:()=>u,yR:()=>r,zG:()=>l});function r(t){return t}var i=r;function o(t){return function(){return t}}var s=o(!0),a=o(null),c=o(void 0);function u(t,e,n,r,i,o,s,a,c){switch(arguments.length){case 1:return t;case 2:return function(){return e(t.apply(this,arguments))};case 3:return function(){return n(e(t.apply(this,arguments)))};case 4:return function(){return r(n(e(t.apply(this,arguments))))};case 5:return function(){return i(r(n(e(t.apply(this,arguments)))))};case 6:return function(){return o(i(r(n(e(t.apply(this,arguments))))))};case 7:return function(){return s(o(i(r(n(e(t.apply(this,arguments)))))))};case 8:return function(){return a(s(o(i(r(n(e(t.apply(this,arguments))))))))};case 9:return function(){return c(a(s(o(i(r(n(e(t.apply(this,arguments)))))))))}}}function d(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t}function l(t,e,n,r,i,o,s,a,c){switch(arguments.length){case 1:return t;case 2:return e(t);case 3:return n(e(t));case 4:return r(n(e(t)));case 5:return i(r(n(e(t))));case 6:return o(i(r(n(e(t)))));case 7:return s(o(i(r(n(e(t))))));case 8:return a(s(o(i(r(n(e(t)))))));case 9:return c(a(s(o(i(r(n(e(t))))))));default:for(var u=arguments[0],d=1;d<arguments.length;d++)u=arguments[d](u);return u}}var m=function(t,e){return e}},9384:(t,e,n)=>{n.d(e,{F2:()=>l,F4:()=>v,G:()=>a,Gb:()=>h,Od:()=>f,Wi:()=>i,Xl:()=>g,YM:()=>p,YP:()=>s,e$:()=>_,nM:()=>c,pC:()=>o,r1:()=>b,ri:()=>m,t$:()=>d,tO:()=>u});var r=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},i=function(t){return"None"===t._tag},o=function(t){return"Some"===t._tag},s={_tag:"None"},a=function(t){return{_tag:"Some",value:t}},c=function(t){return"Left"===t._tag},u=function(t){return"Right"===t._tag},d=function(t){return{_tag:"Left",left:t}},l=function(t){return{_tag:"Right",right:t}},m=function(t){return[t]},f=function(t){return t.length>0},p=function(t){return t[0]},h=function(t){return t.slice(1)},g=[],v={},_=Object.prototype.hasOwnProperty,b=function(t){return r([t[0]],t.slice(1),!0)}},4011:(t,e,n)=>{n.d(e,{Df:()=>i,Eq:()=>r});var r={equals:function(t,e){return t===e}},i={equals:r.equals,compare:function(t,e){return t<e?-1:t>e?1:0}};r.equals,i.compare},2751:(t,e,n)=>{n.d(e,{Df:()=>i,Eq:()=>r,pn:()=>s,xb:()=>o});var r={equals:function(t,e){return t===e}},i={equals:r.equals,compare:function(t,e){return t<e?-1:t>e?1:0}},o=function(t){return 0===t.length},s=function(t,e){return function(n){return n.endsWith(t,e)}}},4386:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(477),i=n.n(r);function o(){return i()('/*! permutive-javascript-sdk v19.101.0 (web) (built 2023-11-24T11:49:12.388Z) */(()=>{"use strict";function t(t){return t}function e(t){return function(){return t}}var n=e(void 0);function r(t,e,n,r,o,i,a,c,u){switch(arguments.length){case 1:return t;case 2:return function(){return e(t.apply(this,arguments))};case 3:return function(){return n(e(t.apply(this,arguments)))};case 4:return function(){return r(n(e(t.apply(this,arguments))))};case 5:return function(){return o(r(n(e(t.apply(this,arguments)))))};case 6:return function(){return i(o(r(n(e(t.apply(this,arguments))))))};case 7:return function(){return a(i(o(r(n(e(t.apply(this,arguments)))))))};case 8:return function(){return c(a(i(o(r(n(e(t.apply(this,arguments))))))))};case 9:return function(){return u(c(a(i(o(r(n(e(t.apply(this,arguments)))))))))}}}function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t}function i(t,e,n,r,o,i,a,c,u){switch(arguments.length){case 1:return t;case 2:return e(t);case 3:return n(e(t));case 4:return r(n(e(t)));case 5:return o(r(n(e(t))));case 6:return i(o(r(n(e(t)))));case 7:return a(i(o(r(n(e(t))))));case 8:return c(a(i(o(r(n(e(t)))))));case 9:return u(c(a(i(o(r(n(e(t))))))));default:for(var s=arguments[0],m=1;m<arguments.length;m++)s=arguments[m](s);return s}}var a=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},c=function(t){return"Some"===t._tag},u={_tag:"None"},s=function(t){return{_tag:"Some",value:t}},m=function(t){return"Left"===t._tag},l=Object.prototype.hasOwnProperty,d=function(t){return a([t[0]],t.slice(1),!0)},p=function(t){return function(e){return!t(e)}};var f=u,g=s;function h(t){return function(e){return t(e)?g(e):f}}var w=function(t){return"Left"===t._tag?f:g(t.right)},b=function(t,e){return i(t,_(e))},v=function(t,e){return i(t,S(e))},y="Option",k=function(t){return{equals:function(e,n){return e===n||(T(e)?T(n):!T(n)&&t.equals(e.value,n.value))}}},q=function(t){return{equals:k(t).equals,compare:function(e,n){return e===n?0:O(e)?O(n)?t.compare(e.value,n.value):1:-1}}},_=function(t){return function(e){return T(e)?f:g(t(e.value))}},S=function(t){return function(e){return T(e)||T(t)?f:g(e.value(t.value))}},x={URI:y,map:b,ap:v},j=function(t){return function(e){return T(e)?f:t(e.value)}},z=function(t){return function(e){return T(e)?t():e}},A=w,O=c,T=function(t){return"None"===t._tag},M=function(t,e){return function(n){return T(n)?t():e(n.value)}},E=M,N=E,I=function(t){return function(e){return T(e)?t():e.value}};function C(t){return t instanceof Error?t:new Error("string"==typeof t?t:JSON.stringify(t))}const L=()=>({kind:"null",value:null}),P=t=>({kind:"string",value:t}),B=t=>({kind:"number",value:t}),U=t=>({kind:"array",value:t}),F=t=>({kind:"object",value:t}),G=t=>t,D=()=>({kind:"bottom"}),H=t=>({kind:"inner",a:t}),V=t=>({kind:"top",error:t}),R=t=>({kind:"unbounded",group:t}),Y=(t,e)=>({kind:"windowed",key:e,group:t}),K=(t,e,n)=>({kind:"countLimit",n,limit:e,group:t}),W=(t,e,n)=>({kind:"uniqueLimit",n,limit:e,group:t}),J=t=>({kind:"numberGroup",group:t}),Q=t=>({kind:"stringGroup",group:t}),X=t=>({kind:"tuple",tuple:t}),$=t=>({state:t}),Z=(t,e)=>({commands:t,payload:e});var tt=function(t){return{equals:function(e,n){return e===n||t(e,n)}}},et=function(t){return tt((function(e,n){for(var r in t)if(!t[r].equals(e[r],n[r]))return!1;return!0}))},nt=function(t){return function(e,n){return e===n||0===t(e,n)}},rt=function(t){return{equals:nt(t),compare:function(e,n){return e===n?0:t(e,n)}}},ot=function(t){return function(e){return rt((function(n,r){return e.compare(t(n),t(r))}))}},it=function(t){return function(e,n){return-1===t.compare(e,n)}},at=function(t){return function(e,n){return 1===t.compare(e,n)}},ct=function(t){return function(e,n){return e===n||t.compare(e,n)<1?e:n}},ut=function(t){return function(e,n){return e===n||t.compare(e,n)>-1?e:n}};var st={equals:function(t,e){return t===e}},mt={equals:st.equals,compare:function(t,e){return t<e?-1:t>e?1:0}};const lt=(t,e)=>{switch(t.kind){case"bottom":return{kind:"bottom"};case"inner":return H(e(t.a));case"top":return V(t.error)}},dt=t=>rt(((e,n)=>{if("bottom"===e.kind&&"bottom"===n.kind)return 0;if("bottom"===e.kind)return-1;if("bottom"===n.kind)return 1;if("top"===e.kind&&"top"===n.kind)return mt.compare(e.error,n.error);if("top"===e.kind)return 1;if("top"===n.kind)return-1;if("inner"===e.kind&&"inner"===n.kind)return t.compare(e.a,n.a);throw new Error("Non exhaustive match in extendedAlgebraOrd")}));var pt;pt=void 0;var ft=function(t){return t[0]},gt=ft;var ht=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},wt=function(t){return t.length>0},bt=function(t,e){return t<0||t>=e.length},vt=function(t){return function(e){return ht([t],e,!0)}},yt=vt,kt=function(t){return function(e){return ht(ht([],e,!0),[t],!1)}},qt=kt,_t=d,St=function(t){return wt(t)?s(t):u},xt=function(t){return function(e){for(var n=Math.max(0,Math.floor(e)),r=[t(0)],o=1;o<n;o++)r.push(t(o));return r}};var jt=_t,zt=function(t,e,n){for(var r=[n(t[0],e[0])],o=Math.min(t.length,e.length),i=1;i<o;i++)r[i]=n(t[i],e[i]);return r};var At=function(t){return function(e){var n=Math.max(1,t);return n>=e.length?[jt(e),[]]:[i(e.slice(1,n),yt(Tt(e))),e.slice(n)]}},Ot=function(t){return tt((function(e,n){return e.length===n.length&&e.every((function(e,r){return t.equals(e,n[r])}))}))},Tt=gt;var Mt={equals:function(t,e){return t===e}},Et={equals:Mt.equals,compare:function(t,e){return t<e?-1:t>e?1:0}};function Nt(t){return function(e,n){if(void 0===n){var r=Nt(t);return function(t){return r(e,t)}}for(var o,i=0;i<n.length;i++)if(o=n[i],t.equals(o,e))return!0;return!1}}var It=function(t,e){return function(n){for(var r=n.length,o=t,i=0;i<r;i++)o=e(i,o,n[i]);return o}};var Ct=function(t){return 0===t.length},Lt=wt,Pt=yt,Bt=qt,Ut=function(t,e){return t<=0?[]:xt(e)(t)};var Ft=bt,Gt=function(t){return function(e){return Ft(t,e)?Rt(e):e.slice(0,t)}};var Dt=function(t,e){for(var n=t.length,r=0;r<n&&e(t[r]);r++);return r};function Ht(t){return function(e){var n=Qt(Dt(e,t))(e);return{init:n[0],rest:n[1]}}}var Vt=function(t){return function(e){return t<=0||Ct(e)?Rt(e):t>=e.length?[]:e.slice(t,e.length)}};var Rt=function(t){return t.slice()},Yt=function(t){return Ct(t)?[]:t.slice().reverse()},Kt=function(t){return function(e){return e.length<=1?Rt(e):e.slice().sort(t.compare)}},Wt=function(t,e,n){for(var r=[],o=Math.min(t.length,e.length),i=0;i<o;i++)r[i]=n(t[i],e[i]);return r};var Jt=Nt,Qt=function(t){return function(e){return t>=1&&Lt(e)?At(t)(e):Ct(e)?[Rt(e),[]]:[[],Rt(e)]}};function Xt(t){var e=Jt(t);return function(n,r){if(void 0===r){var o=Xt(t);return function(t){return o(t,n)}}return n.filter((function(t){return!e(t,r)}))}}var $t=function(t){return function(e){return i(e,function(t){return function(e){for(var n=[],r=0;r<e.length;r++)n.push.apply(n,t(r,e[r]));return n}}((function(e,n){return t(n)})))}},Zt=function(t){return function(e){for(var n=[],r=0;r<e.length;r++){var o=t(r,e[r]);c(o)&&n.push(o.value)}return n}},te=function(t){return Zt((function(e,n){return t(n)}))},ee=te(t),ne=It,re=function(t){var e=oe(t);return function(t){return e((function(e,n){return t(n)}))}},oe=function(t){return function(e){return ne(t.of([]),(function(n,r,o){return t.ap(t.map(r,(function(t){return function(e){return i(t,Bt(e))}})),e(n,o))}))}},ie=function(t){return rt((function(e,n){for(var r=e.length,o=n.length,i=Math.min(r,o),a=0;a<i;a++){var c=t.compare(e[a],n[a]);if(0!==c)return c}return Et.compare(r,o)}))},ae=function(t){return{_tag:"Left",left:t}},ce=function(t){return{_tag:"Right",right:t}},ue=function(t,e){return i(t,le(e))},se=function(t,e){return i(t,pe(e))},me="Either",le=function(t){return function(e){return ge(e)?e:ce(t(e.right))}},de=ce,pe=function(t){return function(e){return ge(e)?e:ge(t)?t:ce(e.right(t.right))}},fe={URI:me,map:ue,ap:se,of:de},ge=m,he=function(t){return function(e){return ge(e)?t(e.left):e.right}},we=he,be=function(t,e){try{return ce(t())}catch(t){return ae(e(t))}};var ve=function(t){return-1===t?1:1===t?-1:0};function ye(t,e){return ee(t.map(e))}function ke(t,e,n,r){const o=(t,e)=>{if(0===t.length)return ee(e.map((t=>g({1:t[1],2:n(f,g(t[2]))}))));if(0===e.length)return ee(t.map((t=>g({1:t[1],2:n(g(t[2]),f)}))));if(t.length>0&&e.length>0&&it(r)(t[0][1],e[0][1])){const[r,...i]=t,a=r[1],c=r[2];return Pt({1:a,2:n(g(c),f)})(o(i,e))}if(t.length>0&&e.length>0&&at(r)(t[0][1],e[0][1])){const[r,...i]=e,a=r[1],c=r[2];return Pt({1:a,2:n(f,g(c))})(o(t,i))}if(t.length>0&&e.length>0){const[r,...i]=t,[a,...c]=e,u=r[1],s=r[2],m=a[2];return Pt({1:u,2:n(g(s),g(m))})(o(i,c))}throw new Error("Non exhaustive match in mapOption2")},i=ot((t=>t[1]))(r),a=(t=>{const e=ye(t,(t=>O(t[2])?g({1:t[1],2:t[2].value}):f));return 0===e.length?f:g(e)})(o(Kt(i)([...t].map((t=>({1:t[0],2:t[1]})))),Kt(i)([...e].map((t=>({1:t[0],2:t[1]}))))));return _((t=>new Map(t.map((t=>[t[1],t[2]])))))(a)}function qe(t,e,n,r){const o=ot((t=>t[0]))(r),i=Kt(o)([...e]).reduceRight(((t,e)=>{if(ge(t)){const r=n(e[1],t.left);return O(r)?ae(r.value):ce(e[0])}return t}),ae(t));return A(i)}function _e(t,e){return new Map([...t].map(e))}function Se(t,e){return new Map([...t].filter(e))}function xe(t){return JSON.stringify(je(t))}function je(t){switch(t.kind){case"null":return Oe.encode(t);case"string":return Te.encode(t);case"number":return Me.encode(t);case"array":return Ee.encode(t);case"object":return Ne.encode(t)}}function ze(t){return null===t?Oe.decode(t):"number"==typeof t?Me.decode(t):"string"==typeof t?Te.decode(t):Array.isArray(t)?Ee.decode(t):Ne.decode(t)}const Ae=(t,e)=>ae(`Failed to decode. Input was ${JSON.stringify(t)}. Codec type was ${e}`),Oe={encode:t=>null,decode:t=>null===t?ce({kind:"null",value:null}):Ae(t,"SimpleNull")},Te={encode:t=>t.value,decode:t=>"string"==typeof t?ce(P(t)):Ae(t,"SimpleString")},Me={encode:t=>t.value,decode:t=>"number"==typeof t?ce(B(t)):Ae(t,"SimpleNumber")},Ee={encode:t=>t.value.map(je),decode:t=>{if(Array.isArray(t)){const e=re(fe)(ze)(t);return le(U)(e)}return Ae(t,"SimpleArray")}},Ne={encode:t=>{const e=[...t.value.entries()];return Object.assign({},...Array.from(e,(([t,e])=>({[t]:je(e)}))))},decode:t=>{if(t&&t.constructor===Object){const e=re(fe)((([t,e])=>i(ze(e),le((e=>o(t,e))))))(Object.entries(t));return le((t=>F(new Map([...t]))))(e)}return Ae(t,"SimpleObject")}};function Ie(t){return i(t,Le,_(xe),I((()=>"<encode error>")))}function Ce(t){return _(De)(function(t){switch(t.state.kind){case"top":return g(P(t.state.error));case"bottom":return f;case"inner":return Le(t.state.a)}}(t))}function Le(t){return function(t){switch(t.kind){case"numberGroup":case"stringGroup":return Pe(t.group);case"tuple":return t.tuple.length>0}}(t.payload)?g(U(function(t,e){const n=_((t=>Pt(t)(e)))(t);return I((()=>e))(n)}(_((t=>P(function(t){const e=t=>E((()=>""),(t=>"b"+JSON.stringify(t)))(t.bound),n=t=>{switch(t.operation){case"add":return"p";case"mul":return"m";case"max":return"v";case"min":return"n"}},r=t=>{const r=e(t[1])+n(t[1]);return 1===t[2]?r:r+JSON.stringify(t[2])};return t.map(r).join("")}(t))))(t.commands),function(t){const e=t=>{switch(t.kind){case"bottom":return{kind:"null",value:null};case"top":return P(t.error);case"inner":return B(t.a)}},n=t=>ye([Be,Ue,t=>i(t,Ge,F,g)],(e=>e(t))),r=t=>ye([Be,Fe,t=>i(t,Ge,(t=>_e(t,(([t,e])=>[JSON.stringify(t),e]))),F,g)],(e=>e(t)));switch(t.kind){case"tuple":return t.tuple.map(e);case"stringGroup":return n(t.group);case"numberGroup":return r(t.group)}}(t.payload)))):f}function Pe(t){switch(t.kind){case"unbounded":return t.group.size>0;case"windowed":return t.group.size>0||O(t.key);case"countLimit":case"uniqueLimit":return t.group.size>0||O(t.limit)}}function Be(t){switch(t.kind){case"unbounded":return f;case"windowed":return g(P("w"));case"countLimit":return g(P(1===t.n?"x":`x${t.n}`));case"uniqueLimit":return g(P(1===t.n?"u":`u${t.n}`))}}function Ue(t){switch(t.kind){case"unbounded":return f;case"windowed":return g(P(O(t.key)?t.key.value:""));case"countLimit":case"uniqueLimit":return g(P(O(t.limit)?t.limit.value:""))}}function Fe(t){switch(t.kind){case"unbounded":return f;case"windowed":return O(t.key)?g(B(t.key.value)):g({kind:"null",value:null});case"countLimit":case"uniqueLimit":return O(t.limit)?g(B(t.limit.value)):g({kind:"null",value:null})}}function Ge(t){switch(t.kind){case"unbounded":case"windowed":case"countLimit":case"uniqueLimit":return t.group}}function De(t){switch(t.kind){case"array":return 0===t.value.length?{kind:"null",value:null}:1===t.value.length?De(t.value[0]):U(t.value.map(De));case"object":return i(Se(t.value,(([t,e])=>"null"!==e.kind)),(t=>_e(t,(t=>[t[0],De(t[1])]))),F);default:return t}}function He(t){const e=t=>{if(0===t.length)return{kind:"bottom"};const e=(t=>{if(4!==t.length)return f;const[e,n,r,o]=t;if("string"===e.kind&&"string"===n.kind&&"object"===o.kind){const t=h((t=>Ve(t[1].value)&&Re(t[2].value)))({1:e,2:n});return _((t=>({prim:t[1].value,grp:t[2].value,cutoff:r,m:o.value})))(t)}return f})(t);if(O(e)){const{prim:t,grp:n,cutoff:r,m:o}=e.value,i=Ye(r,o,Ke(n));return"string"==typeof i?V(i):H(Z(We(t),i))}const n=(t=>{if(3!==t.length)return f;const[e,n,r]=t;if("string"===e.kind&&"object"===r.kind){const t=h((t=>Re(t.value)))(e);return _((t=>({grp:t.value,cutoff:n,m:r.value})))(t)}return f})(t);if(O(n)){const{grp:t,cutoff:e,m:r}=n.value,o=Ye(e,r,Ke(t));return"string"==typeof o?V(o):H(Z(f,o))}const r=(t=>{if(2!==t.length)return f;const[e,n]=t;if("string"===e.kind&&"object"===n.kind){const t=h((t=>Ve(t.value)))(e);return _((t=>({prim:t.value,m:n.value})))(t)}return f})(t);if(O(r)){const{prim:t,m:e}=r.value;return H(Z(We(t),Q(R(e))))}const o=(t=>{if(1!==t.length)return f;const[e]=t;return"object"===e.kind?g({m:e.value}):f})(t);if(O(o)){const{m:t}=o.value;return H(Z(f,Q(R(t))))}const i=(t=>{if(t.length<1)return f;const[e,...n]=t;if("string"===e.kind){const t=h((t=>Ve(t.value)))(e);return _((t=>({prim:t.value,rest:n})))(t)}return f})(t);if(O(i)){const{prim:t,rest:e}=i.value;return H(Z(We(t),Qe(e)))}return H(Z(f,Qe(t)))},n=t=>"array"===t.kind?$t(n)(t.value):[t];return"null"===t.kind?$({kind:"bottom"}):$(e(n(t)))}function Ve(t){const e=t.split("");if(!0==(0===e.length))return!1;{const[t,...n]=e;return-1!=="bpmvn".indexOf(t)&&n.every((t=>-1!=="bpmvn0123456789.".indexOf(t)))}}function Re(t){const e=t.split("");switch(!0){case 0===e.length:return!1;case"w"===e[0]&&void 0===e[1]:return!0;default:{const[t,...n]=e;return-1!=="ux".indexOf(t)&&-1===n.map((t=>!isNaN(parseInt(t)))).indexOf(!1)}}}function Ye(t,e,n){switch(t.kind){case"string":return Q(n({1:g(t.value),2:e}));case"number":case"null":return J(n({1:"null"===t.kind?f:g(t.value),2:Se(_e(e,(([t,e])=>[Number(t),e])),(t=>!isNaN(t[0])))}));default:return"{bad cutoff}"}}function Ke(t){const e=t=>e=>W(e[2],e[1],t),n=t=>e=>K(e[2],e[1],t),r=t.split("");switch(!0){case"w"===r[0]&&void 0===r[1]:return t=>Y(t[2],t[1]);case"u"===r[0]&&void 0===r[1]:return e(1);case"u"===r[0]&&void 0!==r[1]:return e(parseInt(r.slice(1).join("")));case"x"===r[0]&&void 0===r[1]:return n(1);case"x"===r[0]&&void 0!==r[1]:return n(parseInt(r.slice(1).join("")));default:throw new Error("This should never happen if you use isGroupCommand")}}function We(t){const e=t=>T(t.bound)||"add"===t.operation||"mul"===t.operation?g(t):f,n=(t,n,r)=>{const o=((t,n)=>i(t,(t=>{switch(t){case"p":return g("add");case"m":return g("mul");case"v":return g("max");case"n":return g("min");default:return f}}),_((t=>({operation:t,bound:n}))),j(e)))(t,r);return _((t=>{const{init:e,rest:r}=Ht((t=>{return"number"==typeof(e=parseInt(t))&&isFinite(e)&&Math.floor(e)===e;var e}))(n);return{1:{1:t,2:0===e.length?1:parseInt(e.join(""))},2:r.join("")}}))(o)};return _(G)(St(Je(t,(t=>{const e=t.split("");if(0===e.length)return f;const[r,...o]=e;if("b"===r){const{init:t,rest:e}=i(o,Ht((t=>-1!=="1234567890.".indexOf(t))));if(0===t.length||0===e.length)return f;const r=parseFloat(t.join("")),[a,...c]=e;return n(a,c,g(r))}return n(r,o,f)}))))}function Je(t,e){const n=e(t);return I((()=>[]))(_((t=>[t[1]].concat(Je(t[2],e))))(n))}function Qe(t){return X(t.map(Xe))}function Xe(t){switch(t.kind){case"number":return H(t.value);case"string":return V(t.value);case"null":return{kind:"bottom"};case"object":return V("{object}");case"array":return V("{array}")}}function $e(t,e,n){return function(r){for(var o=Array(n.length+1),i=0;i<n.length;i++)o[i]=n[i];return o[n.length]=r,0===e?t.apply(null,o):$e(t,e-1,o)}}var Ze={1:function(t){return[t]},2:function(t){return function(e){return[t,e]}},3:function(t){return function(e){return function(n){return[t,e,n]}}},4:function(t){return function(e){return function(n){return function(r){return[t,e,n,r]}}}},5:function(t){return function(e){return function(n){return function(r){return function(o){return[t,e,n,r,o]}}}}}};function tn(t){return l.call(Ze,t)||(Ze[t]=$e(o,t-1,[])),Ze[t]}function en(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=e.length,o=tn(r),i=t.map(e[0],o),a=1;a<r;a++)i=t.ap(i,e[a]);return i}}const nn={strategy:(t,e,n)=>r=>{if(T(n))return e;if("delta"===t&&T(e))return f;if(T(e))return n;if(O(e)&&O(n))return r(e.value,n.value);throw new Error("Non exhaustive match in combineCommand.strategy")},operation:(e,n,o,a,c,u)=>{const s=ie(dt(u)),m=i(n.bound,E((()=>t),(t=>e=>ct(u)(c.fromNumber(t),e))));if("append"===e&&"add"===n.operation)return Wt(o,a,ln("append",r(c.plus,m)));if("append"===e&&"mul"===n.operation)return Wt(o,a,ln("append",r(c.times,m)));if("append"===e&&"max"===n.operation)return ut(s)(o,a);if("join"===e&&"add"===n.operation)return Wt(o,a,ln("join",ut(u)));if("join"===e&&"mul"===n.operation)return Wt(o,a,ln("join",ut(u)));if("join"===e&&"max"===n.operation)return ut(s)(o,a);if("min"===n.operation)return nn.operation(e,{operation:"max",bound:n.bound},o,a,c,function(t){return rt(((e,n)=>ve(t.compare(e,n))))}(u));if("delta"===e&&"max"===n.operation)return at(s)(o,a)?o:a.map(D);if("delta"===e)return Wt(o,a,((t,e)=>at(dt(u))(t,e)?lt(t,m):{kind:"bottom"}));throw new Error("Non exhaustive match in combineCommand.operation")},extend:(t,e,n,r)=>{if("delta"===t&&"top"===n.kind&&"top"===r.kind)return at(mt)(n.error,r.error)?V(n.error):{kind:"bottom"};if("delta"===t&&"bottom"===r.kind)return n;if("delta"===t&&"bottom"===n.kind)return{kind:"bottom"};if("top"===n.kind&&"top"===r.kind)return V(ut(mt)(n.error,r.error));if("top"===n.kind)return n;if("top"===r.kind)return r;if("inner"===n.kind&&"inner"===r.kind)return e(n.a,r.a);if("bottom"===n.kind)return r;if("bottom"===r.kind)return n;throw new Error("Non exhaustive match in extend")}},rn={fromNumber:t,plus:(t,e)=>t+e,times:(t,e)=>t*e};function on(t,e,n,r){if("unbounded"===t.kind&&"unbounded"===e.kind){const o=t.group,i=e.group;return I(D)(_((t=>H(R(t))))(ke(o,i,n,r)))}if("windowed"===t.kind&&"windowed"===e.kind){const o=t.key,i=t.group,a=e.key,c=e.group,u=ut(q(r))(o,a);return I(D)(_((t=>H(Y(t,u))))(ke(i,c,n,r)))}if("countLimit"===t.kind&&"countLimit"===e.kind){const o=t.n,i=e.n;if(o===i){const i=t.limit,a=t.group,c=e.limit,u=e.group,s=ut(q(r))(i,c);return I(D)(_((t=>H(K(t,s,o))))(ke(a,u,n,r)))}return V("Non matching counts")}if("uniqueLimit"===t.kind&&"uniqueLimit"===e.kind){const o=t.n,i=e.n;if(o===i){const i=t.limit,a=t.group,c=e.limit,u=e.group,s=ut(q(r))(i,c);return I(D)(_((t=>H(W(t,s,o))))(ke(a,u,n,r)))}return V("Non matching counts")}return V("Non matching group types")}function an(t,e,n,r,o,i){const a=(t,e)=>({1:Gt(t)(e).concat(Ut(Math.max(0,t-e.length),D)),2:Vt(t)(e)}),c=(e,n,r)=>{if(0===e.length)return nn.operation(t,{operation:"max",bound:f},n,r,o,i);if(e.length>0){const[u,...s]=e,m=a(u[2],n),l=m[1],d=m[2],p=a(u[2],r),f=p[1],g=p[2];return nn.operation(t,u[1],l,f,o,i).concat(c(s,d,g))}throw new Error("Non exhaustive match in recurse")};return Yt((u=t=>"bottom"===t.kind,function(t){return t.slice(Dt(t,u))})(Yt(c(e,n,r))));var u}function cn(t,e,n){return I(L)(un(t,f)(e,n))}function un(t,e){const n=e=>(n,r)=>nn.strategy(t,n,r)(un(t,e)),r=(e,r,o)=>{if("stringGroup"===r.kind&&"stringGroup"===o.kind){const t=on(r.group,o.group,n(e),mt);return lt(t,(t=>Q(mn(t,mt))))}if("numberGroup"===r.kind&&"numberGroup"===o.kind){const t=on(r.group,o.group,n(e),Et);return lt(t,(t=>J(mn(t,Et))))}if("tuple"===r.kind&&"tuple"===o.kind){const n=O(e)?e.value:[];return H(X(an(t,n,r.tuple,o.tuple,rn,Et)))}throw new Error(`Non matching payload. Got ${r.kind} and ${o.kind}`)},o=(t,n)=>{if(k(Ot(et({1:et({operation:st,bound:k(Mt)}),2:Mt}))).equals(t.commands,n.commands)){const o=T(t.commands)?e:t.commands,i=r(o,t.payload,n.payload);return lt(i,(e=>Z(t.commands,e)))}if(o=t.commands,a=n.commands,k(Ot(et({1:et({operation:st}),2:Mt}))).equals(o,a)){const o=i(((t,e)=>i(en(x)(t,e),_((([t,e])=>zt(t,e,((t,e)=>({1:{operation:t[1].operation,bound:i(en(x)(t[1].bound,e[1].bound),_((([t,e])=>Math.min(t,e))),z((()=>t[1].bound)),z((()=>e[1].bound)))},2:t[2]})))))))(t.commands,n.commands),z((()=>e))),a=r(o,t.payload,n.payload);return lt(a,(t=>Z(o,t)))}throw new Error(`Non matching primitive strings. Got ${Ie(t)} and ${Ie(n)}`);var o,a};return(e,n)=>Ce($(nn.extend(t,o,He(e).state,He(n).state)))}function sn(t,e,n){const r=_((e=>Se(t,(([t,r])=>function(t){return function(e,n){return-1!==t.compare(e,n)}}(n)(t,e)))))(e);return I((()=>t))(r)}function mn(t,e){switch(t.kind){case"unbounded":return t;case"windowed":return T(t.key)?t:Y(sn(t.group,t.key,e),t.key);case"countLimit":{const n=t.limit,r=t.n,o=t.group,i=(t,e)=>e<=1?f:g(e-1),a=qe(r,o,i,e),c=ut(q(e))(n,a);return K(sn(o,c,e),c,r)}case"uniqueLimit":{const n=t.limit,r=t.n,o=t.group,i=(t,e)=>{if("object"===t.kind){const n=[...t.value.keys(),...e.keys()],o=new Set(n);return o.size>=r?f:g(o)}return f},a=qe(new Set,o,i,e),c=ut(q(e))(n,a);return W(sn(o,c,e),c,r)}}}function ln(t,e){return(n,r)=>nn.extend(t,((t,n)=>H(e(t,n))),n,r)}function dn(t,e){return cn("append",t,e)}function pn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce(((t,e)=>Object.assign(Object.assign({},t),e)),{})}p((function(t){return 0===t.length}));function fn(t,e){const n=Object.keys(t),r=n.length,o={};for(let i=0;i<r;i++){const r=n[i],a=e(r,t[r]);O(a)&&(o[r]=a.value)}return o}const gn=t=>e=>{if("number"==typeof e)return e;if("string"==typeof e){const n=t(e);return Number.isNaN(n)?void 0:n}};gn(parseInt),gn(parseFloat);function hn(t){var e;return["SegmentEntry","SegmentExit"].includes(t.name)&&void 0!==(null===(e=t.properties)||void 0===e?void 0:e.segment_number)}const wn="process";let bn=!1,vn=[],yn=!1;const kn={};let qn={getCurrentTime:()=>new Date,getCurrentSession:()=>"",getCurrentView:()=>"",getSegments:()=>({}),get1PSegments:()=>({}),get3PSegments:()=>({}),getSegmentsArray:()=>({}),getLookalikeModels:()=>({}),setSegmentActivation:()=>{}};const _n=()=>{const t=Tn.concat(qn.get1PSegments(),qn.get3PSegments()),e=On(t);qn.getSegments=()=>t,qn.getSegmentsArray=()=>e};function Sn(t,e,n,r,o,a,c){bn=!1,vn=[],yn=!1;const u=i(r.thirdPartydata,E((()=>r.segments),(t=>Tn.concat(r.segments,t)))),s=On(u);qn={getCurrentTime:()=>new Date,getCurrentSession:()=>r.sessionId,getCurrentView:()=>r.viewId,get1PSegments:()=>r.segments,get3PSegments:()=>i(r.thirdPartydata,I((()=>({})))),getSegments:()=>u,getSegmentsArray:()=>s,getLookalikeModels:()=>i(r.lookalikeModels,I((()=>({})))),setSegmentActivation:(t,e)=>{}},yn=O(r.lookalikeModels),bn=O(r.thirdPartydata);const m=fn(e,((e,n)=>{var r;return(null===(r=t[e])||void 0===r?void 0:r.checksum)===n?f:g(((t,e)=>{const n=a[t].interpret(null,qn);return Object.assign({checksum:e},!1===n.result?{}:{result:n})})(e,n))}));if(0===o.length)return{diff:Object.assign(Object.assign({},t),m),errors:[]};if(0===Object.keys(m).length)return{diff:t,errors:[]};{const r=jn(m,e,n,o,"bootstrap",a,c);return{diff:Object.assign(Object.assign({},t),r.diff),errors:r.errors}}}function xn(t,e,n,r,o,i){(t=>{const e=Object.assign({},t);delete e["1p"],qn.get3PSegments=()=>e})(r),_n(),qn.setSegmentActivation=An(t,e),bn=!0;const a=jn(t,e,n,vn.length>0?vn:[kn],"updateTPD",o,i);return vn=[],a}function jn(t,e,n,r,o,i,a){let c={diff:{},errors:[]};const u=r.length,s=()=>r.filter((t=>{return e=a["!UpdateLookalikeModels"]||[],hn(n=t)&&e.includes(n.properties.segment_number.toString());var e,n})).length===r.length?"lookalikeTransition":"transition",m=(t,e,n)=>"transition"===t?n===e-1?s():"event":t;for(let s=0;s<u;s++){const l=r[s],d=m(o,u,s),p=zn(Object.assign(Object.assign({},t),c.diff),e,n,l,d,i,a);c={diff:Object.assign(Object.assign({},c.diff),p.diff),errors:c.errors.concat(p.errors)}}return c}function zn(t,e,a,c,u,s,m){var l;"bootstrap"!==u&&(qn.setSegmentActivation=An(t,e));const d=L,p=(t,e)=>{const u=s[t],m=u.lift(c,qn),l=r(ze,we(d)),p=l(e.state||null),f=l(m),g=i(be((()=>dn(p,f)),C),he((t=>{throw C(`Failed to append lifted event ${xe(f)} to internal state ${xe(p)}. Got ${t}`)}))),w=i(a[t],h(Boolean),_(l)),[b,v]=i(w,N((()=>o(g,!1)),(t=>i(be((()=>o(dn(g,t),!1)),n),we((()=>o(g,!0))))))),y=je(g),k=u.interpret(je(b),qn),q=e.activations||{};return Object.assign(Object.assign(Object.assign(Object.assign({checksum:e.checksum},null===y?{}:{state:y}),!1===k.result?{}:{result:k}),0===Object.keys(q).length?{}:{activations:q}),!1===v?{}:{dropExternalState:v})},f={diff:{},errors:[]},g=function(t,e,n,r,o){switch(t){case"event":const t=(null==o?void 0:o[r.name])||[];if(bn)return t;{vn.push(r);const e=[...o["!UpdateSecondPartyData"]||[],...o["!UpdateThirdPartyData"]||[]];return Xt(st)(t,e)}case"lookalikeTransition":return(null==o?void 0:o[r.name])||[];case"transition":const i=(null==o?void 0:o[r.name])||[];if(yn){const t=o["!UpdateLookalikeModels"]||[];return i.concat(t)}return i;case"bootstrap":const a=((null==o?void 0:o[r.name])||[]).filter((t=>void 0!==e[t]));return Xt(st)(a,[...bn?[]:(o["!UpdateSecondPartyData"]||[]).concat(o["!UpdateThirdPartyData"]||[]),...yn?[]:o["!UpdateLookalikeModels"]||[]]);case"updateExternalState":return Object.keys(n);case"updateLAL":return o["!UpdateLookalikeModels"]||[];case"updateTPD":return[...o["!UpdateSecondPartyData"]||[],...o["!UpdateThirdPartyData"]||[]];default:return[]}}(u,t,a,c,m),w=g.length;!function(t){hn(t)&&((t=>{const e=qn.get1PSegments(),n={"1p":Object.assign(Object.assign({},e["1p"]),t["1p"])};qn.get1PSegments=()=>n})({"1p":{[t.properties.segment_number]:"SegmentEntry"===t.name}}),_n())}(c);for(let n=0;n<w;n++){const r=g[n],o=t[r]||{checksum:e[r]};let i=o;try{i=p(r,o)}catch(t){f.errors.push(`Failed to interpret query ${r}. Got ${t}`)}i.dropExternalState&&(null!==(l=f.externalStateToDrop)&&void 0!==l||(f.externalStateToDrop={}),f.externalStateToDrop[r]=!0),f.diff[r]=i}return f}function An(t,e){return(n,r,o)=>{if(!(o in t)){const n=e[o];if(void 0===n)throw new Error("Checksum not in internalStateMap");t[o]={checksum:n}}"activations"in t[o]||(t[o].activations={});const i=t[o].activations;n in i||(i[n]=[]);const a=i[n];a.includes(r)||(i[n]=[...a,r])}}function On(t){return Object.keys(t).reduce(((e,n)=>{const r=Object.keys(t[n]),o=[];return r.forEach((e=>{!0===t[n][e]&&o.push(e)})),e[n]=o,e}),{})}const Tn={empty:{},concat:(t,e)=>{const n=Object.assign({},t);for(const[t,r]of Object.entries(e))n[t]?n[t]=pn(n[t],r):n[t]=r;return n}};const Mn=(t,e)=>{const n=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return[t.stateMap,...t.payload,...r,e.rawQueries,e.queriesByEvent]};return"bootstrap"===t.type?Sn(...n(t)):"updateLAL"===t.type?function(t,e,n,r,o,i){return qn.getLookalikeModels=()=>r,yn=!0,zn(t,e,n,kn,"updateLAL",o,i)}(...n(t)):"updateTPD"===t.type?xn(...n(t)):"updateExternalState"===t.type?function(t,e,n,r,o){return zn(t,e,n,kn,"updateExternalState",r,o)}(...n(t)):t.type===wn?jn(...n(t,"event")):"processTransitions"===t.type?function(t,e,n,r,o,i){return jn(t,e,n,r,"transition",o,i)}(...n(t)):{diff:{},errors:[]}};var En;En="bun",globalThis["_____"+"sourceCodeRuntime"]=En;const Nn=function(t){let e=f;const n=I((()=>{const n=t();return e=g(n),n}));return()=>n(e)}((function(){var t;(()=>{var e={234:function(t,e,u){var s=this&&this.__assign||function(){return s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},s.apply(this,arguments)},m=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},l=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},d=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},p=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.env=void 0;var f=p(u(783)),g=p(u(269));e.env=function(){function t(t){return"number"==typeof t?n[t]:t}function e(t){return"number"==typeof t?r[t]:t}function u(t){return"number"==typeof t?o[t]:t}function p(t){switch(t.length){case 0:return null;case 1:return t[0];default:return t}}function h(t,e,n){void 0===n&&(n=v);var r=u(e).reduce((function(t,e){return t&&null!=t[e]?t[e]:null}),t);return null===r?null:n(r)}function w(t,e){var n=u(e).slice();return n.unshift(t),n}function b(t,e,n){return void 0===n&&(n=v),h(t,w("properties",e),n)}var v=function(t){return t},y=function(t){return!0};function k(t,e){return function(n){for(var r=0;r<t.length;r++){if((t[r](n)||!1)===e)return e}return!e}}function q(t){return k(t,!0)}function _(t){return k(t,!1)}var S=function(t){return function(e){return!t(e)}},x=function(t,e){return function(n){return n>=t&&n<=e}},j=function(t){return new Date(t).getTime()},z=function(t){return h(t,["time"],j)},A=function(t,e){return h(e,t,j)},O=function(t,e,n,r,o,i){return function(a){var c=h(a,t,(function(t){return t.filter(r).map((function(t){return h(t,e)})).reduce(o,i)}));return n(null===c?i:c)}};function T(t,e,n,r){var o,i;try{for(var a=m(t),c=a.next();!c.done;c=a.next()){var u=c.value;if(n(u)&&e(u)===r)return r}}catch(t){o={error:t}}finally{try{c&&!c.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}return!r}var M=function(t){return function(n){return("string"==typeof t||"number"==typeof t)&&"string"==typeof n&&n.toLowerCase().indexOf(e(t).toLowerCase())>-1}},E=function(t){return function(e){return null!=e&&Array.isArray(e)&&e.indexOf(t)>=0}};function N(t,e,n,r,o){var i=h(t.getSegments(),[e,n])||!1;return o&&(r||i)&&t.setSegmentActivation(e,n,o),i}function I(t,e,n){return h(t.getSegments(),[e,n])||!1}function C(t,e,n){return void 0===n&&(n=18e5),function(r){return{a:{m:function(t,e){return[e[0],r.a.m(null!=t[0]&&t[0][0]===e[0][0]?t[1]:r.a.z,e[1])]},z:[[],r.a.z]},p:function(n,o){return[[t(n)],h(o,e)===t(n)?r.p(n,o):r.a.z]},r:function(e,n){return r.r(e,0!==n[0].length&&n[0][0]===t(e)?n[1]:r.a.z)},d:r.d.sq||{l:function(o,i){var a=h(o,e),c=t(i);if(a!==c)return null;var u=r.d.l(o,i);if(!(Array.isArray(u)&&u.length>1))return null;var s=l(u),m=s[0],d=s.slice(1),p=+(z(o)||i.getCurrentTime()),f=Math.floor(p/n),g={};return g[f]={},g[f][c]=1===d.length?d[0]:d,[m,"u",null,g]},i:function(e,n){if(!Array.isArray(e)||"object"!=typeof e[3])return[[],r.a.z];var o=t(n),i=e[3];return[[o],Object.keys(i).map((function(t){return i[t][o]})).filter((function(t){return t})).map((function(t){return r.d.i([e[0]].concat(t))})).reduce(r.a.m,r.a.z)]}}}}}var L=C((function(t){return t.getCurrentSession()}),["session_id"],18e5),P=C((function(t){return t.getCurrentView()}),["view_id"],3e5);function B(e,n,r,o){return void 0===o&&(o=1),{a:{m:function(t,e){return t.concat(e).slice(-r)},z:[]},p:function(r,o){return h(o,["name"])===t(n)?[e.p(r,o)]:[]},r:function(t,n){return e.r(t,n.reduce((function(t,n){return e.a.m(t,n)}),e.a.z))},d:e.d.ftn||{l:function(t,n){var i,a=e.d.l(t,n),c=h(t,["time"],j)*o;return a&&[a[0],"x"+r,null,(i={},i[c]=2==a.length?a[1]:a.slice(1),i)]},i:function(t,n){return t?Object.keys(t[3]||{}).sort().reverse().map((function(e){return Array.isArray(e)?d([t[0]],l(t[3][e]),!1):[t[0],t[3][e]]})).map((function(t){return e.d.i(t,n)})):[]}}}}var U=function(t,e){return null===t?null==e?null:{b:e}:null==e?{a:t}:{a:t,b:e}},F=function(t,e){return t&&e?t(e):null},G=function(t,e,n){if(n&&n.result&&Array.isArray(n.result)){var r=F(t.d&&t.d.m,{result:n.result[0]}),o=F(e.d&&e.d.m,{result:n.result[1]});return U(r,o)}return null};var D=function(t){return function(e){function n(t){for(var e=t[0],n=1;n<t.length;n++)e=[e,t[n]];return e}function r(t){for(var n=t,r=Array(e.length),o=e.length-1;o>0;o--)r[o]=n[1],n=n[0];return r[0]=n,r}return{p:function(t,r){return n(e.map((function(e){return e.p(t,r)})))},r:function(n,o){var i=r(o);return t(e.map((function(t,e){return function(){return t.r(n,i[e])}})))({})},a:{z:n(e.map((function(t){return t.a.z}))),m:function(t,o){var i=r(t),a=r(o);var c=e.map((function(t,e){return function(t,e,n){return null===e?n:null===n?e:t.a.m(e,n)}(t,i[e],a[e])}));return n(c)}},d:{l:function(t,n){return function(t){for(var e=t[0],n=1;n<t.length;n++){var r=t[n],o=e;e={},null!==o&&(e.a=o),null!==r&&(e.b=r)}return e}(e.map((function(e){return e.d.l(t,n)})))},i:function(t,r){return function(t,r){for(var o=t,i=e.map((function(t){return t.a.z})),a=function(t,n){return e[t].d.i(n,r)},c=e.length-1;c>0&&o;c--)o.b&&(i[c]=a(c,o.b)),o.a&&1===c&&(i[0]=a(0,o.a)),o=o.a;return n(i)}(t,r)}}}}},H=D(q),V=D(_);function R(t,e){var n=i[t];if(!e||!n)return!1;if(!n.length)return!0;for(var r=0,o=!1,a=function(t){for(var e=[],n=0;n<t.length;++n){var r=t.charCodeAt(n);if(r>=55296&&r<=56319){var o=t.charCodeAt(n+1);if(o>=56320&&o<=57343){e.push(t.slice(n,n+2)),++n;continue}}e.push(t.charAt(n))}return e}(e.toLowerCase()),c=0;c<a.length;c++){for(var u=a[c];r>0&&!n[r][u];)r=n[r].su?n[r].su:0;if(n[r][u]&&(o=!!n[r=n[r][u]].te))break}return o}var Y=function(t){return(0,f.default)(t).toString(g.default).slice(0,8)},K=function(t,e){var n,r,o=Y(t);if(0===e.length)return!1;if(e[0]===o)return!0;for(var i=0,a=e.length,c=!1;(c=(n=e[r=i+(a-i>>1)])!==o)&&(n<o?i=r:a=r,!(i>=a-1)););return!c},W=function(t,e){return function(n){return K(h(n,t),e)}},J=function(t,e){return function(n){return K(b(n,t),e)}};return{q:function(t){return{lift:function(e,n){return t.d.l(e,n)},interpret:function(e,n){return function(e,n){return{result:t.r(e,n)}}(n,t.d.i(e,n))},migrate:function(e){return e&&t.d.m?t.d.m(e):null},m:t.a.m,z:t.a.z,p:t.p,r:t.r,i:t.d.i}},a:_,acq:function(t,e){return{p:function(n,r){return[t.p(n,r),e.p(n,r)]},r:function(n,r){return t.r(n,r[0])&&e.r(n,r[1])},a:{z:[t.a.z,e.a.z],m:function(n,r){return[t.a.m(n[0],r[0]),e.a.m(n[1],r[1])]}},d:{l:function(n,r){return U(t.d.l(n,r),e.d.l(n,r))},i:function(n,r){return n?[t.d.i(n.a||null,r),e.d.i(n.b||null,r)]:[t.a.z,e.a.z]},m:function(n){return G(t,e,n)}}}},acqs:V,acs:R,acs_:function(t,e){return function(n){return R(e,h(n,t))}},af_i:function(t,e,n){return void 0===n&&(n=y),function(r){return h(r,t,(function(t){return T(t,e,n,!1)}))&&!0}},af_l:function(t,e,n){return void 0===n&&(n=y),function(r){var o=h(r,t,(function(t){return t.filter(n).length}));return e(null===o?0:o)}},af_m:function(t,e,n,r){return void 0===r&&(r=y),function(o){var i=h(o,t,(function(t){return t.filter(r)}));return null===i||0===i.length?n(0):n(i.map((function(t){return h(t,e)})).reduce((function(t,e){return t+e}),0)/i.length)}},af_n:function(t,e,n,r){return void 0===r&&(r=y),O(t,e,n,r,(function(t,e){return Math.min(t,e)}),Number.POSITIVE_INFINITY)},af_p:function(t,e,n,r){return void 0===r&&(r=y),O(t,e,n,r,(function(t,e){return t*e}),1)},af_s:function(t,e,n,r){return void 0===r&&(r=y),O(t,e,n,r,(function(t,e){return t+e}),0)},af_u:function(t,e,n){return void 0===n&&(n=y),function(r){return h(r,t,(function(t){return T(t,e,n,!0)}))||!1}},af_x:function(t,e,n,r){return void 0===r&&(r=y),O(t,e,n,r,(function(t,e){return Math.max(t,e)}),Number.NEGATIVE_INFINITY)},as:function(t,e,n){var r=w("properties",e);return function(e){for(var o=h(e,r),i=n.length,a=!0,c=0;c<i;c++){var u=n[c];if(!(a=t(u)(o)))break}return a}},c:E,c_:function(t,e){return function(n){return E(e)(h(n,t))}},cl_:function(t,n){return function(r){return E(e(n))(h(r,t))}},cx:function(t){return function(n){return E(e(t))(n)}},ctu:function(e,n,r,o){return{a:o?{m:function(t,e){return t.filter((function(t){return-1===e.indexOf(t)})).concat(e).slice(-o)},z:[]}:{m:function(t,e){return t.filter((function(t){return-1===e.indexOf(t)})).concat(e)},z:[]},p:function(o,i){return h(i,["name"])===t(e)&&n(i)?h(i,r):[]},r:function(t,e){return e},d:{l:function(){return null},i:function(){return[]}}}},ctv:function(e,n,r,o){function i(t,e){var n,r=function(t){return{k:t.k,c:1+t.c}},o={arr:[],add:{k:e,c:1}};return e?(n=t.reduce((function(t,e){return t.add.k===e.k?{arr:t.arr,add:r(e)}:{arr:t.arr.concat(e),add:t.add}}),o)).arr.concat(n.add):t}return{a:o?{m:function(t,e){return i(t,e).slice(-o)},z:[]}:{m:function(t,e){return i(t,e)},z:[]},p:function(o,i){return h(i,["name"])===t(e)&&n(i)?h(i,r):null},r:function(t,e){return e.reduce((function(t,e){var n;return s(s({},t),((n={})[e.k]=e.c,n))}),{})},d:{l:function(t){return null},i:function(t){return[]}}}},ctw:function(e,n,r,o){return{a:o?{m:function(t,e){return t.concat(e).slice(-o)},z:[]}:{m:function(t,e){return t.concat(e)},z:[]},p:function(o,i){return h(i,["name"])===t(e)&&n(i)?h(i,r):[]},r:function(t,e){return e},d:{l:function(){return null},i:function(){return[]}}}},cw:function(e,n,r){return void 0===r&&(r=v),{a:{m:function(t,e){return t+e},z:0},p:function(r,o){return h(o,["name"])===t(e)&&n(o)?1:0},r:function(t,e){return r(e)},d:{l:function(r){return h(r,["name"])===t(e)&&n(r)?["p",1]:null},i:function(t){return t?Array.isArray(t)?t.slice(-1)[0]:t:0},m:function(t){return t&&t.result?["p",t.result]:null}}}},cb:function(e,n,r,o){return{a:{m:function(t,e){return Math.min(t+e,o)},z:0},p:function(r,o){return h(o,["name"])===t(e)&&n(o)?1:0},r:function(t,e){return r(e)},d:{l:function(r){return h(r,["name"])===t(e)&&n(r)?["b".concat(o,"p"),1]:null},i:function(t){return t?Array.isArray(t)?t.slice(-1)[0]:t:0},m:function(t){return t&&t.result?["b".concat(o,"p"),Math.min(o,t.result)]:null}}}},e:function(t){return function(e){return e===t}},e_:function(t,e){return function(n){return h(n,t)===e}},fm:function(t,e){return{p:e.p,r:function(n,r){return t(e.r(n,r))},a:e.a,d:e.d}},frontDecode:function(t){var e=t.split("\\t");if(0===e.length)return[];var n=e[0],r=new Array(Math.ceil(e.length/2));r[0]=e[0];for(var o=1;o<e.length/2;o+=1){var i=e[2*o-1],a=e[2*o];if(""===i)n=a;else{var c=parseInt(i);n=n.slice(0,c)+a}r[o]=n}return r},ftn:function(e,n,r){return{a:{m:function(t,e){return t.concat(e.slice(0,r-t.length))},z:[]},p:function(r,o){return h(o,["name"])===t(n)?[e.p(r,o)]:[]},r:function(t,n){return e.r(t,n.reduce((function(t,n){return e.a.m(t,n)}),e.a.z))},d:B(e,n,r,-1).d}},fw:function(e,n,r,o){return void 0===o&&(o=v),{a:{m:function(t,e){return null===t?e:t},z:null},p:function(o,i){return h(i,["name"])===t(e)&&n(i)?h(i,r):null},r:function(t,e){return e},d:{l:function(r){return h(r,["name"])===t(e)&&n(r)?["p",1]:null},i:function(t){return t?Array.isArray(t)?t.slice(-1)[0]:t:0},m:function(t){return t&&t.result?["p",t.result]:null}}}},g:function(t){return function(e){return e>t}},g_:function(t,e){return function(n){return h(n,t)>e}},gb:function(t,e,n){return{a:{m:function(n,r){var o=Object.keys(n).concat(Object.keys(r)).filter((function(t,e,n){return n.indexOf(t)===e})).sort((function(t,e){return Math.max(h(n,[e,1]),h(r,[e,1]))-Math.max(h(n,[t,1]),h(r,[t,1]))})).slice(0,e).reduce((function(e,o){var i=t.a.m(h(n,[o,0])||t.a.z,h(r,[o,0])||t.a.z);return e[o]=[i,Math.max(h(n,[o,1]),h(r,[o,1]))],e}),{});return o},z:{}},p:function(e,r){var o,i,a=h(r,w("properties",n)),c=t.p(e,r);return null==a||(null==(i=c)||"object"==typeof i&&0===Object.keys(i).length||i===t.a.z)?{}:((o={})[a]=[c,h(r,["time"],j)],o)},r:function(e,n){var r={};return Object.keys(n).forEach((function(o){return r[o]=t.r(e,n[o][0])})),r},d:{l:function(){return null},i:function(){return{}}}}},ge:function(t){return function(e){return e>=t}},ge_:function(t,e){return function(n){return h(n,t)>=e}},bse:function(t,e){return function(n){var r=h(n,t);return Y(r)===e}},bsne:function(t,e){return function(n){var r=h(n,t);return Y(r)!==e}},bsc:W,bsnc:function(t,e){return S(W(t,e))},bsc_:J,bsnc_:function(t,e){return S(J(t,e))},i_:v,ifp:function(t){return{a:{m:function(t,e){return e},z:null},p:function(t){return null},r:function(e,n){return function(e){return I(e,"1p",t)}(e)},d:{l:function(t,e){return null},i:function(t){return null}}}},isp:function(t,e,n,r){return{a:{m:function(t,e){return e},z:!1},p:function(n,r){return I(n,t,e)},r:function(o,i){return N(o,t,e,n,r)},d:{l:function(t,e){return null},i:function(t){return Array.isArray(t)&&(!!+t[2]||!1)}}}},itp:function(t,e,n,r){return{a:{m:function(t,e){return e},z:!1},p:function(n,r){return I(n,t,e)},r:function(o,i){return N(o,t,e,n,r)},d:{l:function(t,e){return null},i:function(t){return Array.isArray(t)&&(!!+t[2]||!1)}}}},k:h,l:function(t){return function(e){return e<t}},l_:function(t,e){return function(n){var r=h(n,t);return null!==r&&r<e}},le:function(t){return function(e){return e<=t}},le_:function(t,e){return function(n){var r=h(n,t);return null!==r&&r<=e}},lm:function(t,e){var n=function(e){return function(t,e,n){if(void 0===e[n])return NaN;var r=t||{};if(0==(r["1p"]||[]).length)return NaN;var o,i=e[n]||{},a=(i["1p"]||{}).const||0;return Object.keys(r).forEach((function(t){r[t].forEach((function(e){var n=(i[t]||{})[e]||0;a+=n}))})),o=a,1/(1+Math.pow(Math.E,-o))}(e.getSegmentsArray(),e.getLookalikeModels(),t)};return{a:{m:function(t,e){return e},z:null},p:function(t){return null},r:function(t,r){return e(n(t))},d:{l:function(t,e){return null},i:function(t){return null}}}},ltn:B,mnw:function(e,n,r,o){void 0===o&&(o=v);var i=Number.POSITIVE_INFINITY;return{a:{m:function(t,e){return t<e?t:e},z:i},p:function(o,a){return h(a,["name"])===t(e)&&n(a)?h(a,r):i},r:function(t,e){return o(e)},d:{l:function(o){return h(o,["name"])===t(e)&&n(o)?["n",h(o,r)]:null},i:function(t){return t?Array.isArray(t)?t.slice(-1)[0]:t:i}}}},mxw:function(e,n,r,o){void 0===o&&(o=v);var i=Number.NEGATIVE_INFINITY;return{a:{m:function(t,e){return t>e?t:e},z:i},p:function(o,a){return h(a,["name"])===t(e)&&n(a)?h(a,r):i},r:function(t,e){return o(e)},d:{l:function(o){return h(o,["name"])===t(e)&&n(o)?["v",h(o,r)]:null},i:function(t){return t?Array.isArray(t)?t.slice(-1)[0]:t:i}}}},n0:S(v),n:function(t){return function(e){return e!==t}},nt:S,n_:function(t,e){return function(n){return h(n,t)!==e}},o:q,ocq:function(t,e){return{p:function(n,r){return[t.p(n,r),e.p(n,r)]},r:function(n,r){return t.r(n,r[0])||e.r(n,r[1])},a:{z:[t.a.z,e.a.z],m:function(n,r){return[t.a.m(n[0],r[0]),e.a.m(n[1],r[1])]}},d:{l:function(n,r){return U(t.d.l(n,r),e.d.l(n,r))},i:function(n,r){return n?[t.d.i(n.a||null,r),e.d.i(n.b||null,r)]:[t.a.z,e.a.z]},m:function(n){return G(t,e,n)}}}},ocqs:H,oe:function(t){for(var e=Object.keys(t),n=e.length,r=new Array(n);n--;)r[n]=[e[n],t[e[n]]];return r},os:function(t,e,n){var r=w("properties",e);return function(e){for(var o=h(e,r),i=n.length,a=!1,c=0;c<i;c++){var u=n[c];if(a=t(u)(o))break}return a}},pacs:function(t,e){return function(n){return R(e,b(n,t))}},pb:function(t,e,n){return function(r){return x(e,n)(b(r,t))}},pc:function(t,e){return function(n){var r=b(n,t);return null!=r&&Array.isArray(r)&&r.indexOf(e)>=0}},pc_:function(t,n){return function(r){var o=b(r,t),i=e(n);return null!=o&&Array.isArray(o)&&o.indexOf(i)>=0}},pe:function(t,e){return function(n){return b(n,t)===e}},pg:function(t,e){return function(n){return b(n,t)>e}},pge:function(t,e){return function(n){return b(n,t)>=e}},pl:function(t,e){return function(n){var r=b(n,t);return null!==r&&r<e}},ple:function(t,e){return function(n){var r=b(n,t);return null!==r&&r<=e}},pn:function(t,e){return function(n){return b(n,t)!==e}},ps:function(t,e){return function(n){return M(e)(b(n,t))}},pw:function(e,n,r,o){return void 0===o&&(o=v),{a:{m:function(t,e){return t*e},z:1},p:function(o,i){return h(i,["name"])===t(e)&&n(i)?h(i,r):1},r:function(t,e){return o(e)},d:{l:function(o){return h(o,["name"])===t(e)&&n(o)?(i=h(o,r))>=1?["m2p",i]:i>0?["m2p",null,1/i]:0==i?["m2p",0]:i>-1?["m2p",null,1/i,1]:["m2p",i,null,1]:null;var i},i:function(t){return t?Array.isArray(t)?0===(e=t.slice(1))[0]?0:Math.pow(-1,e[2]||0)*(e[0]||1)/(e[1]||1):t:1;var e}}}},r:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return c[t].apply(c,d([],l(e),!1))},ref:function(t){return function(e){return a[t](e)}},s:M,s_:function(t,e){return function(n){return M(e)(h(n,t))}},scq:function(t,e,n){return void 0===n&&(n=v),{p:function(n,r){return[t.p(n,r),e.p(n,r)]},r:function(r,o){return n(t.r(r,o[0])+e.r(r,o[1]))},a:{z:[t.a.z,e.a.z],m:function(n,r){return[t.a.m(n[0],r[0]),e.a.m(n[1],r[1])]}},d:{l:function(n,r){return U(t.d.l(n,r),e.d.l(n,r))},i:function(n,r){return n?[t.d.i(n.a||null,r),e.d.i(n.b||null,r)]:[t.a.z,e.a.z]},m:function(n){return G(t,e,n)}}}},sq:L,dscq:function(e,n,r,o){var i="x".concat(o),a=function(t){return t?2===t.length?["p",i,"",t[1]]:t:null},c=function(r){var o,a=function(t){return h(t,["session_id"])}(r);return a&&h(r,["name"])===t(e)&&n(r)?["p",i,"",(o={},o[a]=1,o)]:null};return{a:{m:function(t,e){var n=a(t),r=a(e);return n?r?["p",i,"",s(s({},n[3]),r[3])]:n:r},z:null},p:function(t,e){return c(e)},r:function(t,e){var n=e&&e[3]&&"object"==typeof e[3]?Object.keys(e[3]).length:0;return r(n)},d:{l:function(t,e){return c(t)},i:function(t,e){return a(t)}}}},sw:function(e,n,r,o){return void 0===o&&(o=v),{a:{m:function(t,e){return t+e},z:0},p:function(o,i){return h(i,["name"])===t(e)&&n(i)?h(i,r):0},r:function(t,e){return o(e)},d:{l:function(o){return function(r){return h(r,["name"])===t(e)&&n(r)}(o)?(i=h(o,r))<0?["p2",null,-i]:["p2",i]:null;var i},i:function(t){return t?Array.isArray(t)?((e="p2"===t[0]?t.slice(1):t)[0]||0)-(e[1]||0):t:0;var e}}}},t:y,tb:function(t,e){return function(n){return x(t,e)(z(n))}},te:function(t){return function(e){return z(e)===t}},te_:function(t,e){return function(n){return A(t,n)===e}},tg:function(t){return function(e){return z(e)>t}},tg_:function(t,e){return function(n){return A(t,n)>e}},tge:function(t){return function(e){return z(e)>=t}},tge_:function(t,e){return function(n){return A(t,n)>=e}},ti:j,tl:function(t){return function(e){return z(e)<t}},tl_:function(t,e){return function(n){return A(t,n)<e}},tle:function(t){return function(e){return z(e)<t}},tle_:function(t,e){return function(n){return A(t,n)<e}},tn:function(t){return function(e){return z(e)!==t}},tn_:function(t,e){return function(n){return A(t,n)!==e}},tw:function(t,e,n){var r=n||100,o=Math.ceil(e/r),i=function(t){return Math.floor(t/o)},a=function(t,n,r){var o;return[i(t.getTime()-e),(o={},o[i(n)]=r,o)]},c=function(e,n){var r=Math.max(e[0],n[0]),o=Object.keys(e[1]).filter((function(t){return t>=r})).concat(Object.keys(n[1]).filter((function(t){return t>=r}))).filter((function(t,e,n){return n.indexOf(t)===e})).reduce((function(r,o){var i=t.a.m(e[1][o]||t.a.z,n[1][o]||t.a.z);return i!==t.a.z&&(r[o]=i),r}),{});return[r,o]},u=[Number.NEGATIVE_INFINITY,{}],s=function(t){var e=function(e){return e.map((function(e){var n=l(e,3),r=n[0],o=(n[1],n[2]);return a(t.t,o,r)})).reduce(c,u)};return c(e(t.in),e(t.out))},m=function(e){if(void 0!==e.result)return m(e.result);if(void 0!==e.w)return m(s(e));var n=l(e,2),r=(n[0],n[1]),o=null,i={};for(var a in r){var c=t.d.m({result:r[a]});c&&Array.isArray(c)&&(o=c[0],i[a]=p(c.slice(1)))}return o&&[o,"w",e[0],i]};return{a:{m:function(t,e){var n=t.w?s(t):t;return c(n,e)},z:u},p:function(e,n){return a(e.getCurrentTime(),h(n,["time"],j),t.p(e,n))},r:function(e,n){var r=(n.w?s(n):n)[1];return t.r(e,Object.keys(r).reduce((function(e,n){return t.a.m(e,r[n])}),t.a.z))},d:t.d.tw||{l:function(e,n){var r=t.d.l(e,n),o=t.d.i(r,n);return r&&d([r[0],"w"],l(a(n.getCurrentTime(),h(e,["time"],j),o)),!1)},i:function(t,n){var r=Array.isArray(t)?t:[],o=n.getCurrentTime(),a=i(o.getTime()-e);return[r[2]||null,Object.keys(r[3]||{}).map((function(t){var e;return(e={})[t]=r[3][t],e})).reduce((function(t,e){return Object.keys(e).filter((function(t){return parseInt(t)>=a})).forEach((function(n){return t[n]=e[n]})),t}),{})]},m:t.d.m&&m}}},vgw:function(e,n,r,o){void 0===o&&(o=v);var i={v:0,k:0};return{a:{m:function(t,e){var n=t.k+e.k;return{v:n?t.v+e.k*(e.v-t.v)/n:0,k:n}},z:i},p:function(o,a){return h(a,["name"])===t(e)&&n(a)?{v:h(a,r),k:1}:i},r:function(t,e){return o(e.v)},d:{l:function(o){return h(o,["name"])===t(e)&&n(o)?0==(i=h(o,r))?["p3",1]:i<0?["p3",1,null,-i]:["p3",1,i]:null;var i},i:function(t){return t?Array.isArray(t)?{v:(((e=t.slice(1))[1]||0)-(e[2]||0))/(e[0]||1),k:e[0]||0}:void 0:i;var e}}}},vq:P,w:function(t){return function(n){return n===e(t)}},x:function(t){return function(n){return n!==e(t)}},y:function(t,e){return function(n){return b(n,t)===r[e]}},y_:function(t,e){return function(n){return h(n,t)===r[e]}},z:function(t,e){return function(n){return b(n,t)!==r[e]}},z_:function(t,e){return function(n){return h(n,t)!==r[e]}}}}()},249:function(t,e,n){var r;t.exports=(r=r||function(t,e){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),"undefined"!=typeof self&&self.crypto&&(r=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(r=globalThis.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&void 0!==n.g&&n.g.crypto&&(r=n.g.crypto),!r)try{r=n(480)}catch(t){}var o=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),a={},c=a.lib={},u=c.Base={extend:function(t){var e=i(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},s=c.WordArray=u.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:4*t.length},toString:function(t){return(t||l).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,o=t.sigBytes;if(this.clamp(),r%4)for(var i=0;i<o;i++){var a=n[i>>>2]>>>24-i%4*8&255;e[r+i>>>2]|=a<<24-(r+i)%4*8}else for(var c=0;c<o;c+=4)e[r+c>>>2]=n[c>>>2];return this.sigBytes+=o,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=u.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],n=0;n<t;n+=4)e.push(o());return new s.init(e,t)}}),m=a.enc={},l=m.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],o=0;o<n;o++){var i=e[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new s.init(n,e/2)}},d=m.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],o=0;o<n;o++){var i=e[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new s.init(n,e)}},p=m.Utf8={stringify:function(t){try{return decodeURIComponent(escape(d.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return d.parse(unescape(encodeURIComponent(t)))}},f=c.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=p.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n,r=this._data,o=r.words,i=r.sigBytes,a=this.blockSize,c=i/(4*a),u=(c=e?t.ceil(c):t.max((0|c)-this._minBufferSize,0))*a,m=t.min(4*u,i);if(u){for(var l=0;l<u;l+=a)this._doProcessBlock(o,l);n=o.splice(0,u),r.sigBytes-=m}return new s.init(n,m)},clone:function(){var t=u.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),g=(c.Hasher=f.extend({cfg:u.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new g.HMAC.init(t,n).finalize(e)}}}),a.algo={});return a}(Math),r)},269:function(t,e,n){var r;t.exports=(r=n(249),function(){var t=r,e=t.lib.WordArray;function n(t,n,r){for(var o=[],i=0,a=0;a<n;a++)if(a%4){var c=r[t.charCodeAt(a-1)]<<a%4*2|r[t.charCodeAt(a)]>>>6-a%4*2;o[i>>>2]|=c<<24-i%4*8,i++}return e.create(o,i)}t.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp();for(var o=[],i=0;i<n;i+=3)for(var a=(e[i>>>2]>>>24-i%4*8&255)<<16|(e[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|e[i+2>>>2]>>>24-(i+2)%4*8&255,c=0;c<4&&i+.75*c<n;c++)o.push(r.charAt(a>>>6*(3-c)&63));var u=r.charAt(64);if(u)for(;o.length%4;)o.push(u);return o.join("")},parse:function(t){var e=t.length,r=this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var i=0;i<r.length;i++)o[r.charCodeAt(i)]=i}var a=r.charAt(64);if(a){var c=t.indexOf(a);-1!==c&&(e=c)}return n(t,e,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),r.enc.Base64)},783:function(t,e,n){var r,o,i,a,c,u,s,m;t.exports=(m=n(249),o=(r=m).lib,i=o.WordArray,a=o.Hasher,c=r.algo,u=[],s=c.SHA1=a.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],a=n[3],c=n[4],s=0;s<80;s++){if(s<16)u[s]=0|t[e+s];else{var m=u[s-3]^u[s-8]^u[s-14]^u[s-16];u[s]=m<<1|m>>>31}var l=(r<<5|r>>>27)+c+u[s];l+=s<20?1518500249+(o&i|~o&a):s<40?1859775393+(o^i^a):s<60?(o&i|o&a|i&a)-1894007588:(o^i^a)-899497514,c=a,a=i,i=o<<30|o>>>2,o=r,r=l}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+a|0,n[4]=n[4]+c|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(r+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=a.clone.call(this);return t._hash=this._hash.clone(),t}}),r.SHA1=a._createHelper(s),r.HmacSHA1=a._createHmacHelper(s),m.SHA1)},480:()=>{}},u={};function s(t){var n=u[t];if(void 0!==n)return n.exports;var r=u[t]={exports:{}};return e[t].call(r.exports,r,r.exports,s),r.exports}s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}();var m=s(234);t=m.env})();var e={"!UpdateThirdPartyData":["10179","10790","10854","10855","10856","10857","10858","10859","10860","10861","10862","10863","10864","10865","10866","10867","10868","10869","10870","109495","110608","110776","12381","13108","13769","13825","13826","13827","13828","13829","13830","13831","14282","143570","14371","146711","14748","163462","164476","173444","173767","62273","7827","8301","88397"],FormSubmission:["162169"],LinkClick:["10463","144047","27457","29219","29585","7881"],Pageview:["10000000","10000001","10000002","10000003","10000004","10000005","10000006","10000007","10000008","10000010","10000011","10000012","10000013","10000014","10000015","10000016","10000017","10000018","10000019","10000020","10000021","10000022","10000023","10000024","10000025","10000026","10000035","10000036","10000037","10000038","10000039","10000040","10000041","10000042","10000043","10000044","10000045","10000046","10000047","10000048","10000049","10000050","10000051","10000052","10000053","10000054","10000055","10000056","10000057","10000058","10000059","10000060","10000061","10000062","10000063","10000064","10000065","10000066","10000067","10000068","10000069","10000070","10000071","10000072","10000073","10000074","10000075","10000076","10000077","10000078","10000079","10000080","10000081","10000082","10000083","10000084","10000085","10000086","10000087","10000088","10000089","10000090","10000324","10000325","10000327","10000328","10000329","10000330","10000687","10000688","10000689","10000690","10000691","10000692","10000693","10000694","10000695","10000696","10000697","10000698","10000699","10000700","10000701","10000702","10000703","10000704","10000705","10000706","10000707","10000708","10000709","10000710","10000711","10000712","10000713","10000714","10000715","10000716","10000717","10000718","10000719","10000720","10000721","10000722","10000723","10000724","10000725","10000726","10000727","10000728","10000729","10000730","10000731","10000732","10000733","10000734","10000735","10000736","10000737","10000738","10000739","10000740","10000741","10000742","10000743","10000744","10000745","10000746","10000747","10000748","10000749","10000750","10000751","10000752","10000753","10000754","10000755","10000756","10000757","10000758","10000759","10000760","10000761","10000762","10000763","10000764","10000765","10000766","10000767","10000768","10000769","10000770","10000771","10000772","10000773","10000774","10000775","10000776","10000777","10000778","10000779","10000780","10000781","10000782","10000783","10000784","10000785","10000786","10000787","10000788","10000789","10000790","10000791","10000792","10000793","10000794","10000795","10000796","10000797","10000798","10000799","10000800","10000801","10000802","10000803","10116","103289","10339","103641","10428","10463","10622","107543","109495","110608","110776","11122","119318","12475","12668","128826","130054","130057","130832","13108","13183","13445","13446","13520","13640","138028","138029","138030","138031","138032","138040","138041","13852","13855","13856","13857","139146","139331","139702","141239","141505","141823","141910","141912","142486","142561","142764","143231","144047","144062","14577","146858","146861","147055","147455","14808","14812","14816","148197","14823","14830","14831","14848","14851","14853","148572","14858","148689","148896","14919","14921","14922","14923","150934","150976","150978","151041","153448","153449","154701","155324","155688","155850","157140","158433","158784","161949","162071","162072","16243","163462","164476","166265","166733","166778","167632","167908","167942","167943","172212","175669","18570","21542","21794","23694","27457","28391","28538","28540","29195","29567","29568","29569","29571","29572","29573","29574","29575","29576","29581","29582","29590","29591","29592","29593","29594","29595","29596","29598","29599","32319","32321","32324","32333","32334","32336","32338","32339","32340","32341","32347","32348","32627","62592","71852","73622","74544","75203","7809","7827","7834","7835","7836","7843","7844","7878","7880","7881","7925","7981","8015","8500","8501","8502","8679","9697","9702","9704","9705","97745","9812","9831","9837"],PageviewComplete:["162903","162919"],PageviewEngagement:["162903","162919"],SlotClicked:["121925","13444","153448","167908","74544"],SlotViewable:["103566","114753","114754","114755","127958","128331","135588","147871","153448","163175","166342","167908","172841"]},n=["Pageview","SlotViewable","LinkClick","SlotClicked","PageviewComplete","PageviewEngagement"],r=t.frontDecode("-pool\\t\\t/art and entertainment/books and literature\\t43\\t/poetry\\t23\\tcomics and animation\\t23\\tdance\\t23\\tmovies and tv\\t36\\t/animated\\t37\\tchildren\'s\\t38\\tomedies\\t37\\tdocumentaries\\t37\\treality\\t38\\tomantic comedies\\t37\\ttelevision\\t24\\tusic/music genres/classical music\\t42\\topera\\t42\\tpop music\\t42\\tsoundtracks\\t23\\tshows and events/classical concert\\t23\\ttheatre\\t2\\tutomotive and vehicles/cars/luxury\\t25\\tmotorcycles\\t1\\tbusiness and industrial\\t24\\t/fashion industry\\t1\\teducation/adult education\\t11\\tlanguage learning\\t1\\tfamily and parenting\\t2\\tinance/accounting and auditing/tax preparation and planning\\t9\\tfinancial news\\t2\\tood and drink/dining out\\t16\\tfood/fruits and vegetables\\t21\\tsalads\\t16\\thealthy eating\\t16\\tvegan\\t19\\tetarian\\t1\\thealth and fitness\\t2\\tobbies and interests/arts and crafts/photography\\t23\\tbirdwatching\\t3\\tme and garden/gardening and landscaping\\t17\\thome improvement and repair\\t1\\tpets/birds\\t6\\tlarge animals\\t1\\tsociety/crime\\t9\\tdating\\t2\\tports/diving\\t8\\thorse racing\\t13\\ts\\t8\\tolympics/paralympic games\\t8\\tskiing\\t8\\tvolleyball/beach volleyball\\t2\\ttyle and fashion/beauty/cosmetics\\t1\\ttechnology and computing/consumer electronics/tv and video equipment\\t\\tBarcelona\\t\\tCanada\\t2\\ttegories: Travel\\t1\\tlass\\t\\tES\\t\\tFair\\t\\tLondon\\t\\tMadrid\\t1\\tontreal\\t1\\tusic\\t\\tNew York\\t\\tSpain\\t\\tTheatre\\t\\tUK\\t1\\tnited Kingdom\\t7\\tStates\\t\\tVancouver\\t\\tWorkshop\\t\\tabroad\\t2\\tsenta\\t3\\tinthe\\t3\\ttract\\t1\\tccessor\\t1\\tdidas\\t2\\tventure\\t1\\teroport\\t5\\tuerto\\t1\\tguacate\\t1\\tirport transport\\t7\\t-transport\\t1\\tlcohol\\t7\\t free\\t2\\tvocat\\t1\\tmazon prime\\t6\\t-prime\\t6\\tprime\\t2\\terica\\t7\\tn\\t2\\tics\\t3\\tgos\\t3\\tstad\\t2\\tstel\\t1\\tnimal\\t6\\tes\\t5\\tte\\t6\\tion\\t4\\te\\t1\\tpp\\t3\\tarel\\t3\\tle\\t1\\trcade\\t2\\tgentinian\\t2\\tmani\\t2\\tsenal fc\\t2\\tt\\t3\\t (category)\\t1\\tttenborough\\t3\\traction\\t10\\ts (category)\\t1\\tvant garde\\t5\\t-garde\\t2\\tocado\\t\\tbacon\\t2\\tnd\\t2\\trbacoa\\t4\\tecue\\t3\\ts and pubs (category)\\t1\\tbq\\t1\\teach\\t3\\tuty\\t2\\tef\\t3\\tr\\t1\\ticycle\\t2\\tolog\\t2\\tsexual\\t1\\tlog\\t1\\toating\\t2\\tdy-build\\t4\\tbuild\\t2\\tlders\\t2\\tng\\t2\\tok\\t4\\ts\\t3\\tts\\t2\\tulders\\t3\\trbon\\t3\\ttique\\t1\\trandy\\t2\\tewery\\t1\\tudlight\\t3\\tweiser\\t2\\tlleit\\t2\\trger\\t2\\ttchers\\t2\\ty\\t\\tcabaret\\t2\\tlorias\\t6\\te\\t2\\tmera\\t3\\tpbeltown\\t4\\ting\\t2\\tnnabis\\t3\\toeing\\t2\\trdio\\t3\\tn\\t4\\tival\\t2\\tt\\t3\\twalk\\t1\\tbd\\t1\\temeteries\\t2\\tntury21\\t2\\trdo\\t3\\tvesa\\t5\\tza\\t1\\theckout.timeout\\t3\\tese\\t3\\tmist\\t2\\ticken\\t2\\tristmas\\t1\\tinema\\t6\\ts (category)\\t1\\tlassic\\t3\\tus\\t2\\timate\\t4\\tbing\\t3\\tp\\t2\\tothing\\t2\\tub\\t1\\tocktail\\t3\\ttel\\t2\\tlegas\\t2\\tmedia\\t7\\tn\\t5\\ty\\t6\\t (category)\\t3\\tfort food\\t3\\tpetition\\t4\\tuter\\t2\\tncert\\t2\\trona\\t6\\ttion\\t2\\tstelles\\t2\\tw\\t1\\trunch\\t1\\tultura\\t6\\te\\t1\\tycling\\t\\tdairy-free\\t5\\tfree\\t2\\tnce\\t5\\t (category)\\t4\\ting\\t3\\tza\\t1\\teal\\t2\\tcember\\t2\\tsigner\\t3\\tti\\t5\\tno\\t6\\ts\\t4\\t\\t2\\tvice\\t1\\tiet\\t2\\tgital\\t2\\tor\\t2\\trect now\\t6\\t-now\\t6\\tnow\\t2\\tsco\\t3\\tpensaries\\t9\\ty\\t1\\tocumentary\\t2\\tg\\t2\\tof-and-drink\\t1\\trag\\t3\\tm\\t4\\ta\\t1\\tuck\\t1\\tvd\\t\\tearth\\t1\\tdinburgh\\t2\\tucation\\t1\\tlectronic\\t1\\tntertainment\\t2\\tvironment\\t1\\tquinox\\t1\\treader\\t1\\tscapada\\t3\\tuela\\t2\\tport\\t1\\turo 2020\\t8\\t2\\t1\\tvent\\t1\\txercise\\t2\\thibition\\t2\\tpensive\\t4\\trience\\t2\\ttinct\\t\\tfacial\\t2\\tntastic beasts\\t2\\trm\\t4\\ts\\t2\\tshion\\t3\\tt food\\t2\\tuna\\t1\\testival\\t8\\tes\\t8\\ts\\t1\\tilm\\t4\\t (category)\\t5\\tgenres\\t2\\tnance\\t3\\te dining\\t4\\t-dining\\t2\\ttness\\t1\\tlight\\t2\\tora\\t1\\tood\\t3\\ttball\\t2\\trever21\\t2\\ttografa\\t1\\tree\\t2\\tiends\\t1\\tunny\\t\\tgadget\\t2\\tlera\\t3\\tlery\\t2\\tmbl\\t3\\ter\\t4\\ts\\t3\\ting\\t2\\trdens\\t2\\tt\\t2\\ty\\t1\\terbil\\t2\\ttaway\\t7\\ts\\t1\\thost\\t1\\tifts\\t2\\tg\\t2\\tnebra\\t1\\tlenfiddich\\t2\\tuten-free\\t6\\tfree\\t1\\toat\\t2\\ts\\t2\\turmet\\t1\\tranges\\t4\\tja\\t2\\till\\t2\\toups\\t2\\tups\\t1\\tucci\\t2\\tinness\\t1\\tym\\t\\th&m\\t1\\talloween\\t2\\tmburguesa\\t3\\tster\\t2\\trry potter\\t5\\t-potter\\t2\\tunted\\t2\\tvana\\t1\\tbo\\t1\\tealth\\t6\\ty\\t2\\tels\\t2\\tineken\\t1\\tiit\\t2\\tking\\t2\\tlarious\\t2\\tstorical\\t6\\ty\\t1\\toliday\\t7\\ts\\t2\\tmosexual\\t2\\trror\\t3\\tse\\t5\\tback\\t2\\ttel\\t5\\ts (category)\\t1\\tttps://ticketing.timeout.com/\\t8\\twestend.timeout.com/\\t9\\tww.timeout.com/london\\t30\\t/offers\\t31\\ttickets\\t38\\t#\\t1\\tulu\\t2\\tmor\\t4\\tur\\t\\timpression\\t4\\tov\\t1\\tntersex\\t\\tjagermeister\\t2\\tmeson\\t2\\trdin\\t2\\tzz\\t1\\tewel\\t1\\timbean\\t1\\toint\\t2\\tke\\t1\\tuice\\t2\\tnk food\\t\\tkayaking\\t1\\ting charles\\t\\tlager\\t2\\tptop\\t2\\tugh\\t1\\tearn\\t2\\tsbian\\t2\\tvel 3 - expensive\\t6\\t4 - luxury\\t1\\tgbt\\t4\\t (category)\\t1\\tibro\\t2\\tcor\\t2\\tqueur\\t4\\tor\\t5\\tur\\t1\\tlibre\\t1\\tondon/tickets\\t2\\tw alcohol\\t3\\t-alcohol\\t1\\tuxury\\t\\tmaker\'s mark\\t7\\t-mark\\t5\\ts mark\\t2\\tnicure\\t2\\trathon\\t3\\tijuana\\t2\\tscota\\t2\\ttes\\t3\\th\\t1\\teat free\\t4\\t-free\\t2\\teting\\t2\\trry\\t1\\ticrosoft\\t1\\tobile\\t2\\tcktail\\t2\\tda\\t2\\tnkey\\t6\\t shoulder\\t6\\t-shoulder\\t3\\ttreal\\t2\\tvie\\t1\\tum\\t2\\tseo\\t4\\tu\\t5\\tm\\t6\\ts\\t7\\t (category)\\t3\\tic\\t5\\t (category)\\t5\\tal\\t\\tnadal\\t2\\til\\t2\\ttura\\t2\\tvidad\\t1\\tetflix\\t2\\twyork/tickets\\t1\\tightlife\\t9\\t (category)\\t2\\tke\\t2\\tntendo\\t1\\ton-alcoholic\\t\\to2\\t1\\tffer\\t3\\tice\\t1\\tpen-air\\t1\\trganic\\t1\\tutdoor\\t7\\ts\\t\\tpals\\t2\\trade\\t3\\tcs\\t3\\tk\\t4\\ts\\t3\\tques\\t2\\tyment\\t1\\tc\\t1\\tedicure\\t2\\tripheral\\t3\\tro\\t3\\tsonal-train\\t8\\ttrain\\t2\\tt\\t1\\thone\\t3\\tto\\t5\\tgraph\\t2\\tysic\\t1\\ticnic\\t2\\tg\\t2\\tlates\\t2\\ttch\\t1\\tlant based\\t5\\t-based\\t5\\tas\\t5\\tes\\t3\\ty\\t4\\tstation\\t1\\todcast\\t2\\tllastre\\t4\\to\\t2\\tp-up\\t2\\trc\\t3\\tk\\t2\\tt\\t1\\trada\\t2\\tide\\t3\\tnce harry\\t7\\tof wales\\t7\\twilliam\\t2\\totein\\t1\\tumpkin\\t2\\tzzle\\t\\tque-fer\\t4\\thacer\\t3\\tbec\\t3\\ten\\t4\\tr\\t2\\tinoa\\t2\\t fer\\t2\\t hacer\\t\\trabbit\\t1\\te-purpose\\t3\\tuse\\t2\\tcreation\\t3\\tycle\\t6\\ting\\t2\\tpurpose\\t2\\tstaurant\\t10\\ts (category)\\t2\\ttail\\t2\\tuse\\t2\\tview\\t1\\tib\\t1\\toad trip\\t4\\t-trip\\t2\\tbo\\t2\\tku\\t2\\tm\\t3\\tantic\\t2\\tn\\t2\\twing\\t2\\tyal\\t1\\tugby\\t2\\tnning\\t3\\tway\\t\\tsailing\\t2\\tlad\\t2\\tmbuca\\t2\\tnta\\t2\\ttire\\t1\\tcary\\t2\\tenes\\t4\\tic\\t2\\thnapps\\t3\\tool\\t2\\ti fi\\t3\\t-fi\\t3\\tence\\t2\\totch\\t2\\treen\\t1\\teason\\t2\\tcond-hand\\t6\\thand\\t2\\tries\\t1\\theep\\t2\\toe\\t3\\tp\\t4\\tping\\t8\\t and style (category)\\t4\\ts (venues)\\t3\\tw\\t1\\tkin\\t1\\tmoothie\\t1\\tnake\\t2\\teakers\\t1\\toccer\\t2\\tftware\\t2\\tny\\t1\\tpa\\t3\\tce\\t2\\tin-class\\t4\\tclass\\t4\\tning\\t3\\trits\\t2\\tooky\\t3\\trt\\t5\\t & fitness\\t2\\turs\\t1\\ttadium\\t3\\tnd-up\\t5\\tup\\t2\\teakhouse\\t3\\tlla\\t2\\treaming\\t4\\tngth\\t2\\tyl\\t1\\tushi\\t3\\ttainability\\t1\\tweepstake\\t2\\tim\\t\\ttablet\\t2\\tkeaway\\t1\\teatre\\t5\\to\\t2\\tch\\t4\\tn\\t2\\tlevision\\t2\\tquila\\t2\\trnera\\t3\\tror\\t1\\thc\\t2\\te king\\t3\\tater\\t5\\tre\\t7\\t (category)\\t8\\tgenres\\t2\\ting\\t5\\ts to do\\t12\\t (category)\\t6\\t-to-do\\t2\\triller\\t1\\ticket\\t6\\ting.timeout\\t6\\ts.timeout\\t2\\tk-tok\\t2\\tmeout.com/adelaide\\t13\\tustralia\\t12\\tbrisbane\\t12\\tcanada\\t12\\tdarwin\\t12\\tgold-coast\\t12\\tindia\\t12\\tmelbourne\\t12\\tnewyork\\t12\\tontario\\t12\\tperth\\t12\\tsaskatchewan\\t13\\tydney\\t2\\tnctures\\t1\\tottenham hotspur\\t1\\trainers\\t3\\tns\\t5\\t-\\t5\\tgender\\t3\\tvel\\t6\\t and hotels (category)\\t2\\teatment\\t3\\tnd\\t2\\tip\\t1\\tv\\t\\tuniversidad\\t8\\tty\\t\\tvacaciones\\t4\\tiones\\t4\\tnces\\t4\\ttion\\t2\\tpes\\t3\\ting\\t1\\teal\\t2\\tdella\\t2\\tg\\t3\\tan\\t3\\tetarian\\t1\\tiajar\\t4\\te\\t3\\ttge\\t4\\tjar\\t2\\tdeo\\t5\\t game\\t2\\tntage\\t1\\todka\\t\\twaste\\t2\\ttford fc\\t1\\tear\\t4\\table\\t2\\ted\\t2\\tllness\\t2\\tmbley\\t2\\tstend.timeout\\t1\\thiskey\\t5\\ty\\t1\\tildlife\\t3\\tliam and kate\\t2\\tnter\\t1\\tww.timeout.com/london/theatre/five-reasons-to-see-the-night-of-the-iguana\\t44\\twhy-you-need-to-see-rosmersholm\\t52\\tshould-book-tickets-to-the-invitation\\t31\\tthe-national-theatres-much-loved-production-of-peter-pan-is-back-this-summer\\t16\\tnewyork/theater/five-reasons-to-see-david-byrnes-american-utopia\\t45\\tyou-should-see-the-ferryman\\t32\\tthe-phantom-of-the-opera-19\\t34\\tree-unique-country-western-experiences-in-manhattan\\t26\\tings-to-do/looking-for-fashion-inspo-check-out-brooklyn-museums-latest-exhibition\\t37\\tways-and-places-to-cool-down-in-manhattan\\t\\txmas\\t\\tyoga\\t2\\tutube\\t\\tzoo\\t1\\tumo"),o=[["classifications_watson","taxonomy_labels"],["client","url"],["client","title"],["category","primary_category"],["category","page_tags"],["transaction","category"],["geo_info","country"],["page_city"],["event","eventType"],["campaign_id"],["geo_info","city"],["category","sub_category1"],["transaction","quantity"],["page_country"],["dest_url"],["basket","category"],["line_item_id"],["aggregations","PageviewEngagement","engaged_time"],["basket","total"],["event","name"]],i=[],a=[t.os(t.w,3,[330,599]),t.o([t.ref(16),t.ref(13)]),t.o([t.os(t.s,3,[109,171,185,201,259,403,568,572]),t.os(t.s,2,[84,114,170,189,200,202,215,217,258,313,337,395,402,409,490,514,517,560,566,567,575,603,650])]),t.os(t.s,14,[331,332,336]),t.o([t.ref(9),t.ref(24)]),t.bsc_(5,["dv7lKfLM"]),t.o([t.os(t.s,2,[335,556,557,566,567]),t.os(t.s,1,[556,557,566,567])]),t.o([t.os(t.cx,4,[361,206,360]),t.os(t.s,2,[206,245,262,373])]),t.os(t.s,1,[165,334,370,410,576,577,632]),t.o([t.y(3,572),t.os(t.s,2,[472,473,570])]),t.o([t.y(3,568),t.os(t.cx,4,[569,568])]),t.os(t.s,2,[191,354,460,461,462,469,495,565,636]),t.os(t.s,1,[76,77,80,119,207,237,285,323,329,598,602,607,608,609,617,618,619,620]),t.os(t.s,1,[72,105,108,111,133,172,182,184,195,196,200,203,233,242,244,246,255,258,270,275,276,296,310,346,364,369,397,398,411,439,481,485,524,573]),t.o([t.os(t.w,3,[171,259]),t.os(t.cx,4,[395,170,258,260]),t.os(t.s,2,[84,95,96,97,170,176,184,221,226,258,326,395,409,492,505,509,513,574,621]),t.os(t.s,1,[85,95,96,97,170,176,184,221,226,258,326,395,409,492,505,510,513,574,621])]),t.os(t.s,1,[223,267,481]),t.os(t.s,2,[72,105,108,110,133,172,184,195,196,200,203,233,242,244,246,255,258,270,275,276,296,309,346,364,369,397,398,411,439,481,485,524,571]),t.o([t.ref(2),t.ref(22)]),t.bsc_(5,["8zkJzdWw"]),t.os(t.s,2,[76,77,79,119,208,209,210,237,285,323,329,598,602,606,608,609,617,618,619,620]),t.os(t.s,1,[638,639,640,641,642,643,644,645,646,647]),t.bsc_(5,["YAmLW71C"]),t.os(t.s,1,[85,86,114,170,189,200,202,216,217,258,313,337,395,402,409,490,514,517,560,566,567,575,603,650]),t.bsc_(5,["W1qv5rni"]),t.os(t.s,1,[466,467,570])],c=[(e,n)=>t.q(t.acq(e,n)),e=>t.q(t.acq(t.cb(0,t.pge(12,1),t.ge(1),1),t.cb(0,t.ref(e),t.ge(1),1))),e=>t.q(t.acq(t.cb(0,t.pge(12,1),t.ge(1),1),t.cb(0,t.y(5,e),t.ge(1),1))),(e,n,r)=>t.q(t.acq(t.tw(n,r),e)),(e,n,r,o)=>t.q(t.acq(t.tw(t.cb(0,r,t.ge(1),1),e),t.tw(t.cb(0,o,t.ge(1),1),n))),(e,n)=>t.q(t.cb(e,n,t.ge(1),1)),e=>t.q(t.cb(0,e,t.ge(1),1)),(e,n)=>t.q(t.cb(0,t.os(t.s,e,n),t.ge(1),1)),(e,n,r)=>t.q(t.cb(0,t.o([e,n,r]),t.ge(1),1)),(e,n)=>t.q(t.cb(0,t.o([t.os(t.s,2,e),t.os(t.s,1,n)]),t.ge(1),1)),(e,n)=>t.q(t.cb(0,t.pge(e,n),t.ge(1),1)),e=>t.q(t.cb(0,t.ps(1,e),t.ge(1),1)),e=>t.q(t.cb(1,t.os(t.e,9,e),t.ge(1),1)),(e,n)=>t.q(t.cb(1,t.pe(e,n),t.ge(1),1)),(e,n,r,o,i)=>t.q(t.ocq(t.cb(e,t.os(n,r,o),t.ge(1),1),t.cb(0,t.ref(i),t.ge(1),1))),(e,n,r,o,i)=>t.q(t.ocq(t.cb(n,t.os(r,o,i),t.ge(1),1),t.cb(0,e,t.ge(1),1))),(e,n,r)=>t.q(t.ocq(t.cb(0,t.os(t.s,e,n),t.ge(1),1),t.cb(0,t.ps(1,r),t.ge(1),1))),(e,n)=>t.q(t.ocq(t.cb(0,t.bsc_(3,e),t.ge(1),1),t.cb(0,t.os(t.s,1,n),t.ge(1),1))),(e,n)=>t.q(t.ocq(t.cb(0,t.bsc_(8,e),t.ge(1),1),t.cb(0,t.ref(n),t.ge(1),1))),(e,n)=>t.q(t.ocq(t.cb(0,t.bsc_(8,e),t.ge(1),1),t.cb(0,t.y(5,n),t.ge(1),1))),(e,n,r,o,i,a,c)=>t.q(t.ocq(t.ocq(e,t.cb(o,i,a,c)),t.cb(0,t.os(t.s,n,r),t.ge(1),1))),(e,n,r,o,i)=>t.q(t.ocq(t.ocq(e,t.tw(t.cb(0,t.pc_(0,n),t.ge(i),3),2592e6)),t.tw(t.cb(0,t.pc_(r,o),t.ge(3),3),2592e6))),(e,n)=>t.q(t.ocq(t.ocq(e,t.tw(t.cb(0,t.pc_(0,49),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,n),t.ge(3),3),2592e6))),(e,n,r,o)=>t.q(t.ocq(t.ocq(r,o),t.cb(e,n,t.ge(1),1))),(e,n,r,o,i)=>t.q(t.ocq(t.ocq(o,i),t.itp(e,n,!1,r))),(e,n,r,o,i,a,c,u)=>t.q(t.ocq(t.ocq(o,t.tw(t.cb(i,a,c,u),2592e6)),t.tw(t.cb(0,e,t.ge(r),n),2592e6))),(e,n,r,o,i,a)=>t.q(t.ocq(t.ocq(i,a),t.tw(t.cb(0,n,t.ge(o),r),e))),(e,n,r,o,i)=>t.q(t.ocq(t.ocq(t.ocq(r,t.cb(0,t.os(t.s,o,i),t.ge(1),1)),t.cb(0,n,t.ge(1),1)),t.cb(0,t.os(t.s,1,e),t.ge(1),1))),(e,n,r,o,i,a,c)=>t.q(t.ocq(t.ocq(t.ocq(i,t.itp("eyeota",a,!1,c)),t.itp("eyeota",r,!1,o)),t.itp("eyeota",e,!1,n))),(e,n,r,o,i,a)=>t.q(t.ocq(t.ocq(t.itp("eyeota",i,!1,a),t.itp("eyeota",r,!1,o)),t.itp("eyeota",e,!1,n))),(e,n,r,o)=>t.q(t.ocq(t.itp("comscore",r,!1,o),t.itp("comscore",e,!1,n))),(e,n,r,o)=>t.q(t.ocq(t.itp("eyeota",r,!1,o),t.itp("eyeota",e,!1,n))),(e,n,r,o,i,a)=>t.q(t.ocq(t.tw(i,a),t.tw(t.cb(0,n,t.ge(o),r),e))),(e,n,r,o,i,a,c)=>t.q(t.ocq(t.tw(t.cb(o,i,t.ge(c),a),2592e6),t.tw(t.cb(0,e,t.ge(r),n),2592e6))),(e,n,r,o,i,a)=>t.q(t.ocq(t.tw(t.cb(0,e,t.ge(r),n),2592e6),t.tw(t.cb(0,t.os(o,i,a),t.ge(1),1),2592e6))),(e,n,r,o)=>t.q(t.ocq(t.tw(t.cb(0,t.os(t.s,r,o),t.ge(1),1),2592e6),t.tw(t.cb(0,t.os(t.s,e,n),t.ge(1),1),2592e6))),e=>t.q(t.ocq(t.tw(t.cb(0,t.pc_(0,e),t.ge(3),3),2592e6),t.tw(t.cb(0,t.pc_(0,50),t.ge(3),3),2592e6))),(e,n)=>t.q(t.ocq(t.tw(t.cb(0,t.pc_(0,n),t.ge(3),3),2592e6),t.tw(t.cb(0,t.pc_(0,e),t.ge(3),3),2592e6))),()=>t.q(t.ocq(t.tw(t.cb(0,t.pc_(0,8),t.ge(3),3),2592e6),t.tw(t.cb(0,t.pc_(0,11),t.ge(3),3),2592e6))),(e,n)=>t.q(t.sq(t.cb(0,t.t,e,n))),(e,n)=>t.q(t.sq(t.cb(0,t.t,t.e(n),e))),(e,n,r)=>t.q(t.scq(t.tw(t.cw(4,t.pg(17,n)),2592e6),t.vq(t.sw(5,t.t,["properties","engaged_time"],t.g(r))),t.ge(e))),(e,n,r,o)=>t.q(t.itp(e,n,r,o)),e=>t.q(t.itp("comscore","118997US",!1,e)),(e,n,r)=>t.q(t.tw(t.cb(e,t.os(t.s,n,r),t.ge(1),1),2592e6)),(e,n,r)=>t.q(t.tw(t.cb(e,t.t,t.ge(r),n),2592e6)),(e,n,r,o,i)=>t.q(t.tw(t.cb(n,r,t.ge(i),o),e)),(e,n,r)=>t.q(t.tw(t.cb(0,t.a([t.y(n,r),e]),t.ge(1),1),2592e6)),e=>t.q(t.tw(t.cb(0,t.a([t.y(6,e),t.y(13,64)]),t.ge(1),1),2592e6)),(e,n,r)=>t.q(t.tw(t.cb(0,t.os(e,n,r),t.ge(1),1),5184e6)),e=>t.q(t.tw(t.cb(0,t.ref(e),t.ge(2),2),12096e5)),e=>t.q(t.tw(t.cb(0,t.ref(e),t.ge(3),3),432e6)),(e,n,r)=>t.q(t.tw(t.cb(0,t.ref(r),t.ge(n),e),2592e6)),(e,n)=>t.q(t.tw(t.cb(0,t.bsc_(e,n),t.ge(1),1),2592e6)),(e,n,r,o)=>t.q(t.tw(t.cb(0,t.o([e,n,r,o]),t.ge(1),1),2592e6)),(e,n,r,o)=>t.q(t.tw(t.cb(0,t.o([e,t.os(n,r,o)]),t.ge(1),1),2592e6)),(e,n,r,o,i,a)=>t.q(t.tw(t.cb(0,t.o([e,t.os(o,i,a),n,r]),t.ge(1),1),2592e6)),(e,n,r,o,i,a,c,u,s,m)=>t.q(t.tw(t.cb(0,t.o([t.os(r,o,i),e,t.os(a,c,u),n,t.os(t.s,s,m)]),t.ge(1),1),2592e6)),(e,n,r,o,i)=>t.q(t.tw(t.cb(0,t.o([t.os(t.cx,4,r),t.os(t.s,e,n),t.os(t.s,2,o),t.os(t.s,1,i)]),t.ge(1),1),2592e6)),(e,n,r)=>t.q(t.tw(t.cb(0,t.o([t.os(t.cx,4,r),t.os(t.s,2,e),t.os(t.s,1,n)]),t.ge(1),1),2592e6)),(e,n,r)=>t.q(t.tw(t.cb(0,t.o([t.os(t.w,11,r),t.os(t.s,e,n)]),t.ge(1),1),2592e6)),(e,n)=>t.q(t.tw(t.cb(0,t.o([t.os(t.s,2,n),t.os(t.s,1,e)]),t.ge(1),1),2592e6)),(e,n,r)=>t.q(t.tw(t.cb(0,t.o([t.pc_(4,r),t.os(t.s,2,e),t.os(t.s,1,n)]),t.ge(1),1),2592e6)),(e,n,r)=>t.q(t.tw(t.cb(0,t.o([t.y(3,r),t.os(t.s,2,e),t.os(t.s,1,n)]),t.ge(1),1),2592e6)),(e,n,r,o)=>t.q(t.tw(t.cb(0,t.o([t.pe(r,o),t.os(t.s,2,e),t.os(t.s,1,n)]),t.ge(1),1),2592e6)),e=>t.q(t.tw(t.cb(0,t.pc_(0,e),t.ge(3),3),2592e6)),()=>t.q(t.tw(t.cb(0,t.pc_(0,16),t.ge(3),3),2592e6)),()=>t.q(t.tw(t.cb(0,t.pc_(0,37),t.ge(3),3),2592e6)),(e,n)=>t.q(t.tw(t.cb(0,t.ps(e,n),t.ge(1),1),2592e6))];return{rawQueries:{1e7:t.r(37,"/science","/education/graduate school"),10000001:t.r(65,"/automotive and vehicles"),10000002:t.r(37,3,1),10000003:t.r(37,"/finance",21),10000004:t.r(37,23,"/careers"),10000005:t.r(65,"/education"),10000006:t.r(21,t.tw(t.cb(0,t.pc_(0,25),t.ge(3),3),2592e6),42,0,"/society/social institution/marriage",3),10000007:t.r(21,t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.tw(t.cb(0,t.pc_(0,2),t.ge(3),3),2592e6),t.tw(t.cb(0,t.pc_(0,4),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,13),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,14),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,17),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,18),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,"/art and entertainment/visual art and design/art museums and galleries"),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,"/art and entertainment/visual art and design/arts education"),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,"/art and entertainment/visual art and design/performance art"),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,"/art and entertainment/visual art and design/restoration"),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,"/art and entertainment/visual art and design/sculpture"),t.ge(3),3),2592e6)),"/education/art history",0,35,3),10000008:t.r(21,t.tw(t.cb(0,t.pc_(0,"/business and industrial/food industry"),t.ge(3),3),2592e6),"/food and drink",0,"/food and drink/food and grocery retailers",3),10000010:t.r(37,34,31),10000011:t.r(65,"/hobbies and interests"),10000012:t.r(65,"/home and garden"),10000013:t.r(37,5,"/art and entertainment/movies"),10000014:t.r(65,"/art and entertainment/music"),10000015:t.r(21,t.ocq(t.ocq(t.ocq(t.ocq(t.tw(t.cb(0,t.pc_(0,"/business and industrial/business news"),t.ge(3),3),2592e6),t.tw(t.cb(0,t.pc_(0,27),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,"/law, govt and politics"),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,"/news"),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,41),t.ge(3),3),2592e6)),"/sports/sports news",0,"/technology and computing/tech news",3),10000016:t.r(21,t.tw(t.cb(0,t.pc_(0,"/finance/bank"),t.ge(3),3),2592e6),27,0,"/finance/personal finance",3),10000017:t.r(65,"/pets"),10000018:t.r(21,t.ocq(t.tw(t.cb(0,t.pc_(0,"/art and entertainment/celebrity fan and gossip"),t.ge(3),3),2592e6),t.tw(t.cb(0,t.pc_(0,10),t.ge(3),3),2592e6)),12,0,15,3),10000019:t.r(65,"/real estate"),10000020:t.r(65,"/shopping"),10000021:t.r(37,"/sports",34),10000022:t.r(37,"/style and fashion",22),10000023:t.r(21,t.tw(t.cb(0,t.pc_(0,"/business and industrial/automation"),t.ge(3),3),2592e6),"/science/computer science",0,"/technology and computing",3),10000024:t.r(21,t.ocq(t.tw(t.cb(0,t.pc_(0,"/art and entertainment/movies and tv/movies/reviews"),t.ge(3),3),2592e6),t.tw(t.cb(0,t.pc_(0,12),t.ge(3),3),2592e6)),"/art and entertainment/tv",0,50,3),10000025:t.r(65,"/travel"),10000026:t.r(37,"/technology and computing/consumer electronics/game systems and consoles","/hobbies and interests/games/video and computer games"),10000035:t.r(37,"/science/physics","/science/engineering"),10000036:t.r(65,"/automotive and vehicles/buying and selling cars"),10000037:t.r(65,"/automotive and vehicles/motor shows"),10000038:t.r(37,"/automotive and vehicles/electric vehicles","/automotive and vehicles/cars/hybrid"),10000039:t.r(65,20),10000040:t.r(65,"/automotive and vehicles/cars/performance vehicles"),10000041:t.r(37,"/art and entertainment/comics and animation/comics",3),10000042:t.r(65,"/business and industrial/business operations"),10000043:t.r(65,42),10000044:t.r(65,25),10000045:t.r(65,4),10000046:t.r(65,"/art and entertainment/visual art and design"),10000047:t.r(65,"/food and drink/beverages/alcoholic beverages"),10000048:t.r(65,"/food and drink/barbecues and grilling"),10000049:t.r(37,"/food and drink/food and grocery retailers/bakeries","/food and drink/desserts and baking"),10000050:t.r(37,"/food and drink/food/fast food",28),10000051:t.r(65,"/food and drink/food allergies"),10000052:t.r(21,t.ocq(t.tw(t.cb(0,t.pc_(0,29),t.ge(3),3),2592e6),t.tw(t.cb(0,t.pc_(0,30),t.ge(3),3),2592e6)),"/food and drink/health and lowfat cooking",0,31,3),10000053:t.r(65,33),10000054:t.r(37,"/health and fitness/sports medicine","/health and fitness/exercise"),10000055:t.r(65,"/health and fitness/men\'s health"),10000056:t.r(65,"/health and fitness/nutrition"),10000057:t.r(65,"/health and fitness/women\'s health"),10000058:t.r(67),10000059:t.r(65,"/art and entertainment/movies and tv/action"),10000060:t.r(65,6),10000061:t.r(65,7),10000062:t.r(65,"/art and entertainment/movies and tv/horror"),10000063:t.r(65,41),10000064:t.r(37,"/law, govt and politics/legal issues","/law, govt and politics/law enforcement"),10000065:t.r(65,"/news/national news"),10000066:t.r(37,"/law, govt and politics/politics","/law, govt and politics/government"),10000067:t.r(65,"/science/weather"),10000068:t.r(65,39),10000069:t.r(65,"/pets/cats"),10000070:t.r(65,"/pets/dogs"),10000071:t.r(65,40),10000072:t.r(65,"/pets/reptiles"),10000073:t.r(65,"/sports/football"),10000074:t.r(65,"/sports/baseball"),10000075:t.r(65,"/sports/basketball"),10000076:t.r(65,"/sports/bodybuilding"),10000077:t.r(65,"/sports/bowling"),10000078:t.r(65,"/sports/boxing"),10000079:t.r(65,"/sports/bicycling"),10000080:t.r(65,"/sports/fishing"),10000081:t.r(65,"/sports/golf"),10000082:t.r(65,"/sports/hunting and shooting"),10000083:t.r(65,"/sports/rugby"),10000084:t.r(65,47),10000085:t.r(65,"/sports/tennis"),10000086:t.r(65,"/sports/walking"),10000087:t.r(22,t.ocq(t.tw(t.cb(0,t.pc_(0,"/business and industrial/tanning"),t.ge(3),3),2592e6),t.tw(t.cb(0,t.pc_(0,"/style and fashion/beauty"),t.ge(3),3),2592e6)),"/style and fashion/beauty/cosmetology and beauty professionals"),10000088:t.r(37,"/style and fashion/body art","/style and fashion/beauty/tattoos"),10000089:t.r(65,"/style and fashion/men \'s fashion"),10000090:t.r(65,"/technology and computing/consumer electronics"),10000324:t.r(65,21),10000325:t.r(21,t.ocq(t.ocq(t.tw(t.cb(0,t.pc_(0,"/business and industrial/company/annual report"),t.ge(3),3),2592e6),t.tw(t.cb(0,t.pc_(0,"/business and industrial/company/bankruptcy"),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,"/business and industrial/company/earnings"),t.ge(3),3),2592e6)),"/business and industrial/company/joint venture",0,"/business and industrial/company/merger and acquisition",3),10000327:t.r(65,"/finance/personal finance/debt management"),10000328:t.r(65,"/finance/personal finance/insurance"),10000329:t.r(21,t.tw(t.cb(0,t.pc_(0,"/finance/accounting and auditing/billing and invoicing"),t.ge(3),3),2592e6),"/finance/accounting and auditing/bookkeeping",0,26,3),10000330:t.r(65,"/finance/investing"),10000687:t.r(65,"/science/social science"),10000688:t.r(65,24),10000689:t.r(37,"/automotive and vehicles/scooters and mopeds",20),10000690:t.r(21,t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.tw(t.cb(0,t.pc_(0,"/automotive and vehicles/vehicle brands/fiat"),t.ge(3),3),2592e6),t.tw(t.cb(0,t.pc_(0,"/automotive and vehicles/vehicle brands/ford"),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,"/automotive and vehicles/vehicle brands/honda"),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,"/automotive and vehicles/vehicle brands/hyundai"),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,"/automotive and vehicles/vehicle brands/nissan"),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,"/automotive and vehicles/vehicle brands/peugeot"),t.ge(3),3),2592e6)),"/automotive and vehicles/vehicle brands/subaru",0,"/automotive and vehicles/vehicle brands/suzuki",3),10000691:t.r(21,t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.tw(t.cb(0,t.pc_(0,19),t.ge(3),3),2592e6),t.tw(t.cb(0,t.pc_(0,"/automotive and vehicles/vehicle brands/audi"),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,"/automotive and vehicles/vehicle brands/bentley"),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,"/automotive and vehicles/vehicle brands/ferrari"),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,"/automotive and vehicles/vehicle brands/lamborghini"),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,"/automotive and vehicles/vehicle brands/land rover"),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,"/automotive and vehicles/vehicle brands/maserati"),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,"/automotive and vehicles/vehicle brands/mercedes-benz"),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,"/automotive and vehicles/vehicle brands/porsche"),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,"/automotive and vehicles/vehicle brands/rolls-royce"),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,"/automotive and vehicles/vehicle brands/toyota"),t.ge(3),3),2592e6)),"/automotive and vehicles/vehicle brands/volkswagen",0,"/automotive and vehicles/vehicle brands/volvo",3),10000692:t.r(65,"/automotive and vehicles/cars/coupe"),10000693:t.r(37,"/automotive and vehicles/auto repair","/automotive and vehicles/auto parts"),10000694:t.r(65,"/automotive and vehicles/cars"),10000695:t.r(65,"/automotive and vehicles/cars/sedan"),10000696:t.r(65,"/art and entertainment/books and literature/children\'s books"),10000697:t.r(65,2),10000698:t.r(37,"/careers/resume writing and advice","/careers/career advice"),10000699:t.r(65,"/careers/telecommuting"),10000700:t.r(65,"/careers/career planning"),10000701:t.r(37,"/careers/job search","/careers/job fairs"),10000702:t.r(65,23),10000703:t.r(65,"/education/distance learning"),10000704:t.r(65,"/education/special education"),10000705:t.r(37,24,1),10000706:t.r(21,t.tw(t.cb(0,t.pc_(0,"/education/homework and study tips"),t.ge(3),3),2592e6),"/education/teaching and classroom resources/lesson plans",0,"/education/teaching and classroom resources/school supplies",3),10000707:t.r(65,35),10000708:t.r(65,18),10000709:t.r(65,14),10000710:t.r(21,t.ocq(t.tw(t.cb(0,t.pc_(0,31),t.ge(3),3),2592e6),t.tw(t.cb(0,t.pc_(0,32),t.ge(3),3),2592e6)),33,0,"/pets/animal welfare",3),10000711:t.r(65,"/food and drink/beverages/non alcoholic beverages"),10000712:t.r(21,t.tw(t.cb(0,t.pc_(0,"/food and drink/kosher food"),t.ge(3),3),2592e6),32,0,33,3),10000713:t.r(65,"/food and drink/cuisines"),10000714:t.r(21,t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.tw(t.cb(0,t.pc_(0,"/food and drink/food/condiments and dressings"),t.ge(3),3),2592e6),t.tw(t.cb(0,t.pc_(0,"/food and drink/food/frozen food"),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,29),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,"/food and drink/food/grains and pasta"),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,"/food and drink/food/herbs and spices"),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,30),t.ge(3),3),2592e6)),"/food and drink/food/snack foods",0,"/food and drink/gastronomy/slow food",3),10000715:t.r(65,"/health and fitness/aging"),10000716:t.r(65,"/health and fitness/weight loss"),10000717:t.r(65,"/hobbies and interests/arts and crafts"),10000718:t.r(37,"/hobbies and interests/collecting/stamps and coins","/hobbies and interests/collecting"),10000719:t.r(65,"/hobbies and interests/games/board games and puzzles"),10000720:t.r(65,"/hobbies and interests/magic and illusion"),10000721:t.r(65,"/art and entertainment/music/musical instruments"),10000722:t.r(37,39,36),10000723:t.r(37,"/technology and computing/consumer electronics/radios","/art and entertainment/radio"),10000724:t.r(37,"/art and entertainment/books and literature/science fiction","/art and entertainment/books and literature/fan fiction"),10000725:t.r(65,"/home and garden/appliances"),10000726:t.r(65,38),10000727:t.r(21,t.ocq(t.ocq(t.ocq(t.tw(t.cb(0,t.pc_(0,"/art and entertainment/visual art and design/design/interior design"),t.ge(3),3),2592e6),t.tw(t.cb(0,t.pc_(0,"/art and entertainment/visual art and design/drawing"),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,"/art and entertainment/visual art and design/painting"),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,"/hobbies and interests/arts and crafts/woodworking"),t.ge(3),3),2592e6)),38,0,"/home and garden/remodeling and construction",3),10000728:t.r(67),10000729:t.r(21,t.ocq(t.ocq(t.tw(t.cb(0,t.pc_(0,"/home and garden/bed and bath/bathroom"),t.ge(3),3),2592e6),t.tw(t.cb(0,t.pc_(0,"/home and garden/bed and bath/bedroom"),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,"/home and garden/home furnishings"),t.ge(3),3),2592e6)),"/home and garden/home furnishings/lamps and lighting",0,"/home and garden/interior decorating",3),10000730:t.r(65,"/art and entertainment/movies and tv/independent"),10000731:t.r(65,9),10000732:t.r(65,"/art and entertainment/movies and tv/dramas"),10000733:t.r(65,11),10000734:t.r(38),10000735:t.r(66),10000736:t.r(66),10000737:t.r(65,"/art and entertainment/music/music genres/jazz"),10000738:t.r(65,13),10000739:t.r(65,"/art and entertainment/music/music genres/blues"),10000740:t.r(65,"/art and entertainment/music/music genres/country music"),10000741:t.r(65,"/art and entertainment/music/music genres/hip hop"),10000742:t.r(65,15),10000743:t.r(37,15,"/art and entertainment/music/music genres/electronic music"),10000744:t.r(21,t.tw(t.cb(0,t.pc_(0,13),t.ge(3),3),2592e6),14,0,17,3),10000745:t.r(65,"/news/local news"),10000746:t.r(65,"/news/international news"),10000747:t.r(65,"/finance/personal finance/financial planning/retirement and pension"),10000748:t.r(37,"/finance/personal finance/financial planning",26),10000749:t.r(37,45,44),10000750:t.r(65,"/pets/aquariums"),10000751:t.r(38),10000752:t.r(65,"/real estate/architects"),10000753:t.r(65,"/real estate/apartments"),10000754:t.r(21,t.ocq(t.tw(t.cb(0,t.pc_(0,"/business and industrial/agriculture and forestry"),t.ge(3),3),2592e6),t.tw(t.cb(0,t.pc_(0,"/business and industrial/agriculture and forestry/organic farming"),t.ge(3),3),2592e6)),36,0,40,3),10000755:t.r(65,"/real estate/buying and selling homes"),10000756:t.r(65,48),10000757:t.r(65,"/sports/water polo"),10000758:t.r(65,"/sports/table tennis and ping-pong"),10000759:t.r(65,"/sports/softball"),10000760:t.r(37,48,"/sports/volleyball"),10000761:t.r(65,46),10000762:t.r(65,"/sports/rowing"),10000763:t.r(65,"/sports/badminton"),10000764:t.r(65,"/sports/sailing"),10000765:t.r(21,t.tw(t.cb(0,t.pc_(0,44),t.ge(3),3),2592e6),45,0,"/sports/polo",3),10000766:t.r(65,"/sports/skating/figure skating"),10000767:t.r(65,"/sports/cheerleading"),10000768:t.r(65,"/sports/auto racing"),10000769:t.r(65,"/sports/weightlifting"),10000770:t.r(65,"/sports/gymnastics"),10000771:t.r(65,"/sports/swimming"),10000772:t.r(65,"/sports/running and jogging"),10000773:t.r(37,"/sports/hockey/field hockey","/sports/hockey"),10000774:t.r(65,43),10000775:t.r(21,t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.tw(t.cb(0,t.pc_(0,"/sports/bicycling/mountain biking"),t.ge(3),3),2592e6),t.tw(t.cb(0,t.pc_(0,"/sports/canoeing and kayaking"),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,"/sports/climbing"),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,43),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,"/sports/go kart"),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,"/sports/parachuting"),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,"/sports/scuba diving"),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,"/sports/skating"),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,47),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,"/sports/skiing/waterskiing"),t.ge(3),3),2592e6)),"/sports/snowboarding",0,"/sports/surfing and bodyboarding",3),10000776:t.r(65,"/sports/wrestling"),10000777:t.r(37,46,"/sports/olympics"),10000778:t.r(65,"/sports/martial arts"),10000779:t.r(65,"/sports/cricket"),10000780:t.r(65,"/sports/soccer"),10000781:t.r(21,t.ocq(t.ocq(t.ocq(t.ocq(t.tw(t.cb(0,t.pc_(0,"/art and entertainment/shows and events"),t.ge(3),3),2592e6),t.tw(t.cb(0,t.pc_(0,19),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,22),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,28),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,"/home and garden/luxury homes"),t.ge(3),3),2592e6)),"/style and fashion/fashion designers",0,"/style and fashion/luxury goods",3),10000782:t.r(65,"/style and fashion/beauty/hair care"),10000783:t.r(22,t.tw(t.cb(0,t.pc_(0,"/style and fashion/accessories"),t.ge(3),3),2592e6),"/style and fashion/jewelry"),10000784:t.r(65,"/style and fashion/clothing"),10000785:t.r(65,"/business and industrial/automation/robotics"),10000786:t.r(65,"/science/computer science/artificial intelligence"),10000787:t.r(36,9),10000788:t.r(36,10),10000789:t.r(36,8),10000790:t.r(36,5),10000791:t.r(36,6),10000792:t.r(36,7),10000793:t.r(65,"/travel/tourist destinations/seaside resort"),10000794:t.r(65,"/travel/tourist destinations/africa"),10000795:t.r(65,"/travel/tourist facilities/camping"),10000796:t.r(65,"/travel/tourist destinations/south america"),10000797:t.r(65,"/travel/transports/road travel/road accident"),10000798:t.r(65,"/travel/tourist destinations/japan"),10000799:t.r(65,"/travel/tourist destinations/australia and new zealand"),10000800:t.r(21,t.ocq(t.ocq(t.tw(t.cb(0,t.pc_(0,"/travel/tourist destinations/eastern europe"),t.ge(3),3),2592e6),t.tw(t.cb(0,t.pc_(0,"/travel/tourist destinations/europe"),t.ge(3),3),2592e6)),t.tw(t.cb(0,t.pc_(0,"/travel/tourist destinations/france"),t.ge(3),3),2592e6)),"/travel/tourist destinations/greece",0,"/travel/tourist destinations/italy",3),10000801:t.r(65,"/travel/specialty travel/adventure travel"),10000802:t.r(65,"/travel/business travel"),10000803:t.r(65,"/travel/traveling with kids"),10116:t.r(8,t.os(t.w,1,[266,254,"activitats-exterior","actividades-exterior","aire-libre","aire-lliure",297,298,"jardins","jardines",345,428,425,448,447,94,407,441,419,251,281,421,427,319,151,477,"Outdoors","Conservatory","Wildlife","Plants","Animals","Nature"]),t.os(t.cx,4,[421,"outdoor activities"]),t.os(t.s,2,["actividades exterior","activitats exterior","aire libre","aire lliure",94,"animals",151,"conservatory",251,254,266,281,297,298,319,345,407,"nature",419,421,425,427,428,441,447,448,"plants",477,635])),10179:t.r(24,"liveramp_Experian","1004602229","10179",t.ocq(t.ocq(t.ocq(t.itp("liveramp_Experian","1004602309",!1,"10179"),t.itp("liveramp_Experian","1004602309",!1,"10179")),t.itp("eyeota","6685",!1,"10179")),t.itp("liveramp_Experian","1004602299",!1,"10179")),t.itp("eyeota","6685",!1,"10179")),103289:t.r(7,1,["https://www.timeout.com/uk/travel/seven-must-do-experiences-in-san-diego","https://www.timeout.com/uk/travel/seven-must-have-experiences-in-los-angeles","https://www.timeout.com/uk/travel/why-san-francisco-should-be-at-the-top-of-your-2022-travel-list"]),10339:t.r(48,66),103566:t.r(13,9,2990142385),103641:t.r(6,t.bsc_(1,["HX3u1Gn2","d3bwDUEP"])),10428:t.r(40,2,1),10463:t.r(33,t.ref(8),1,1,2,t.os(t.s,14,[165,370,410,576,577,632]),1,1),10622:t.r(39,t.n(1),2),107543:t.q(t.tw(t.cb(0,t.o([t.os(t.w,3,[547,603,108,424,156,233,201,572,"clubs (category)","sex and dating (category)",363]),t.os(t.s,2,[125,224,255,283,325,342,359,362,"london culture",459,470,595]),t.os(t.s,1,[108,125,156,224,233,242,255,283,325,342,359,362,424,459,470,547,596,597,603])]),t.ge(1),1),2592e6)),10790:t.r(24,"comscore","121997US","10790",t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.itp("comscore","321997US",!1,"10790"),t.itp("eyeota","228",!1,"10790")),t.itp("eyeota","11209",!1,"10790")),t.itp("eyeota","35429",!1,"10790")),t.itp("eyeota","35453",!1,"10790")),t.itp("eyeota","6674",!1,"10790")),t.itp("eyeota","35441",!1,"10790")),t.itp("comscore","221997US",!1,"10790")),10854:t.r(43,"10854"),10855:t.r(30,"118246US","10855","218246US","10855"),10856:t.r(30,"125346US","10856","225346US","10856"),10857:t.r(30,"135546US","10857","235546US","10857"),10858:t.r(30,"145997US","10858","245997US","10858"),10859:t.r(30,"155997US","10859","255997US","10859"),10860:t.r(42,"eyeota","326",!1,"10860"),10861:t.r(42,"eyeota","327",!1,"10861"),10862:t.r(31,"246","10862","13003","10862"),10863:t.r(31,"248","10863","13000","10863"),10864:t.r(31,"245","10864","13004","10864"),10865:t.r(42,"eyeota","241",!1,"10865"),10866:t.r(42,"eyeota","238",!1,"10866"),10867:t.r(42,"eyeota","239",!1,"10867"),10868:t.r(42,"eyeota","240",!1,"10868"),10869:t.r(42,"eyeota","236",!1,"10869"),10870:t.r(42,"eyeota","237",!1,"10870"),109495:t.r(23,0,t.a([t.y(6,66),t.os(t.w,13,["BE","DK","CZ","AT","CH","GR","SE","TR","IE","IL","MY","HR","NL","DE","TH","IT","MX","FR","PT","JP",55,64])]),t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.cb(0,t.o([t.ref(0),t.os(t.cx,4,[323,598,286,329,"News: Transport & Travel",53,"Travel: Tourist Information Centre","Travel: Tourist information center","Travel: Airports","Travel",599]),t.ref(19),t.ref(12)]),t.ge(1),1),t.itp("liveramp_Stirista","1000047604",!1,"109495")),t.itp("liveramp_Stirista","1000982109",!1,"109495")),t.itp("liveramp_ShareThis","1001326799",!1,"109495")),t.itp("liveramp_ShareThis","1002248376",!1,"109495")),t.itp("liveramp_ShareThis","1005133459",!1,"109495")),t.itp("eyeota","1539",!1,"109495")),110608:t.r(3,t.ocq(t.itp("eyeota","1480",!1,"110608"),t.itp("liveramp_ShareThis","1006582381",!1,"110608")),t.cb(0,t.t,t.ge(1),1),2592e6),110776:t.r(24,"liveramp_ShareThis","1001290559","110776",t.ocq(t.ocq(t.ocq(t.cb(0,t.os(t.s,2,[438]),t.ge(1),1),t.cb(0,t.os(t.s,19,[438]),t.ge(1),1)),t.itp("liveramp_ShareThis","1005134099",!1,"110776")),t.itp("liveramp_Experian","1004268339",!1,"110776")),t.itp("liveramp_ShareThis","1001011839",!1,"110776")),11122:t.r(9,[136,142,150,225,291,312,"jack daniel",344,"jim beam",374,375,376,"markers-mark",392,393,512,633,634],[136,142,150,225,291,312,"jack-daniel",344,"jim-beam",374,375,376,"makers-mark",392,393,512,633,634]),114753:t.r(13,9,3042994454),114754:t.r(12,[2860390480,3046207663,3007634624]),114755:t.r(12,[3035051736,2873894365,2740320237,2966261973,3042994454,2860390480,3046207663,3007634624]),119318:t.r(46,1728e5,0,t.os(t.s,1,["bouquet","floral","florist","flower"]),1,1),121925:t.r(5,3,t.os(t.e,["advertiser_id"],[56187412,5176784792,5092024314,4412996097,56228212,56473132,5024446736,48700612])),12381:t.r(43,"12381"),12475:t.q(t.ocq(t.tw(t.cb(0,t.os(t.s,2,["crulla",255,"primavera sound","snar"]),t.ge(1),1),2592e6),t.tw(t.cb(0,t.pc_(4,257),t.ge(1),1),2592e6))),12668:t.r(61,[107,174,"corporate-responsib",234,247,422,426,475,476,478,479,480,484,515,516,551,"vintage-clothes","vintageclothes",625,635],[107,174,"corporate responsib",234,247,422,426,475,476,478,479,480,484,515,516,551,"vintage clothes",625,635]),127958:t.r(13,9,3039454777),128331:t.r(13,9,3056001745),128826:t.r(4,72576e5,72576e5,t.z(6,65),t.y(6,65)),130054:t.r(68,2,230),130057:t.r(44,0,2,[230,"glasgow","scotland"]),130832:t.r(44,0,1,["https://www.timeout.com/amsterdam/bars/best-bars-in-amsterdam","https://www.timeout.com/amsterdam/restaurants/best-brunch-in-amsterdam","https://www.timeout.com/amsterdam/restaurants/best-coffeeshops-in-amsterdam","https://www.timeout.com/amsterdam/restaurants/best-restaurants-in-amsterdam","https://www.timeout.com/amsterdam/things-to-do/best-clubs-in-amsterdam","https://www.timeout.com/amsterdam/things-to-do/best-things-to-do-in-amsterdam","https://www.timeout.com/athens/restaurants/best-restaurants-in-athens","https://www.timeout.com/athens/things-to-do/best-things-to-do-in-athens","https://www.timeout.com/bali/things-to-do/best-things-to-do-in-bali","https://www.timeout.com/berlin/restaurants/best-restaurants-in-berlin","https://www.timeout.com/berlin/things-to-do/best-art-museums-and-galleries-in-berlin","https://www.timeout.com/berlin/things-to-do/best-clubs-in-berlin","https://www.timeout.com/berlin/things-to-do/best-things-to-do-in-berlin","https://www.timeout.com/budapest/things-to-do/best-things-to-do-in-budapest","https://www.timeout.com/busan/things-to-do/best-things-to-do-in-busan","https://www.timeout.com/cape-town/things-to-do/best-things-to-do-in-cape-town","https://www.timeout.com/copenhagen/restaurants/best-restaurants-in-copenhagen","https://www.timeout.com/copenhagen/things-to-do/best-things-to-do-in-copenhagen","https://www.timeout.com/delhi/restaurants/best-restaurants-in-delhi","https://www.timeout.com/dublin/restaurants/best-restaurants-in-dublin","https://www.timeout.com/dublin/things-to-do/best-things-to-do-in-dublin","https://www.timeout.com/florence/restaurants/best-florence-restaurants","https://www.timeout.com/florence/things-to-do/best-things-to-do-in-florence","https://www.timeout.com/marrakech/restaurants/best-restaurants-in-marrakech","https://www.timeout.com/marrakech/things-to-do/best-things-to-do-in-marrakech","https://www.timeout.com/milan/restaurants/best-restaurants-in-milan","https://www.timeout.com/milan/things-to-do/best-things-to-do-in-milan","https://www.timeout.com/munich/restaurants/best-restaurants-in-munich","https://www.timeout.com/munich/things-to-do/best-things-to-do-in-munich","https://www.timeout.com/prague/restaurants/best-restaurants-in-prague","https://www.timeout.com/prague/things-to-do/best-things-to-do-in-prague","https://www.timeout.com/rome/restaurants/best-pizza-in-rome","https://www.timeout.com/rome/restaurants/best-restaurants-in-rome","https://www.timeout.com/rome/things-to-do/best-shopping-in-rome","https://www.timeout.com/rome/things-to-do/best-things-to-do-in-rome","https://www.timeout.com/seoul/en/things-to-do/best-things-to-do-in-seoul","https://www.timeout.com/stockholm/restaurants/best-restaurants-in-stockholm","https://www.timeout.com/stockholm/things-to-do/best-things-to-do-in-stockholm","https://www.timeout.com/things-to-do/best-cities-in-the-world","https://www.timeout.com/travel/best-places-to-see-the-northern-lights-aurora","https://www.timeout.com/travel/best-places-to-travel-alone","https://www.timeout.com/venice/restaurants/best-restaurants-in-venice","https://www.timeout.com/vienna/restaurants/best-cafes-in-vienna","https://www.timeout.com/vienna/restaurants/best-restaurants-in-vienna","https://www.timeout.com/vienna/things-to-do/best-things-to-do-in-vienna"]),13108:t.q(t.ocq(t.ocq(t.ocq(t.cb(0,t.ps(2,"first-time buyer"),t.ge(1),1),t.cb(0,t.ps(2,"shared ownership"),t.ge(1),1)),t.cb(0,t.ps(2,"Help to Buy"),t.ge(1),1)),t.itp("eyeota","6692",!1,"13108"))),13183:t.q(t.cb(0,t.o([t.pe(11,"classical-and-opera"),t.ps(1,"classical-music")]),t.ge(1),1)),13444:t.r(45,3,1,1),13445:t.r(45,0,5,5),13446:t.r(39,t.ge(3),3),13520:t.r(44,0,1,["benestar","bienestar",314,"salud","salut","well-being","wellbeing",630]),135588:t.r(13,9,3098744322),13640:t.r(60,1,["cafe","coffee"],["restaurants (blog posts)","cafs","restaurants (bars)","coffee shops","coffeeshops","caf bars"]),13769:t.r(29,"6699","13769","6700","13769","12220","13769"),138028:t.r(50,1),138029:t.r(51,1),138030:t.r(50,4),138031:t.r(51,4),138032:t.r(68,1,"search#/?viewstate=list&categories=node-7083"),138040:t.r(50,17),138041:t.r(51,17),13825:t.r(31,"6672","13825","225","13825"),13826:t.r(31,"6675","13826","229","13826"),13827:t.r(31,"6676","13827","230","13827"),13828:t.r(31,"6677","13828","232","13828"),13829:t.r(31,"6678","13829","234","13829"),13830:t.r(31,"6679","13830","235","13830"),13831:t.r(31,"6681","13831","243","13831"),13852:t.r(16,2,[418,"we work","we-work","wework"],"timeout.com/london/get-listed-add-venue"),13855:t.r(45,0,3,3),13856:t.r(45,0,8,8),13857:t.r(45,0,10,10),139146:t.r(68,1,"timeout.com/london/hilton-competition/pet-aways"),139331:t.r(47,t.ps(1,587),6,65),139702:t.r(53,3,["KKi7Gkrq","NVnXrM8A","VGnH2Lg7","eFNi4zMf"]),141239:t.r(68,1,"timeout.com/brighton"),141505:t.r(44,0,2,["immersive","interactive play","interactive shows","interactive threatre"]),141823:t.r(35,2,["africa",87,"asia","long haul","long-haul","middle east","middle-east"],1,["timeout.com/acapulco","timeout.com/addison",579,"timeout.com/africa","timeout.com/alabama","timeout.com/alaska","timeout.com/alberta","timeout.com/albuquerque","timeout.com/alice","timeout.com/anaheim","timeout.com/anchorage","timeout.com/ann-arbor","timeout.com/annapolis","timeout.com/argentina","timeout.com/arizona","timeout.com/arkansas","timeout.com/aruba","timeout.com/asheville","timeout.com/asia","timeout.com/atlanta","timeout.com/atlantic-city","timeout.com/auckland","timeout.com/austin",580,"timeout.com/bahamas","timeout.com/bali","timeout.com/baltimore","timeout.com/banff","timeout.com/bangalore","timeout.com/barbados","timeout.com/baton-rouge","timeout.com/belize","timeout.com/bellevue","timeout.com/berkeley","timeout.com/bermuda","timeout.com/bethesda","timeout.com/big-bear","timeout.com/big-island","timeout.com/bogota","timeout.com/boise","timeout.com/boracay","timeout.com/boston","timeout.com/boulder","timeout.com/brazil",581,"timeout.com/british-columbia","timeout.com/buenos-aires","timeout.com/buffalo","timeout.com/burlington","timeout.com/busan","timeout.com/byron-bay","timeout.com/cabo-san-lucas","timeout.com/cairns","timeout.com/calgary","timeout.com/california","timeout.com/cambodia",582,"timeout.com/canberra","timeout.com/cancun","timeout.com/cape-cod","timeout.com/cape-may","timeout.com/cape-town","timeout.com/caribbean","timeout.com/carmel-by-the-sea","timeout.com/cebu","timeout.com/central-america","timeout.com/charleston","timeout.com/charlotte","timeout.com/chattanooga","timeout.com/chennai","timeout.com/chiang-mai","timeout.com/chicago","timeout.com/china","timeout.com/christchurch","timeout.com/cincinnati","timeout.com/clearwater","timeout.com/cleveland","timeout.com/cocoa-beach","timeout.com/colombia","timeout.com/colombo","timeout.com/colorado","timeout.com/connecticut","timeout.com/corpus-christi","timeout.com/costa-rica","timeout.com/cozumel","timeout.com/cuba","timeout.com/da-nang","timeout.com/dallas",583,"timeout.com/daytona-beach","timeout.com/delaware","timeout.com/delhi","timeout.com/denver","timeout.com/des-moines","timeout.com/destin","timeout.com/detroit","timeout.com/dominican-republic","timeout.com/durban","timeout.com/easton","timeout.com/edmonton","timeout.com/el-paso","timeout.com/ensenada","timeout.com/estes-park","timeout.com/evanston","timeout.com/fiji","timeout.com/flagstaff","timeout.com/flores","timeout.com/florida","timeout.com/fort-collins","timeout.com/fort-lauderdale","timeout.com/fort-myers","timeout.com/fort-worth","timeout.com/galveston","timeout.com/gatlinburg","timeout.com/georgia","timeout.com/gisborne","timeout.com/goa",584,"timeout.com/grand-rapids","timeout.com/gulf-shores","timeout.com/half-moon-bay","timeout.com/halifax","timeout.com/hamilton","timeout.com/hanoi","timeout.com/havana","timeout.com/hawaii","timeout.com/hilton-head-island","timeout.com/hoboken","timeout.com/hoi-an","timeout.com/hong-kong","timeout.com/honolulu","timeout.com/houston","timeout.com/idaho","timeout.com/illinois",585,"timeout.com/indonesia","timeout.com/iowa","timeout.com/jacksonville","timeout.com/jaipur","timeout.com/jakarta","timeout.com/jamaica","timeout.com/japan","timeout.com/jasper","timeout.com/jersey-city","timeout.com/johannesburg","timeout.com/joshua-tree","timeout.com/kansas-city","timeout.com/kauai","timeout.com/kelowna","timeout.com/kentucky","timeout.com/key-largo","timeout.com/key-west","timeout.com/kingston","timeout.com/knoxville","timeout.com/koh-samui","timeout.com/krabi","timeout.com/kuala-lumpur","timeout.com/laguna-beach","timeout.com/lake-george","timeout.com/langkawi","timeout.com/las-vegas","timeout.com/launceston","timeout.com/little-rock","timeout.com/long-island","timeout.com/los-angeles","timeout.com/louisiana","timeout.com/louisville","timeout.com/macau","timeout.com/madison","timeout.com/maine","timeout.com/malaysia","timeout.com/maldives","timeout.com/manali","timeout.com/manila","timeout.com/manitoba","timeout.com/marrakech","timeout.com/marthas-vineyard","timeout.com/maryland","timeout.com/massachusetts","timeout.com/maui","timeout.com/mauritius",586,"timeout.com/memphis","timeout.com/mexico-country","timeout.com/miami","timeout.com/michigan","timeout.com/middle-east","timeout.com/milwaukee","timeout.com/minneapolis","timeout.com/minnesota","timeout.com/mississauga","timeout.com/mississippi","timeout.com/missouri","timeout.com/montana","timeout.com/monterey","timeout.com/montreal","timeout.com/morocco","timeout.com/mumbai","timeout.com/myrtle-beach","timeout.com/napa","timeout.com/naperville","timeout.com/nashville","timeout.com/national-harbor","timeout.com/nebraska","timeout.com/nevada","timeout.com/new-hampshire","timeout.com/new-jersey","timeout.com/new-mexico","timeout.com/new-orleans","timeout.com/new-york-kids","timeout.com/new-york-state","timeout.com/new-zealand","timeout.com/newport",587,"timeout.com/niagara-falls-canada","timeout.com/niagara-falls-ny","timeout.com/niagara-on-the-lake","timeout.com/noosa","timeout.com/north-america","timeout.com/north-carolina","timeout.com/nova-scotia","timeout.com/nusa-dua","timeout.com/oahu","timeout.com/oakland","timeout.com/oaxaca","timeout.com/ocean-city","timeout.com/ohio","timeout.com/ojai","timeout.com/okeechobee","timeout.com/oklahoma","timeout.com/olympia","timeout.com/omaha",588,"timeout.com/oregon","timeout.com/orlando","timeout.com/osaka","timeout.com/ottawa","timeout.com/outer-banks","timeout.com/palm-springs","timeout.com/palo-alto","timeout.com/panama","timeout.com/park-city","timeout.com/pattaya","timeout.com/penang","timeout.com/pennsylvania","timeout.com/pensacola",589,"timeout.com/peru","timeout.com/philadelphia","timeout.com/philippines","timeout.com/phoenix","timeout.com/phuket","timeout.com/pigeon-forge","timeout.com/pismo-beach","timeout.com/pittsburgh","timeout.com/playa-del-carmen","timeout.com/pondicherry","timeout.com/portland","timeout.com/pretoria","timeout.com/providence","timeout.com/puerto-rico","timeout.com/puerto-vallarta","timeout.com/pune","timeout.com/punta-cana","timeout.com/quebec","timeout.com/queenstown","timeout.com/raleigh","timeout.com/red-bank","timeout.com/reno","timeout.com/rhode-island","timeout.com/richmond","timeout.com/rio-de-janeiro","timeout.com/riviera-maya","timeout.com/rosemont","timeout.com/rotorua","timeout.com/sacramento","timeout.com/salt-lake-city","timeout.com/san-antonio","timeout.com/san-diego","timeout.com/san-francisco","timeout.com/san-jose","timeout.com/san-juan","timeout.com/san-luis-obispo","timeout.com/santa-barbara","timeout.com/santa-catalina-island","timeout.com/santa-cruz","timeout.com/santa-fe","timeout.com/santa-ynez-valley","timeout.com/sao-paulo","timeout.com/sarasota",590,"timeout.com/saskatoon","timeout.com/savannah","timeout.com/schaumburg","timeout.com/scottsdale","timeout.com/seattle","timeout.com/sedona","timeout.com/seminyak","timeout.com/seoul","timeout.com/seychelles","timeout.com/shenzhen","timeout.com/shimla","timeout.com/siem-reap","timeout.com/singapore","timeout.com/sonoma","timeout.com/south-africa","timeout.com/south-america","timeout.com/south-carolina","timeout.com/south-dakota","timeout.com/south-korea","timeout.com/south-lake-tahoe","timeout.com/south-pacific","timeout.com/south-padre-island","timeout.com/southeast-asia","timeout.com/spokane","timeout.com/st-augustine","timeout.com/st-louis","timeout.com/st-lucia","timeout.com/st-paul","timeout.com/subic","timeout.com/sunshine-coast",591,"timeout.com/tacoma","timeout.com/tagaytay","timeout.com/taipei","timeout.com/taiwan","timeout.com/tallahassee","timeout.com/tampa","timeout.com/taos","timeout.com/tasmania","timeout.com/taupo","timeout.com/tempe","timeout.com/tennessee","timeout.com/texas","timeout.com/thailand","timeout.com/toronto","timeout.com/traverse-city","timeout.com/tucson","timeout.com/tulsa","timeout.com/tulum","timeout.com/twentynine-palms","timeout.com/ubud","timeout.com/udaipur","timeout.com/usa","timeout.com/utah","timeout.com/vancouver","timeout.com/vermont","timeout.com/victoria","timeout.com/vietnam","timeout.com/virginia","timeout.com/waco","timeout.com/washington","timeout.com/wellington","timeout.com/west-palm-beach","timeout.com/west-virginia","timeout.com/whistler","timeout.com/winnipeg","timeout.com/wisconsin"]),141910:t.r(44,0,1,[267,481]),141912:t.r(50,15),142486:t.r(25,t.a([t.os(t.w,3,[599,330,572]),t.bsc_(7,["+gdUuYYf","1+BFO7Sv","Cedb6ITx","Hjd6QTEe","IjkK0Rwy","Lc4oPg4m","NJcbj7Ec","Pd33/rFr","TFfwyI2Y","W3BG8lUR","doaFylgq","et7g6e2R","hIZS7jmA","l2kSHxD3","ldqIjol3","lj3SEMyT","ltCqcPoC","mQ9rXyFw","pww7zx2H","qlbgYzt3"])]),1,1,t.tw(t.cb(0,t.a([t.y(3,572),t.os(t.w,7,[58,51])]),t.ge(1),1),2592e6),0,t.a([t.os(t.w,3,[109,401,330,599]),t.bsc_(7,["+gdUuYYf","1+BFO7Sv","Cedb6ITx","EipBfm3O","Hjd6QTEe","IjkK0Rwy","Lc4oPg4m","NJcbj7Ec","Pd33/rFr","TFfwyI2Y","V2NH7IJv","W3BG8lUR","YxoAPRtc","doaFylgq","eiGRlko9","et7g6e2R","hIZS7jmA","l2kSHxD3","ldqIjol3","lj3SEMyT","ltCqcPoC","mQ9rXyFw","pww7zx2H","qlbgYzt3"])]),t.ge(1),1),142561:t.r(44,0,2,[249,309]),142764:t.r(3,t.cb(0,t.os(t.w,7,[51,58]),t.ge(1),1),t.cb(0,t.o([t.os(t.cx,4,["Categories: Museums","Museos y centros culturales","Museos e instituciones","Museums","Museums: Childhood"]),t.os(t.s,2,["aprendizaje","clases","class","educacin",231,238,358,"museos",399,508,604,605]),t.os(t.s,1,["colegio","educacion",231,238,358,508,604,605])]),t.ge(1),1),2592e6),14282:t.r(29,"35390","14282","35388","14282","35391","14282"),143231:t.r(51,15),143570:t.q(t.ocq(t.ocq(t.itp("liveramp_Experian","1004263259",!1,"143570"),t.itp("liveramp_Bombora","1000883999",!1,"143570")),t.itp("eyeota","1645",!1,"143570"))),14371:t.q(t.ocq(t.itp("eyeota","6673",!1,"14371"),t.itp("comscore","318997US",!1,"14371"))),144047:t.r(26,12096e5,t.ref(20),2,2,t.ocq(t.tw(t.cb(0,t.ref(6),t.ge(2),2),12096e5),t.tw(t.cb(0,t.ref(10),t.ge(2),2),12096e5)),t.tw(t.cb(2,t.ref(3),t.ge(2),2),12096e5)),144062:t.r(68,2,"brixton"),14577:t.r(60,2,["cookery class",267],[267,"food & drink events"]),146711:t.r(28,"35434","146711","235","146711",t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.itp("eyeota","232",!1,"146711"),t.itp("eyeota","6677",!1,"146711")),t.itp("eyeota","35457",!1,"146711")),t.itp("comscore","345997US",!1,"146711")),t.itp("eyeota","6678",!1,"146711")),t.itp("eyeota","35433",!1,"146711")),"234","146711"),146858:t.r(44,0,2,["clubbing","clubs",218,411,"party","rave"]),146861:t.r(44,0,2,["beer garden","cooking class","drink class","drink making","drink-making","roof-top bar","rooftop bar"]),147055:t.r(44,0,1,["filip","philipp"]),147455:t.r(44,0,2,[179]),14748:t.r(42,"eyeota","6680",!1,"14748"),147871:t.r(13,9,3177189724),14808:t.r(62,[0,123,127,128,129,130,153,154,175,197,243,264,304,314,318,328,353,378,434,435,443,494,496,497,499,534,535,536,539,548,553,649],[0,123,127,128,129,135,153,154,175,197,243,264,304,318,328,353,378,434,435,443,494,496,497,499,534,535,536,539,548,553,649],540),14812:t.r(62,[78,82,"alcohol-free",83,112,147,148,"comer sano","comida sana",198,199,212,292,293,299,314,351,371,372,"menjar sa",389,415,463,471,500,"sense gluten","sense lactosa","sin gluten","sin lactosa",526,"suc",550,615,616,652],[78,82,"alochol-free",83,112,147,148,"comida-sana",198,199,212,292,293,299,314,351,371,372,"menjar-sa",389,415,463,471,500,"sano","sin-gluten","sin-lactosa",526,550,615,616,652],314),14816:t.r(4,2592e6,2592e6,t.o([t.pc_(4,540),t.os(t.s,2,[0,123,127,128,129,130,153,154,175,194,197,235,243,264,304,314,318,328,353,378,434,435,443,494,497,499,534,535,536,539,548,553,649]),t.os(t.s,1,[0,123,127,128,129,135,153,154,175,194,197,235,243,264,304,318,328,353,378,434,435,443,494,497,499,534,535,536,539,548,553,649])]),t.o([t.pc_(4,314),t.os(t.s,2,[112,148,198,199,212,292,293,299,314,351,463,471,500,526,550,615,616]),t.os(t.s,1,[112,148,198,199,212,292,293,299,314,351,463,471,500,526,550,615,616])])),148197:t.r(46,290304e5,0,t.ref(11),1,1),14823:t.r(61,["-gin","-rum",70,71,81,138,179,180,"gin-",290,343,"jim-bean",348,365,366,367,368,491,493,"rum-",501,507,512,537,561,624,633,634],[70,71,81,138,179,180,290,343,"jim bean",348,365,366,367,368,491,493,"rum",501,507,512,537,561,624,633,634]),14830:t.r(57,t.ps(3,522),t.os(t.s,2,[73,74,99,103,134,137,158,"century 21",161,177,214,252,"forever 21",269,302,305,316,347,390,413,454,458,483,498,519,528,549,594,601,623,627]),t.cx,4,[523,522,521],t.s,11,["style & shopping (blog posts)","vintage shops"],1,["/h-m",73,74,99,103,134,137,158,"century-21",161,177,214,252,"forever-21",269,302,305,316,347,390,413,454,"popup",458,483,498,519,528,549,594,601,623,627]),14831:t.r(54,t.pc_(4,598),t.ps(3,599),t.os(t.s,2,[69,75,"bnb",265,285,323,329,"last minute","long weekend",598,602,"weekend break"]),t.os(t.s,1,[69,75,265,285,329,"long-weekend","longweekend",598,602,"weekend-break","weekendbreak"])),14848:t.r(63,[84,170,217,258,313,337,395,409,490,514,517,560,603,650],[85,86,170,216,217,258,313,337,395,409,490,514,517,560,603,650],259),14851:t.r(56,t.pc_(4,401),t.os(t.s,2,[244,276,399]),t.os(t.s,1,[244,276,399]),t.s,3,[106,399]),14853:t.r(64,[124,167,229,382,440,489,511,533,559],[124,167,229,382,440,489,511,533,559],11,"science & technology"),148572:t.r(11,"https://www.timeout.com/london/keep-the-change"),14858:t.r(61,[132,145,"checkout",204,261,417,429,575],[132,145,204,261,417,429,575]),148689:t.r(68,1,"checkout.timeout.com/london"),148896:t.r(52,2,2,11),14919:t.r(34,t.o([t.pe(11,"breweries"),t.os(t.s,2,[92,122,139,"bud light",140,141,163,164,190,"cruzcampo","estrella","guiness",317,355,"mahou","pale ale","san miguel",546]),t.os(t.s,1,[92,122,139,"bud-light",140,141,163,164,190,303,317,355,"pale-ale","paleale",546])]),1,1,t.s,1,["www.timeout.com/melbourne/bars/world-square-presents-the-time-out-hop-up","www.timeout.com/sydney/bars/little-creatures-live-at-the-time-out-hop-up","www.timeout.com/sydney/things-to-do/world-square-presents-the-time-out-hop-up"]),14921:t.r(52,1,1,17),14922:t.r(64,[93,157,193,222,250,282,284,294,295,308,327,380,391,433,436,442,474,518,527,651],[93,157,193,222,250,282,284,294,295,308,327,380,391,433,436,442,474,518,527,651],3,"pets (category)"),14923:t.r(63,[183,184,273,320,338,339,340,341,350,357,503,"stand up",543,544],[183,184,273,320,338,339,340,341,350,357,503,543,544],185),150934:t.q(t.tw(t.cb(0,t.o([t.os(t.w,7,[62,51]),t.y(13,55),t.os(t.s,2,["alicante","barcelona","benalmadena","benidorm","bilbao","canary islands","girona","granada","ibiza","madrid","malaga","milan","seville","valencia"])]),t.ge(1),1),5184e6)),150976:t.r(32,7776e6,t.os(t.s,2,[87,"biden","boston","brazil","california","chicago","clinton","florida","los angeles","mexican","mexico","miami","new york","obama","orlando","route 66","san fran","texas","the us","trump","united states","us of a","usa","washington"]),1,1,t.cb(0,t.bsc_(7,["Cedb6ITx","Hjd6QTEe","ITNEec5L","NJcbj7Ec","Pd33/rFr","QSWg3Cid","WW0xF5GS","WXu83AJj","doaFylgq","ltCqcPoC","pww7zx2H"]),t.ge(1),1),7776e6),150978:t.r(46,7776e6,0,t.o([t.os(t.w,2,["china","korean","korea","Indonesia","Hong Kong","tokyo","japan","new delhi","nepal","nepa","laos","maldives","philippines","myanmar","burma","cambodia","vietnam","Malaysia","golden coast","Byron Bay","new south wales","sri lanka","indian","new zealand","johannesburg","cape town",468,394,"marrakech","wellington","christchurch","queenstown","auckland","phuket","Chiang Mai","perth","Melbourne","sydney","Brisbane","Bangalore","Goa","Delhi","Mumbai","Pakistan","Singapore","Morocco",52,"NewZealand","South Africa","Thailand","India","Australia","singapore","india","australia"]),t.os(t.w,7,["Croatia","Bangkok","Tokyo",67,59]),t.os(t.s,1,[579,580,581,582,583,584,585,586,"timeout.com/pakistan",589,591])]),1,1),151041:t.q(t.tw(t.cb(0,t.o([t.os(t.w,2,["saskatchewan","nova scotia","manitoba","british columbia","alberta","ontario",468,394,52]),t.os(t.w,7,[67,59]),t.os(t.s,1,["https://www.timeout.com/alberta","https://www.timeout.com/british-columbia","https://www.timeout.com/manitoba","https://www.timeout.com/nova-scotia","https://www.timeout.com/quebec",582,588,590])]),t.ge(1),1),2592e6)),153448:t.q(t.ocq(t.ocq(t.ocq(t.tw(t.cb(0,t.bsc_(1,["BPngdt7Q","s1QOBb0I"]),t.ge(1),1),2592e6),t.cb(1,t.pe(16,6302093499),t.ge(1),1)),t.cb(3,t.pe(16,6302093499),t.ge(1),1)),t.cb(3,t.os(t.e,["creative_id"],[138433210932,138433940221,138433193597,138433193582,138433193570,138433940203,138433940212,138433210935,138433193594,138433193567,138433193555,138433940206,138433193606,138433193591,138433193579,138433193552,138433940215,138433193603,138433193576,138433193564,138433940200,138433940209,138433193600,138433193588,138433193561,138433193549,138433940218,138433193585,138433193573,138433193558,138433193546]),t.ge(1),1))),153449:t.r(53,1,["/yF4mahI","0QCdy4MG","2Nxx/lIt","3w2mnYTC","4sZJ7jtH","5HPxFUg5","61KS4+xA","8wX8X4vQ","Ctx2bABN","D3lxY8V4","IrN5r9Vy","JJAt2Py1","Ji6GGvI4","KxTxlN5w","LssU1YcR","MjuS6HI8","PcfXf7bm","Q8iT9qHV","SlFxbpNf","UbImoWps","VoqnnDO5","ZZb8z2T4","cOpPfYDh","d9JA9HcZ","gDtegPQY","hPi7LSGr","kTk2DbjI","lV05xPIc","oMaJO67R","p+yo8L2R","pQR5G7iV","qOLqOzsF","qufdmD7B","r0PG82g6","ukbsOCgG","vIw1Mo5T","wIRcxMGs","xf5ls3os","z1l1eH1L","zwusY0Sg"]),154701:t.r(68,1,333),155324:t.q(t.tw(t.cb(0,t.o([t.os(t.w,3,[271,522]),t.os(t.cx,4,[271,523]),t.ps(2,271),t.os(t.s,1,[271,520])]),t.ge(1),1),2592e6)),155688:t.r(68,1,"timeout.com/london/music/win-the-ultimate-bst-hyde-park-experience-this-summer"),155850:t.r(44,0,2,[279,280,414,450]),157140:t.r(49,t.s,2,["ballet","opera"]),158433:t.r(46,72576e6,0,t.os(t.s,2,["tattoo"]),1,1),158784:t.r(44,0,2,[404]),161949:t.r(44,0,2,["automotive","car","drive","driving","racing",487,488]),162071:t.r(68,2,"Shoreditch"),162072:t.q(t.tw(t.cb(0,t.as(t.s,2,["london","soho"]),t.ge(1),1),2592e6)),162169:t.r(5,"FormSubmission",t.ps(2,"Movies on the River")),16243:t.r(8,t.y(3,201),t.ps(2,200),t.ps(1,200)),162903:t.r(41,1,20,20),162919:t.r(41,2,30,30),163175:t.r(13,9,3196653578),163462:t.q(t.acq(t.cb(0,t.t,t.ge(1),1),t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.itp("liveramp_StatSocial","1006913371",!1,"163462"),t.itp("liveramp_Kantar","1004735569",!1,"163462")),t.itp("liveramp_StatSocial","1006916191",!1,"163462")),t.itp("liveramp_Kantar","1006584561",!1,"163462")),t.itp("liveramp_Kantar","1004735619",!1,"163462")),t.itp("liveramp_StatSocial","1006918701",!1,"163462")),t.itp("liveramp_StatSocial","1006918341",!1,"163462")),t.itp("liveramp_StatSocial","1006918551",!1,"163462")),t.itp("liveramp_StatSocial","1006918041",!1,"163462")),t.itp("liveramp_StatSocial","1006918151",!1,"163462")),t.itp("liveramp_StatSocial","1006918161",!1,"163462")),t.itp("liveramp_StatSocial","1006918121",!1,"163462")),t.itp("liveramp_StatSocial","1006918181",!1,"163462")),t.itp("liveramp_ShareThis","1006582051",!1,"163462")),t.itp("liveramp_ShareThis","1006582051",!1,"163462")),t.itp("liveramp_ShareThis","1006809271",!1,"163462")),t.itp("liveramp_Kantar","1003693699",!1,"163462")),t.itp("liveramp_Kantar","1003693789",!1,"163462")),t.itp("liveramp_StatSocial","1006916081",!1,"163462")))),164476:t.r(0,t.acq(t.acq(t.cb(0,t.t,t.ge(1),1),t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.itp("liveramp_Stirista","1003670779",!1,"164476"),t.itp("liveramp_Experian","1004265409",!1,"164476")),t.itp("liveramp_Kantar","1004735479",!1,"164476")),t.itp("liveramp_Stirista","1004373879",!1,"164476")),t.itp("liveramp_Stirista","1004373869",!1,"164476")),t.itp("liveramp_StatSocial","1006917491",!1,"164476")),t.itp("liveramp_OnAudience","1002860816",!1,"164476")),t.itp("liveramp_OnAudience","1002863676",!1,"164476"))),t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.itp("liveramp_StatSocial","1006911461",!1,"164476"),t.itp("liveramp_StatSocial","1006913511",!1,"164476")),t.itp("liveramp_StatSocial","1006916281",!1,"164476")),t.itp("liveramp_Kantar","1005986501",!1,"164476")),t.itp("liveramp_StatSocial","1006915951",!1,"164476")),t.itp("liveramp_StatSocial","1006915451",!1,"164476"))),t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.itp("liveramp_StatSocial","1006917441",!1,"164476"),t.itp("liveramp_StatSocial","1006917491",!1,"164476")),t.itp("liveramp_StatSocial","1006915681",!1,"164476")),t.itp("liveramp_ShareThis","1001599916",!1,"164476")),t.itp("liveramp_StatSocial","1006918711",!1,"164476")),t.itp("liveramp_StatSocial","1006911851",!1,"164476"))),166265:t.r(59,["4 best theme parks near london","attractions uk","search | time out london","time out london - events, attractions & what\'s on in london"],["alton towers","attractions","https://www.timeout.com/london/news","legoland","madame tussards","national sea life centre","sealife","the london eye","theme parks","thorpe park","warwick castle"],[53,"Things to do","Attractions"]),166342:t.r(13,16,6218863664),166733:t.r(44,0,2,["black history","black lives","blm"]),166778:t.q(t.sq(t.cb(0,t.ps(2,"energy"),t.ge(1),1))),167632:t.r(50,14),167908:t.r(23,3,t.pe(9,3099511567),t.tw(t.cb(0,t.os(t.s,1,["gamble","gambling","lottery","lotto","scratcher"]),t.ge(1),1),2592e6),t.cb(1,t.pe(9,3099511567),t.ge(1),1)),167942:t.r(47,t.z(13,64),6,65),167943:t.r(48,65),172212:t.r(44,0,1,["https://www.timeout.com/amsterdam/hotels/where-to-stay-in-amsterdam","https://www.timeout.com/austin/travel/where-to-stay-in-austin","https://www.timeout.com/bangkok/things-to-do/song-wat","https://www.timeout.com/barcelona/hotels/where-to-stay-in-barcelona","https://www.timeout.com/chicago/news/hyde-park-is-one-of-time-outs-coolest-neighborhoods-in-the-world-101723","https://www.timeout.com/chicago/things-to-do/where-to-stay-in-chicago","https://www.timeout.com/dublin/hotels/where-to-stay-in-dublin","https://www.timeout.com/fr/montreal/nouvelles/ce-sont-les-quartiers-les-plus-cool-du-monde-et-montreal-na-meme-pas-reussi-a-se-classer-parmi-les-20-premiers-101723?utm_campaign=likeshopme&utm_medium=social&utm_source=instagram&utm_content=https%3a//app.dashhudson.com/timeoutmontreal/library/media/342736149","https://www.timeout.com/hong-kong/restaurants/best-restaurants-in-sheung-wan","https://www.timeout.com/hong-kong/restaurants/the-best-cafes-and-coffee-shops-in-sheung-wan","https://www.timeout.com/hong-kong/things-to-do/sheung-wan-ultimate-guide","https://www.timeout.com/hong-kong/things-to-do/tai-ping-shan-ultimate-guide","https://www.timeout.com/hong-kong/travel/where-to-stay-in-hong-kong","https://www.timeout.com/lisbon/things-to-do/where-to-stay-in-lisbon","https://www.timeout.com/london/news/this-london-neighbourhood-is-officially-one-of-the-coolest-in-the-world-101623","https://www.timeout.com/london/restaurants/kings-cross-restaurants","https://www.timeout.com/london/things-to-do/kings-cross-area-guide","https://www.timeout.com/london/travel/where-to-stay-in-london","https://www.timeout.com/los-angeles/downtown-arts-district-los-angeles","https://www.timeout.com/los-angeles/news/the-arts-district-was-voted-l-a-s-coolest-neighborhoodand-one-of-the-coolest-in-the-world-101723","https://www.timeout.com/los-angeles/travel/where-to-stay-in-los-angeles","https://www.timeout.com/madrid/hotels/where-to-stay-in-madrid","https://www.timeout.com/melbourne/news/its-official-this-melbourne-suburb-is-the-sixth-coolest-neighbourhood-in-the-whole-world-101823","https://www.timeout.com/melbourne/travel/where-to-stay-in-melbourne","https://www.timeout.com/miami/news/this-miami-neighborhood-was-just-named-one-of-the-top-five-coolest-in-the-u-s-101723","https://www.timeout.com/miami/things-to-do/things-to-do-coral-gables","https://www.timeout.com/miami/things-to-do/where-to-stay-in-miami","https://www.timeout.com/montreal/downtown-montreal","https://www.timeout.com/montreal/restaurants/best-downtown-montreal-restaurants","https://www.timeout.com/montreal/things-to-do/where-to-stay-in-montreal","https://www.timeout.com/new-orleans/hotels/where-to-stay-in-new-orleans","https://www.timeout.com/news/its-official-this-is-the-worlds-coolest-neighbourhood-right-now-101723","https://www.timeout.com/newyork/news/six-hidden-secrets-of-fort-greene-brooklyn-101723","https://www.timeout.com/newyork/travel/where-to-stay-in-nyc","https://www.timeout.com/paris/en/travel/where-to-stay-in-paris","https://www.timeout.com/prague/hotels/where-to-stay-in-prague","https://www.timeout.com/san-francisco/travel/where-to-stay-in-san-francisco","https://www.timeout.com/singapore/things-to-do/the-ultimate-guide-to-chinatown","https://www.timeout.com/singapore/things-to-do/the-ultimate-guide-to-pearls-hill-terrace","https://www.timeout.com/sydney/news/sydney-suburb-enmore-made-the-time-out-top-20-coolest-neighbourhoods-in-the-whole-world-101723","https://www.timeout.com/sydney/restaurants/the-best-restaurants-in-enmore","https://www.timeout.com/sydney/things-to-do/enmore-area-guide","https://www.timeout.com/sydney/travel/where-to-stay-in-sydney","https://www.timeout.com/things-to-do/coolest-streets-in-the-world","https://www.timeout.com/tokyo/news/tomigaya-is-one-of-the-worlds-top-10-coolest-neighbourhoods-in-2023-101823","https://www.timeout.com/tokyo/things-to-do/one-day-in-tomigaya-shibuya","https://www.timeout.com/travel/coolest-neighbourhoods-in-the-world","https://www.timeout.com/uk/news/this-neighbourhood-is-officially-the-coolest-in-the-uk-101723","https://www.timeout.es/madrid/es/noticias/carabanchel-elegido-el-tercer-mejor-barrio-del-mundo-en-2023-101723","https://www.timeout.jp/tokyo/ja/things-to-do/50-things-to-do-in-osaka"]),172841:t.r(13,9,3256591429),173444:t.r(24,"liveramp_Stirista","1000302866","173444",t.itp("liveramp_Stirista","1004424909",!1,"173444"),t.itp("liveramp_Experian","1004256559",!1,"173444")),173767:t.r(28,"291","173767","232","173767",t.itp("eyeota","229",!1,"173767"),"230","173767"),175669:t.r(49,t.w,13,["CA","US"]),18570:t.r(33,t.ps(2,409),1,1,0,t.ps(1,409),1,1),21542:t.r(33,t.y(3,522),1,1,0,t.os(t.s,2,["black friday","black-friday"]),1,1),21794:t.r(7,1,["https://www.timeout.com/birmingham","https://www.timeout.com/bristol","https://www.timeout.com/edinburgh","https://www.timeout.com/glasgow","https://www.timeout.com/leeds",333,"https://www.timeout.com/manchester"]),23694:t.r(15,t.bsc_(1,["5XtTcepd","92b3jOue","VTWjVbLE","Vp+KxwMe","gh+goqL+","x4Bu8KzP"]),0,t.s,2,[84,101,"chippies",170,"deliveroo",217,239,258,278,280,313,337,"mom",395,396,409,450,490,514,517,547,555,560,603,622,650]),27457:t.r(14,2,t.s,14,[165,"livenation.co.uk",370,410,576,577,632],8),28391:t.r(20,t.ocq(t.cb(0,t.a([t.y(7,57),t.z(10,57)]),t.ge(1),1),t.cb(0,t.a([t.pe(7,"Manchester"),t.bsnc_(10,["qe9ylbBB"])]),t.ge(1),1)),2,["day trips","day-trips",286,487,488],0,t.a([t.pe(7,"Edinburgh"),t.bsnc_(10,["6jd02hNj"])]),t.ge(1),1),28538:t.r(10,12,1),28540:t.r(10,["basket","quantity"],1),29195:t.r(46,24192e5,0,t.os(t.s,2,["dublin",303,"ireland","irish","st paddy","st patrick","st.paddy","st.patrick"]),1,1),29219:t.r(44,2,14,["facebook.com/sharer","twitter.com/intent"]),29567:t.r(1,5),29568:t.r(2,54),29569:t.r(1,21),29571:t.r(1,23),29572:t.r(2,60),29573:t.r(1,18),29574:t.r(2,63),29575:t.r(2,68),29576:t.q(t.acq(t.cb(0,t.pge(12,1),t.ge(1),1),t.cb(0,t.pe(5,"Yoga"),t.ge(1),1))),29581:t.r(10,["transaction","revenue"],50),29582:t.r(6,t.pg(12,1)),29585:t.r(5,2,t.os(t.s,14,["axs","barbican","earthackney","festicket","livenation","roundhouse","ticketmaster"])),29590:t.r(18,["LNC4Nc+S","NYXXVT2G","dv7lKfLM"],5),29591:t.r(19,["Qf81Sysz","eXpEcGCJ"],54),29592:t.r(14,0,t.w,8,["Exhibition","Art"],21),29593:t.r(18,["6IPSLOKc","L+xFpMuk","TmpxDX+F","W1qv5rni","Y8kEVZmT","ZznWXs/U","zZ6POLz+"],23),29594:t.r(15,t.y(5,56),0,t.w,8,[56,"Expo"]),29595:t.r(19,["ExJgy/uw","x8NKmm40"],60),29596:t.r(18,["8zkJzdWw"],18),29598:t.r(19,["050JDCif","8arWVWnj","dOVuhxdu"],63),29599:t.q(t.ocq(t.cb(0,t.y(8,68),t.ge(1),1),t.cb(0,t.y(5,68),t.ge(1),1))),32319:t.r(27,["timeout.com/london/my-non-dairy-diary-fitness-hacks","timeout.com/london/sport-and-fitness/the-best-yoga-studios-streaming-online-classes-right-now","timeout.com/newyork/news/work-out-to-these-fitness-classes-you-can-stream-from-home-031620","timeout.com/sydney/sport-and-fitness/the-best-online-workouts-you-can-do-at-home"],t.ref(23),t.ocq(t.cb(0,t.pc_(4,"sport and fitness (category)"),t.ge(1),1),t.cb(0,t.os(t.s,1,[123,128,129,175,197,243,264,304,318,378,443,"pool","run",534,535,536,539,553,649]),t.ge(1),1)),8,[246,"health and wellbeing"]),32321:t.r(27,["timeout.com/london/film/the-best-movies-on-disney","timeout.com/london/news/david-walliams-is-releasing-a-free-kids-audiobook-every-day-for-30-days-032420","timeout.com/london/news/disney-is-offering-10-off-when-you-pre-order-by-march-23","timeout.com/london/news/disney-uk-release-date-how-to-watch-and-how-much-does-it-cost-032520","timeout.com/london/news/the-national-trust-is-opening-its-parks-and-gardens-for-free-031820","timeout.com/melbourne/kids/the-best-kids-shows-to-stream-online-right-now","timeout.com/melbourne/news/disney-is-streaming-frozen-2-now-three-months-ahead-of-schedule-031720","timeout.com/sydney/film/the-best-kids-shows-to-stream-online-right-now","timeout.com/sydney/news/disney-is-streaming-frozen-2-now-three-months-ahead-of-schedule-031720","timeout.com/sydney/news/the-rspca-is-asking-self-isolating-aussies-to-foster-a-rescue-animal-031920","timeout.com/sydney/news/you-can-now-get-the-best-bit-of-the-easter-show-delivered-straight-to-your-door-032420","timeout.com/sydney/things-to-do/quokka-cuddles-livestream"],t.bsc_(7,["Q+kzGPTu"]),t.cb(0,t.bsc_(3,["VGnH2Lg7"]),t.ge(1),1),1,["babies","baby","child","dad","daughter","familia","families","family","father","kid","madre","mother",396,"padre","parent","son","toddler"]),32324:t.r(25,t.os(t.s,1,[".timeout.com/sydney/news/our-restaurant-of-the-year-is-offering-sri-lankan-lamprai-to-take-away-031820","timeout.com/london/restaurants/best-indian-takeaways-london","timeout.com/london/restaurants/the-best-recipe-boxes-in-london-tried-and-tested","timeout.com/london/restaurants/the-best-takeaways-for-delivery-in-london","timeout.com/london/restaurants/the-latest-top-london-restaurants-doing-home-delivery","timeout.com/london/shopping/best-alcohol-delivery-services-in-london","timeout.com/london/shopping/the-best-ways-to-get-your-groceries-delivered-in-london","timeout.com/melbourne/news/aangan-is-giving-away-free-meals-to-seniors-031820","timeout.com/melbourne/news/burn-city-smokers-is-delivering-barbecue-to-your-door-031820","timeout.com/melbourne/news/how-to-support-your-local-restaurant-during-the-outbreak-of-covid-19","timeout.com/melbourne/news/ides-have-released-a-zine-and-every-single-dollar-goes-directly-to-staff-032520","timeout.com/melbourne/news/melbournes-gnoccheria-is-now-offering-home-delivery-032520","timeout.com/melbourne/news/moon-dog-has-launched-contactless-beer-drive-throughs-and-home-delivery-032520","timeout.com/melbourne/news/you-can-now-get-thats-amore-cheeses-delivered-right-to-your-door-032520","timeout.com/melbourne/restaurants/late-night-food-delivery-in-melbourne","timeout.com/melbourne/restaurants/restaurants-and-bars-now-doing-takeaway-in-melbourne","timeout.com/newyork/news/how-to-help-new-york-restaurants-and-bars-now-031920","timeout.com/newyork/news/nycs-best-breweries-are-now-delivering-beers-to-your-door-032020","timeout.com/newyork/news/raos-nycs-most-exclusive-restaurant-is-doing-take-out-for-the-first-time-ever-032320","timeout.com/newyork/news/restaurant-gift-cards-and-merch-to-buy-during-coronavirus-shutdown-031620","timeout.com/newyork/news/this-new-york-bakery-is-offering-take-home-cookie-dough-032020","timeout.com/newyork/news/worlds-best-bar-dante-launches-delivery-and-takeout-during-coronavirus-shutdown-031720","timeout.com/sydney/film/the-9-best-food-movies-you-should-be-streaming-right-now","timeout.com/sydney/news/chin-chin-is-offering-takeaway-for-the-first-time-ever-032520","timeout.com/sydney/news/food-delivery-services-are-offering-no-contact-delivery-now-032020","timeout.com/sydney/news/heres-how-sydneys-hospitality-businesses-are-adapting-to-the-covid-19-pandemic-032020","timeout.com/sydney/news/lucios-whole-menu-is-available-for-take-away-at-a-huge-discount-031820","timeout.com/sydney/news/saint-peter-is-now-offering-takeaway-dinners-031720","timeout.com/sydney/news/support-your-favourite-restaurant-in-these-trying-times-by-buying-a-voucher-031720","timeout.com/sydney/restaurants/the-best-healthy-deliveries-in-sydney","timeout.com/sydney/restaurants/the-best-things-to-order-from-uber-eats-in-sydney","timeout.com/sydney/shopping/the-best-sydney-bottle-shops-offering-home-delivery"]),1,1,t.ocq(t.ocq(t.tw(t.cb(0,t.y(3,482),t.ge(1),1),2592e6),t.tw(t.cb(0,t.os(t.s,1,["cookbook","cookery","cooking",267,"recipe",481,"take out","take-out",555]),t.ge(1),1),2592e6)),t.tw(t.cb(0,t.bsc_(8,["NYXXVT2G","dv7lKfLM","eXpEcGCJ"]),t.ge(1),1),2592e6)),0,t.pe(15,"Food + Drink"),t.ge(1),1),32333:t.q(t.ocq(t.ocq(t.cb(0,t.os(t.w,15,["Experience",54]),t.ge(1),1),t.cb(0,t.bsc_(8,["E7j+OKk7","Qf81Sysz","W1qv5rni","YAmLW71C"]),t.ge(1),1)),t.cb(0,t.os(t.s,1,[105,"crafts",244,276,"paint","pottery"]),t.ge(1),1))),32334:t.r(17,["RKug6y3f","sSC5O3ad"],["amazon","disney",258,395,409,"now-tv",547]),32336:t.r(17,["Cecegonm","UtDoQ6Ob","dLUY7VUS","e17et321","iExF/ZJL","vmOxQgRt"],["album","artist",189,"dj",289,402,"playlist",451,"song","stream"]),32338:t.r(16,1,["national trust","national-trust",421,426,506,"walk"],"timeout.com/london/things-to-do/9-places-to-see-cherry-blossom-in-london"),32339:t.r(17,["aiATcGBb","wDQrgrv5"],[119,"break",285,"roadtrip",506,"visit","weekends"]),32340:t.r(44,0,1,[132,"librarians","libraries","library","read"]),32341:t.r(23,0,t.y(8,63),t.ocq(t.cb(0,t.bsc_(3,["+35nF9aw","4jspQN6T","Kk/NktKa"]),t.ge(1),1),t.cb(0,t.os(t.s,2,["actor","broadway",404,449,"shakespeare",566,567,"west end","west-end"]),t.ge(1),1)),t.cb(0,t.bsc_(15,["W1qv5rni"]),t.ge(1),1)),32347:t.r(9,[98,"board",187,277,"game",280,"jigsaw",414,450,465,552,558,"tik tok",578,621],[98,"board-gam",187,277,279,280,414,449,465,552,558,578,621]),32348:t.r(7,2,["home",418,"work"]),32627:t.r(15,t.os(t.s,19,[120,248,377,406,431,525,532,600]),0,t.s,2,["barber",120,248,"hair","make-up",377,"massage","meditation",406,431,525,532,600,630]),62273:t.r(42,"eyeota","35782",!1,"62273"),62592:t.r(35,1,[131,152,159,219,220,349,379,457,564,592,610,611,629],2,[131,152,159,219,220,349,379,457,564,592,610,611,629]),71852:t.r(20,t.cb(0,t.os(t.s,1,[240,241,268,444,529,542,631]),t.ge(1),1),["event","offerText"],[104,268,541,542,593,626,631,"white hart lane"],0,t.os(t.s,2,[104,240,241,268,444,"play-as-you-go",529,541,542,593,626,631,"world cup","world-cup"]),t.ge(1),1),73622:t.r(34,t.y(3,482),1,1,t.s,2,["chinese","delivery near me","delivery service","dominos","drink",267,"indian delivery","kebab","pizza",481]),74544:t.r(25,t.os(t.s,1,[321,322]),1,1,t.tw(t.cb(3,t.pe(9,2449191106),t.ge(1),1),2592e6),0,t.os(t.s,2,["azul histrico",321,322,"past"]),t.ge(1),1),75203:t.r(32,5184e6,t.pg(18,50),1,1,t.cb(0,t.o([t.ref(7),t.os(t.s,1,["boyfriend","couples",206,245,263,"girlfriend","husband",373,"relationship","wife"])]),t.ge(1),1),5184e6),7809:t.r(6,t.t),7827:t.q(t.ocq(t.cb(0,t.o([t.ref(0),t.os(t.cx,4,[323,598,286,329,599]),t.ref(19),t.ref(12)]),t.ge(1),1),t.itp("skimlinks","7310447",!1,"7827"))),7834:t.r(52,1,1,14),7835:t.r(52,1,1,1),7836:t.r(61,[100,101,126,149,188,211,213,228,"early-adopter",232,236,239,274,278,280,356,387,388,409,416,"online-video",430,432,437,451,510,511,530,531,547,554,558,603,"video-game",628],[100,101,126,149,188,211,213,228,"early adopter",232,236,239,274,278,280,356,387,388,409,416,"online video",430,432,437,451,509,511,530,531,547,554,558,603,622,628]),7843:t.r(54,t.y(3,403),t.pc_(4,"music genres"),t.os(t.s,2,[146,178,189,218,232,255,289,402,"sonar"]),t.os(t.s,1,[146,178,189,218,232,255,289,402])),7844:t.q(t.tw(t.cb(0,t.o([t.y(3,482),t.os(t.cx,4,["food & drink (subject)","restaurants","restaurants & cafes (venues)","restaurant & bar facilities"]),t.ps(3,267),t.ps(2,481),t.ps(1,481)]),t.ge(1),1),2592e6)),7878:t.r(52,1,1,4),7880:t.r(33,t.pg(18,50),1,1,0,t.o([t.ref(7),t.os(t.s,1,[206,245,263,373])]),1,1),7881:t.r(25,t.ref(20),1,1,t.ocq(t.tw(t.cb(0,t.ref(6),t.ge(1),1),2592e6),t.tw(t.cb(0,t.ref(10),t.ge(1),1),2592e6)),2,t.ref(3),t.ge(1),1),7925:t.r(56,t.y(3,522),t.os(t.s,2,[520]),t.os(t.s,1,[520]),t.cx,4,["style",521,523]),7981:t.r(63,[125,224,283,325,342,359,362,459,470,595],[125,224,283,325,342,359,362,459,470,596,597],363),8015:t.r(58,3,[105,200,400,567],[244,524,276,567,105,400],[72,105,110,133,172,196,200,242,244,246,276,296,346,399,439,524,567],[72,105,111,133,172,196,200,242,244,246,276,296,346,399,439,524,567]),8301:t.r(0,t.ocq(t.ocq(t.ocq(t.ocq(t.ocq(t.itp("eyeota","229",!1,"8301"),t.itp("eyeota","294",!1,"8301")),t.itp("eyeota","6675",!1,"8301")),t.itp("eyeota","230",!1,"8301")),t.itp("eyeota","295",!1,"8301")),t.itp("eyeota","6676",!1,"8301")),t.ocq(t.ocq(t.itp("eyeota","242",!1,"8301"),t.itp("eyeota","300",!1,"8301")),t.itp("eyeota","6680",!1,"8301"))),8500:t.q(t.tw(t.cb(0,t.o([t.y(3,106),t.pc_(4,105)]),t.ge(1),1),2592e6)),8501:t.r(55,t.y(3,117),t.s,2,["bar","pub"]),8502:t.r(55,t.pe(3,"property (category)"),t.s,2,["area guide","flat","house","housing","letting","live","neighbourhood","neighbours","ownership","postcode","properties","property","rent"]),8679:t.r(11,"the-cultural-tfl-map"),88397:t.r(29,"232","88397","230","88397","229","88397"),9697:t.r(59,[315,383,384,420,445,446,614],[315,383,384,420,445,446,614],["vegetarian-friendly",615,616]),9702:t.r(58,11,[88,102,116,"burgers","grils",545],["grills",102,545,88,186,143],["#foodporn",113,115,116,118,121,143,144,155,162,166,168,186,192,"costillas",227,253,307,352,452,453,455,456,486,"steak",562,612,613],[113,115,116,118,121,143,144,155,162,166,168,186,192,"costilles",227,253,307,352,452,453,455,456,486,545,562,612,613]),9704:t.r(62,[160,"dress shops",287,306,311,326,464,504,538,563],[160,287,306,311,326,464,504,538,563],306),9705:t.r(62,[169,173,205,288,324,386,405,408,"noel","reis mags","reyes magos",502,637,648],[169,173,205,288,324,386,405,408,"reis-mags","reyes-magos",502,637,648],169),97745:t.r(44,0,2,[249,309,"hogwarts","wizarding world"]),9812:t.r(57,t.os(t.w,1,["grupos",301,256,"amistat",91,181,90,89,257,"friendship",381,423,385,272,300]),t.ps(11,257),t.w,3,[412,117],t.cx,4,[412,"going in a group","city life (blog posts)"],2,[89,90,91,181,256,257,272,300,301,381,385,423]),9831:t.r(40,3,2),9837:t.r(26,5184e6,t.a([t.y(10,58),t.y(6,62),t.z(7,58)]),1,1,t.ocq(t.tw(t.cb(0,t.a([t.y(10,57),t.y(6,65),t.z(7,57)]),t.ge(1),1),5184e6),t.tw(t.cb(0,t.a([t.y(10,61),t.y(6,66),t.as(t.x,7,["New York Kids",61])]),t.ge(1),1),5184e6)),t.tw(t.cb(0,t.a([t.y(10,51),t.y(6,62),t.z(7,51)]),t.ge(1),1),5184e6))}||{},queriesByEvent:e||{}}}));function In(t){return((t,e)=>i(Mn(t,e),(e=>Object.assign(Object.assign({},e),{userId:t.userId}))))(t,Nn())}function Cn(t,e){const n=i((t=>fn(t,((t,e)=>e.state?g({[e.checksum]:e.state}):f)))(t),ze,we((t=>F(new Map)))),r=i(ze(e),we((t=>F(new Map))));return i(function(t,e){return cn("delta",t,e)}(n,r),(t=>je(t)))||{}}!function(t){const e=self;function n(t,n,r,o){function i(n){if("function"!=typeof e.postMessage)return t.ports[0].postMessage(n);e.postMessage(n)}if(!r)return i([n,null,o]);"undefined"!=typeof console&&"error"in console&&console.error("Worker caught an error:",r),i([n,r])}e.addEventListener("message",(function(e){if(r=e,!Array.isArray(r.data)||2!==r.data.length)return;var r;const o=e.data,[i,a]=o;if("function"==typeof t)return function(t,e,r,o){const i=function(t,e){try{return{res:t(e)}}catch(t){return{err:t}}}(e,o);return Boolean(null===(a=i)||void 0===a?void 0:a.err)?n(t,r,i.err):!(c=i.res)||"object"!=typeof c&&"function"!=typeof c||"function"!=typeof c.then?n(t,r,null,i.res):void i.res.then((function(e){n(t,r,null,e)}),(function(e){n(t,r,e)}));var a,c}(e,t,i,a);n(e,i,new Error("Please pass a function into register()."))}))}((t=>"QLE"===t.engine?In(t):function(t){switch(t.type){case"delta":return Cn(t.stateMap,t.lastSentStateMapWithChecksum);case"noop":return{}}}(t)))})();',"Worker",void 0,void 0)}},477:t=>{t.exports=function(t,e,n,r){var i=self||window;try{try{var o;try{o=new i.Blob([t])}catch(e){(o=new(i.BlobBuilder||i.WebKitBlobBuilder||i.MozBlobBuilder||i.MSBlobBuilder)).append(t),o=o.getBlob()}var s=i.URL||i.webkitURL,a=s.createObjectURL(o),c=new i[e](a,n);return s.revokeObjectURL(a),c}catch(r){return new i[e]("data:application/javascript,".concat(encodeURIComponent(t)),n)}}catch(t){if(!r)throw Error("Inline worker is not supported");return new i[e](r,n)}}},7582:(t,e,n)=>{n.d(e,{_T:()=>r,mG:()=>i});function r(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function i(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{c(r.next(t))}catch(t){o(t)}}function a(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))}Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(t,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __webpack_exports__={},_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_0__;_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3992),(0,_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_0__.ho)(!0),(0,_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_0__.HJ)((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,333))))})();